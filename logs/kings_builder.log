2026-01-30 02:02:21,266 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-30 14:45:32,184 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-30 15:36:22,250 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-30 16:37:48,627 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-30 16:45:04,138 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-30 16:47:47,843 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-30 16:47:58,931 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-30 16:50:03,199 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-30 16:50:03,248 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-30 16:51:07,201 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-30 16:51:07,203 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-30 16:52:40,313 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-30 16:52:40,381 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-30 16:52:50,728 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-30 16:53:33,303 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-30 16:56:13,218 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-30 16:56:13,271 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-30 16:57:11,578 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-30 16:57:11,609 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-30 16:57:29,368 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-30 16:57:29,557 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-30 16:57:49,216 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-30 16:58:40,856 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-30 16:58:40,920 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-30 16:58:52,824 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-30 16:59:54,706 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-30 17:04:07,088 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-30 19:18:50,260 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-30 19:20:13,229 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-30 19:21:06,776 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-30 19:21:06,801 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-30 19:21:14,761 - kings_builder - INFO - Skipped master admin creation during startup due to bcrypt compatibility issues
2026-01-30 19:21:14,762 - kings_builder - INFO - Database tables created and super admin initialized
2026-01-30 19:21:28,210 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-30 19:21:36,194 - kings_builder - INFO - Skipped master admin creation during startup due to bcrypt compatibility issues
2026-01-30 19:21:36,194 - kings_builder - INFO - Database tables created and super admin initialized
2026-01-30 19:23:12,562 - kings_builder - INFO - REQUEST: GET / FROM: 127.0.0.1:60450 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-30 19:23:12,568 - kings_builder - INFO - RESPONSE: 307 for GET / DURATION: 0.006s
2026-01-30 19:23:12,575 - kings_builder - INFO - REQUEST: GET /docs FROM: 127.0.0.1:60450 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-30 19:23:12,577 - kings_builder - INFO - RESPONSE: 200 for GET /docs DURATION: 0.002s
2026-01-30 19:23:13,101 - kings_builder - INFO - REQUEST: GET /openapi.json FROM: 127.0.0.1:60450 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-30 19:23:13,319 - kings_builder - INFO - RESPONSE: 200 for GET /openapi.json DURATION: 0.218s
2026-01-30 19:31:16,673 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:60534 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-30 19:31:22,835 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-30 19:31:23,982 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\relationships.py", line 2434, in _determine_joins
    self.primaryjoin = join_condition(
                       ~~~~~~~~~~~~~~^
        self.parent_persist_selectable,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        consider_as_foreign_keys=consider_as_foreign_keys,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\util.py", line 121, in join_condition
    return Join._join_condition(
           ~~~~~~~~~~~~~~~~~~~~^
        a,
        ^^
    ...<2 lines>...
        consider_as_foreign_keys=consider_as_foreign_keys,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\selectable.py", line 1441, in _join_condition
    cls._joincond_trim_constraints(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        a, b, constraints, consider_as_foreign_keys
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\selectable.py", line 1586, in _joincond_trim_constraints
    raise exc.AmbiguousForeignKeysError(
    ...<5 lines>...
    )
sqlalchemy.exc.AmbiguousForeignKeysError: Can't determine join between 'users' and 'builders'; tables have more than one foreign key constraint relationship between them. Please specify the 'onclause' of this join explicitly.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 30, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4268, in _do_configure_registries
    mapper._post_configure_properties()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2427, in _post_configure_properties
    prop.init()
    ~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\interfaces.py", line 595, in init
    self.do_init()
    ~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\relationships.py", line 1657, in do_init
    self._setup_join_conditions()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\relationships.py", line 1895, in _setup_join_conditions
    self._join_condition = jc = JoinCondition(
                                ~~~~~~~~~~~~~^
        parent_persist_selectable=self.parent.persist_selectable,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<14 lines>...
        can_be_synced_fn=self._columns_are_mapped,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\relationships.py", line 2321, in __init__
    self._determine_joins()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\relationships.py", line 2478, in _determine_joins
    raise sa_exc.AmbiguousForeignKeysError(
    ...<7 lines>...
    ) from afe
sqlalchemy.exc.AmbiguousForeignKeysError: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-30 19:36:50,250 - kings_builder - INFO - REQUEST: GET / FROM: 127.0.0.1:60571 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-30 19:36:50,255 - kings_builder - INFO - RESPONSE: 307 for GET / DURATION: 0.006s
2026-01-30 19:36:50,294 - kings_builder - INFO - REQUEST: GET /docs FROM: 127.0.0.1:60571 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-30 19:36:50,297 - kings_builder - INFO - RESPONSE: 200 for GET /docs DURATION: 0.003s
2026-01-30 19:36:51,403 - kings_builder - INFO - REQUEST: GET /openapi.json FROM: 127.0.0.1:60571 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-30 19:36:51,413 - kings_builder - INFO - RESPONSE: 200 for GET /openapi.json DURATION: 0.010s
2026-01-30 19:44:54,696 - kings_builder - INFO - REQUEST: GET / FROM: 127.0.0.1:60644 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-30 19:44:54,698 - kings_builder - INFO - RESPONSE: 307 for GET / DURATION: 0.002s
2026-01-30 19:44:54,707 - kings_builder - INFO - REQUEST: GET /docs FROM: 127.0.0.1:60644 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-30 19:44:54,708 - kings_builder - INFO - RESPONSE: 200 for GET /docs DURATION: 0.001s
2026-01-30 19:44:55,231 - kings_builder - INFO - REQUEST: GET /openapi.json FROM: 127.0.0.1:60644 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-30 19:44:55,238 - kings_builder - INFO - RESPONSE: 200 for GET /openapi.json DURATION: 0.008s
2026-01-30 22:42:19,618 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-30 22:42:28,243 - kings_builder - INFO - Skipped master admin creation during startup due to bcrypt compatibility issues
2026-01-30 22:42:28,244 - kings_builder - INFO - Database tables created and super admin initialized
2026-01-30 22:43:28,229 - kings_builder - INFO - REQUEST: GET /docs FROM: 127.0.0.1:62909 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-30 22:43:28,247 - kings_builder - INFO - RESPONSE: 200 for GET /docs DURATION: 0.020s
2026-01-30 22:43:28,727 - kings_builder - INFO - REQUEST: GET /openapi.json FROM: 127.0.0.1:62909 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-30 22:43:28,750 - kings_builder - INFO - RESPONSE: 200 for GET /openapi.json DURATION: 0.024s
2026-01-30 22:48:41,056 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:63055 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-30 22:48:41,218 - kings_builder - ERROR - Validation Error: [{'type': 'missing', 'loc': ('body', 'username'), 'msg': 'Field required', 'input': None, 'url': 'https://errors.pydantic.dev/2.12/v/missing'}, {'type': 'missing', 'loc': ('body', 'password'), 'msg': 'Field required', 'input': None, 'url': 'https://errors.pydantic.dev/2.12/v/missing'}]
2026-01-30 22:48:41,223 - kings_builder - INFO - RESPONSE: 422 for POST /api/v1/auth/login DURATION: 0.169s
2026-01-30 22:48:44,927 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:63055 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-30 22:48:44,929 - kings_builder - ERROR - Validation Error: [{'type': 'missing', 'loc': ('body', 'username'), 'msg': 'Field required', 'input': None, 'url': 'https://errors.pydantic.dev/2.12/v/missing'}, {'type': 'missing', 'loc': ('body', 'password'), 'msg': 'Field required', 'input': None, 'url': 'https://errors.pydantic.dev/2.12/v/missing'}]
2026-01-30 22:48:44,930 - kings_builder - INFO - RESPONSE: 422 for POST /api/v1/auth/login DURATION: 0.002s
2026-01-30 22:48:51,987 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:63061 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-30 22:48:51,991 - kings_builder - ERROR - Validation Error: [{'type': 'missing', 'loc': ('body', 'username'), 'msg': 'Field required', 'input': None, 'url': 'https://errors.pydantic.dev/2.12/v/missing'}, {'type': 'missing', 'loc': ('body', 'password'), 'msg': 'Field required', 'input': None, 'url': 'https://errors.pydantic.dev/2.12/v/missing'}]
2026-01-30 22:48:51,993 - kings_builder - INFO - RESPONSE: 422 for POST /api/v1/auth/login DURATION: 0.006s
2026-01-30 22:49:10,159 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:63076 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-30 22:49:10,171 - kings_builder - ERROR - Validation Error: [{'type': 'missing', 'loc': ('body', 'username'), 'msg': 'Field required', 'input': None, 'url': 'https://errors.pydantic.dev/2.12/v/missing'}, {'type': 'missing', 'loc': ('body', 'password'), 'msg': 'Field required', 'input': None, 'url': 'https://errors.pydantic.dev/2.12/v/missing'}]
2026-01-30 22:49:10,173 - kings_builder - INFO - RESPONSE: 422 for POST /api/v1/auth/login DURATION: 0.014s
2026-01-30 22:49:18,090 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:63082 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-30 22:49:18,095 - kings_builder - ERROR - Validation Error: [{'type': 'missing', 'loc': ('body', 'username'), 'msg': 'Field required', 'input': None, 'url': 'https://errors.pydantic.dev/2.12/v/missing'}, {'type': 'missing', 'loc': ('body', 'password'), 'msg': 'Field required', 'input': None, 'url': 'https://errors.pydantic.dev/2.12/v/missing'}]
2026-01-30 22:49:18,095 - kings_builder - INFO - RESPONSE: 422 for POST /api/v1/auth/login DURATION: 0.005s
2026-01-30 22:49:25,024 - kings_builder - INFO - REQUEST: GET /docs FROM: 127.0.0.1:63087 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-30 22:49:25,028 - kings_builder - INFO - RESPONSE: 200 for GET /docs DURATION: 0.004s
2026-01-30 22:49:25,344 - kings_builder - INFO - REQUEST: GET /openapi.json FROM: 127.0.0.1:63087 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-30 22:49:25,491 - kings_builder - INFO - RESPONSE: 200 for GET /openapi.json DURATION: 0.147s
2026-01-30 22:49:30,444 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:63093 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-30 22:49:30,447 - kings_builder - ERROR - Validation Error: [{'type': 'missing', 'loc': ('body', 'username'), 'msg': 'Field required', 'input': None, 'url': 'https://errors.pydantic.dev/2.12/v/missing'}, {'type': 'missing', 'loc': ('body', 'password'), 'msg': 'Field required', 'input': None, 'url': 'https://errors.pydantic.dev/2.12/v/missing'}]
2026-01-30 22:49:30,447 - kings_builder - INFO - RESPONSE: 422 for POST /api/v1/auth/login DURATION: 0.003s
2026-01-30 22:49:32,848 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:63093 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-30 22:49:32,850 - kings_builder - ERROR - Validation Error: [{'type': 'missing', 'loc': ('body', 'username'), 'msg': 'Field required', 'input': None, 'url': 'https://errors.pydantic.dev/2.12/v/missing'}, {'type': 'missing', 'loc': ('body', 'password'), 'msg': 'Field required', 'input': None, 'url': 'https://errors.pydantic.dev/2.12/v/missing'}]
2026-01-30 22:49:32,852 - kings_builder - INFO - RESPONSE: 422 for POST /api/v1/auth/login DURATION: 0.004s
2026-01-30 22:49:35,273 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:63093 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-30 22:49:35,274 - kings_builder - ERROR - Validation Error: [{'type': 'missing', 'loc': ('body', 'username'), 'msg': 'Field required', 'input': None, 'url': 'https://errors.pydantic.dev/2.12/v/missing'}, {'type': 'missing', 'loc': ('body', 'password'), 'msg': 'Field required', 'input': None, 'url': 'https://errors.pydantic.dev/2.12/v/missing'}]
2026-01-30 22:49:35,275 - kings_builder - INFO - RESPONSE: 422 for POST /api/v1/auth/login DURATION: 0.002s
2026-01-30 22:50:19,842 - kings_builder - INFO - REQUEST: GET /api/v1/auth FROM: 127.0.0.1:63117 USER_AGENT: curl/8.17.0
2026-01-30 22:50:19,853 - kings_builder - ERROR - HTTP Exception: 404 - Not Found
2026-01-30 22:50:19,854 - kings_builder - INFO - RESPONSE: 404 for GET /api/v1/auth DURATION: 0.013s
2026-01-30 22:51:13,924 - kings_builder - INFO - REQUEST: GET /docs FROM: 127.0.0.1:63145 USER_AGENT: curl/8.17.0
2026-01-30 22:51:13,927 - kings_builder - INFO - RESPONSE: 200 for GET /docs DURATION: 0.004s
2026-01-30 22:52:04,788 - kings_builder - INFO - REQUEST: GET /openapi.json FROM: 127.0.0.1:63164 USER_AGENT: curl/8.17.0
2026-01-30 22:52:04,792 - kings_builder - INFO - RESPONSE: 200 for GET /openapi.json DURATION: 0.005s
2026-01-30 22:52:32,853 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:63177 USER_AGENT: curl/8.17.0
2026-01-30 22:52:35,800 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-30 22:52:36,082 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 30, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-30 22:53:22,197 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-30 22:53:29,901 - kings_builder - INFO - Skipped master admin creation during startup due to bcrypt compatibility issues
2026-01-30 22:53:29,901 - kings_builder - INFO - Database tables created and super admin initialized
2026-01-30 22:53:36,457 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:63208 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-30 22:53:36,459 - kings_builder - ERROR - Validation Error: [{'type': 'missing', 'loc': ('body', 'username'), 'msg': 'Field required', 'input': None, 'url': 'https://errors.pydantic.dev/2.12/v/missing'}, {'type': 'missing', 'loc': ('body', 'password'), 'msg': 'Field required', 'input': None, 'url': 'https://errors.pydantic.dev/2.12/v/missing'}]
2026-01-30 22:53:36,460 - kings_builder - INFO - RESPONSE: 422 for POST /api/v1/auth/login DURATION: 0.003s
2026-01-30 22:53:38,429 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:63208 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-30 22:53:38,431 - kings_builder - ERROR - Validation Error: [{'type': 'missing', 'loc': ('body', 'username'), 'msg': 'Field required', 'input': None, 'url': 'https://errors.pydantic.dev/2.12/v/missing'}, {'type': 'missing', 'loc': ('body', 'password'), 'msg': 'Field required', 'input': None, 'url': 'https://errors.pydantic.dev/2.12/v/missing'}]
2026-01-30 22:53:38,432 - kings_builder - INFO - RESPONSE: 422 for POST /api/v1/auth/login DURATION: 0.003s
2026-01-30 22:53:42,638 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:63208 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-30 22:53:42,640 - kings_builder - ERROR - Validation Error: [{'type': 'missing', 'loc': ('body', 'username'), 'msg': 'Field required', 'input': None, 'url': 'https://errors.pydantic.dev/2.12/v/missing'}, {'type': 'missing', 'loc': ('body', 'password'), 'msg': 'Field required', 'input': None, 'url': 'https://errors.pydantic.dev/2.12/v/missing'}]
2026-01-30 22:53:42,641 - kings_builder - INFO - RESPONSE: 422 for POST /api/v1/auth/login DURATION: 0.003s
2026-01-30 23:41:51,047 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-30 23:43:38,709 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:58476 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-30 23:43:38,750 - kings_builder - ERROR - Validation Error: [{'type': 'missing', 'loc': ('body', 'username'), 'msg': 'Field required', 'input': None, 'url': 'https://errors.pydantic.dev/2.12/v/missing'}, {'type': 'missing', 'loc': ('body', 'password'), 'msg': 'Field required', 'input': None, 'url': 'https://errors.pydantic.dev/2.12/v/missing'}]
2026-01-30 23:43:38,751 - kings_builder - INFO - RESPONSE: 422 for POST /api/v1/auth/login DURATION: 0.043s
2026-01-30 23:45:15,330 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:60157 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-30 23:45:15,332 - kings_builder - ERROR - Validation Error: [{'type': 'missing', 'loc': ('body', 'username'), 'msg': 'Field required', 'input': None, 'url': 'https://errors.pydantic.dev/2.12/v/missing'}, {'type': 'missing', 'loc': ('body', 'password'), 'msg': 'Field required', 'input': None, 'url': 'https://errors.pydantic.dev/2.12/v/missing'}]
2026-01-30 23:45:15,332 - kings_builder - INFO - RESPONSE: 422 for POST /api/v1/auth/login DURATION: 0.002s
2026-01-30 23:45:16,944 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:60157 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-30 23:45:16,965 - kings_builder - ERROR - Validation Error: [{'type': 'missing', 'loc': ('body', 'username'), 'msg': 'Field required', 'input': None, 'url': 'https://errors.pydantic.dev/2.12/v/missing'}, {'type': 'missing', 'loc': ('body', 'password'), 'msg': 'Field required', 'input': None, 'url': 'https://errors.pydantic.dev/2.12/v/missing'}]
2026-01-30 23:45:16,965 - kings_builder - INFO - RESPONSE: 422 for POST /api/v1/auth/login DURATION: 0.021s
2026-01-30 23:45:35,386 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:60158 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-30 23:45:35,387 - kings_builder - ERROR - Validation Error: [{'type': 'missing', 'loc': ('body', 'username'), 'msg': 'Field required', 'input': None, 'url': 'https://errors.pydantic.dev/2.12/v/missing'}, {'type': 'missing', 'loc': ('body', 'password'), 'msg': 'Field required', 'input': None, 'url': 'https://errors.pydantic.dev/2.12/v/missing'}]
2026-01-30 23:45:35,389 - kings_builder - INFO - RESPONSE: 422 for POST /api/v1/auth/login DURATION: 0.002s
2026-01-30 23:46:27,706 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-30 23:47:20,007 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:60214 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-30 23:47:20,008 - kings_builder - ERROR - Validation Error: [{'type': 'missing', 'loc': ('body', 'username'), 'msg': 'Field required', 'input': None, 'url': 'https://errors.pydantic.dev/2.12/v/missing'}, {'type': 'missing', 'loc': ('body', 'password'), 'msg': 'Field required', 'input': None, 'url': 'https://errors.pydantic.dev/2.12/v/missing'}]
2026-01-30 23:47:20,009 - kings_builder - INFO - RESPONSE: 422 for POST /api/v1/auth/login DURATION: 0.002s
2026-01-30 23:48:00,082 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-30 23:52:52,491 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-30 23:53:02,604 - kings_builder - INFO - Skipped master admin creation during startup due to bcrypt compatibility issues
2026-01-30 23:53:02,604 - kings_builder - INFO - Database tables created and super admin initialized
2026-01-30 23:53:15,038 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-30 23:53:22,786 - kings_builder - INFO - Skipped master admin creation during startup due to bcrypt compatibility issues
2026-01-30 23:53:22,786 - kings_builder - INFO - Database tables created and super admin initialized
2026-01-30 23:54:03,602 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:60378 USER_AGENT: curl/8.17.0
2026-01-30 23:54:05,662 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-30 23:54:05,736 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 30, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 00:10:42,516 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:60730 USER_AGENT: curl/8.17.0
2026-01-31 00:10:44,639 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 00:10:44,661 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 30, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 00:12:39,910 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:60758 USER_AGENT: curl/8.17.0
2026-01-31 00:12:41,605 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 00:12:41,615 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 30, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 00:13:12,408 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-31 00:13:20,107 - kings_builder - INFO - Skipped master admin creation during startup due to bcrypt compatibility issues
2026-01-31 00:13:20,107 - kings_builder - INFO - Database tables created and super admin initialized
2026-01-31 00:14:02,731 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:60792 USER_AGENT: curl/8.17.0
2026-01-31 00:14:04,498 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 00:14:04,511 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 30, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 00:14:53,279 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:60839 USER_AGENT: curl/8.17.0
2026-01-31 00:14:55,317 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 00:14:55,326 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 30, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 00:18:26,063 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-31 00:18:34,553 - kings_builder - INFO - Skipped master admin creation during startup due to bcrypt compatibility issues
2026-01-31 00:18:34,553 - kings_builder - INFO - Database tables created and super admin initialized
2026-01-31 00:19:05,510 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:60923 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 00:19:07,220 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 00:19:07,234 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 30, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 00:21:03,030 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:60952 USER_AGENT: curl/8.17.0
2026-01-31 00:21:04,912 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 00:21:04,927 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 30, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 00:22:25,386 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-31 00:22:33,436 - kings_builder - INFO - Skipped master admin creation during startup due to bcrypt compatibility issues
2026-01-31 00:22:33,437 - kings_builder - INFO - Database tables created and super admin initialized
2026-01-31 00:23:19,592 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:61008 USER_AGENT: curl/8.17.0
2026-01-31 00:23:27,691 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 00:23:27,714 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 30, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 00:23:56,576 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:61025 USER_AGENT: curl/8.17.0
2026-01-31 00:24:09,980 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: Multiple exceptions: [Errno 10053] Connect call failed ('18.215.6.120', 5432), [Errno 10051] Connect call failed ('23.21.74.185', 5432), [Errno 10051] Connect call failed ('98.89.62.209', 5432)
2026-01-31 00:24:10,082 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 30, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 3285, in connect
    return self._connection_cls(self)
           ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 3309, in raw_connection
    return self.pool.connect()
           ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\pool\base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\pool\base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\pool\base.py", line 711, in checkout
    rec = pool._do_get()
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\pool\impl.py", line 306, in _do_get
    return self._create_connection()
           ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\pool\base.py", line 388, in _create_connection
    return _ConnectionRecord(self)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\pool\base.py", line 673, in __init__
    self.__connect()
    ~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\pool\base.py", line 899, in __connect
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\pool\base.py", line 895, in __connect
    self.dbapi_connection = connection = pool._invoke_creator(self)
                                         ~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\create.py", line 661, in connect
    return dialect.connect(*cargs, **cparams)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\default.py", line 630, in connect
    return self.loaded_dbapi.connect(*cargs, **cparams)  # type: ignore[no-any-return]  # NOQA: E501
           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 955, in connect
    await_only(creator_fn(*arg, **kw)),
    ~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\asyncpg\connection.py", line 2443, in connect
    return await connect_utils._connect(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<22 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\asyncpg\connect_utils.py", line 1249, in _connect
    raise last_error or exceptions.TargetServerAttributeNotMatched(
    ...<2 lines>...
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\asyncpg\connect_utils.py", line 1218, in _connect
    conn = await _connect_addr(
           ^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\asyncpg\connect_utils.py", line 1054, in _connect_addr
    return await __connect_addr(params, True, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\asyncpg\connect_utils.py", line 1099, in __connect_addr
    tr, pr = await connector
             ^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\asyncpg\connect_utils.py", line 969, in _create_ssl_connection
    tr, pr = await loop.create_connection(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        host, port)
        ^^^^^^^^^^^
  File "C:\Python314\Lib\asyncio\base_events.py", line 1176, in create_connection
    raise OSError('Multiple exceptions: {}'.format(
        ', '.join(str(exc) for exc in exceptions)))
OSError: Multiple exceptions: [Errno 10053] Connect call failed ('18.215.6.120', 5432), [Errno 10051] Connect call failed ('23.21.74.185', 5432), [Errno 10051] Connect call failed ('98.89.62.209', 5432)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 00:26:42,868 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-31 00:26:50,777 - kings_builder - INFO - Skipped master admin creation during startup due to bcrypt compatibility issues
2026-01-31 00:26:50,777 - kings_builder - INFO - Database tables created and super admin initialized
2026-01-31 00:28:41,782 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:56472 USER_AGENT: curl/8.17.0
2026-01-31 00:28:43,532 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 00:28:43,553 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 30, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 00:30:49,376 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:56551 USER_AGENT: curl/8.17.0
2026-01-31 00:30:51,106 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 00:30:51,126 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 30, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 00:31:35,586 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:56575 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 00:31:35,594 - kings_builder - ERROR - Validation Error: [{'type': 'missing', 'loc': ('body', 'username'), 'msg': 'Field required', 'input': None, 'url': 'https://errors.pydantic.dev/2.12/v/missing'}, {'type': 'missing', 'loc': ('body', 'password'), 'msg': 'Field required', 'input': None, 'url': 'https://errors.pydantic.dev/2.12/v/missing'}]
2026-01-31 00:31:35,597 - kings_builder - INFO - RESPONSE: 422 for POST /api/v1/auth/login DURATION: 0.011s
2026-01-31 00:31:48,126 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-31 00:31:56,435 - kings_builder - INFO - Skipped master admin creation during startup due to bcrypt compatibility issues
2026-01-31 00:31:56,436 - kings_builder - INFO - Database tables created and super admin initialized
2026-01-31 00:33:02,924 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:56602 USER_AGENT: curl/8.17.0
2026-01-31 00:33:04,516 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 00:33:04,528 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 30, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 00:33:28,229 - kings_builder - INFO - REQUEST: GET /docs FROM: 127.0.0.1:56616 USER_AGENT: curl/8.17.0
2026-01-31 00:33:28,247 - kings_builder - INFO - RESPONSE: 200 for GET /docs DURATION: 0.018s
2026-01-31 00:34:13,409 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:56633 USER_AGENT: curl/8.17.0
2026-01-31 00:34:15,668 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 00:34:15,692 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 30, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 00:34:46,660 - kings_builder - INFO - REQUEST: GET /health FROM: 127.0.0.1:56653 USER_AGENT: curl/8.17.0
2026-01-31 00:34:46,678 - kings_builder - INFO - RESPONSE: 200 for GET /health DURATION: 0.022s
2026-01-31 00:36:37,741 - kings_builder - INFO - REQUEST: GET / FROM: 127.0.0.1:56683 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 00:36:37,750 - kings_builder - INFO - RESPONSE: 307 for GET / DURATION: 0.009s
2026-01-31 00:36:37,760 - kings_builder - INFO - REQUEST: GET /docs FROM: 127.0.0.1:56683 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 00:36:37,764 - kings_builder - INFO - RESPONSE: 200 for GET /docs DURATION: 0.004s
2026-01-31 00:36:38,470 - kings_builder - INFO - REQUEST: GET /openapi.json FROM: 127.0.0.1:56683 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 00:36:38,499 - kings_builder - INFO - RESPONSE: 200 for GET /openapi.json DURATION: 0.030s
2026-01-31 00:36:58,950 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:56699 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 00:36:58,960 - kings_builder - ERROR - Validation Error: [{'type': 'missing', 'loc': ('body', 'username'), 'msg': 'Field required', 'input': None, 'url': 'https://errors.pydantic.dev/2.12/v/missing'}, {'type': 'missing', 'loc': ('body', 'password'), 'msg': 'Field required', 'input': None, 'url': 'https://errors.pydantic.dev/2.12/v/missing'}]
2026-01-31 00:36:58,962 - kings_builder - INFO - RESPONSE: 422 for POST /api/v1/auth/login DURATION: 0.012s
2026-01-31 00:37:32,885 - kings_builder - INFO - REQUEST: GET /api/v1/auth/login FROM: 127.0.0.1:56722 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 00:37:32,888 - kings_builder - ERROR - HTTP Exception: 405 - Method Not Allowed
2026-01-31 00:37:32,888 - kings_builder - INFO - RESPONSE: 405 for GET /api/v1/auth/login DURATION: 0.004s
2026-01-31 00:37:32,974 - kings_builder - INFO - REQUEST: GET /favicon.ico FROM: 127.0.0.1:56722 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 00:37:32,978 - kings_builder - ERROR - HTTP Exception: 404 - Not Found
2026-01-31 00:37:32,979 - kings_builder - INFO - RESPONSE: 404 for GET /favicon.ico DURATION: 0.005s
2026-01-31 00:38:26,441 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:56759 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 00:38:26,443 - kings_builder - ERROR - Validation Error: [{'type': 'missing', 'loc': ('body', 'username'), 'msg': 'Field required', 'input': None, 'url': 'https://errors.pydantic.dev/2.12/v/missing'}, {'type': 'missing', 'loc': ('body', 'password'), 'msg': 'Field required', 'input': None, 'url': 'https://errors.pydantic.dev/2.12/v/missing'}]
2026-01-31 00:38:26,444 - kings_builder - INFO - RESPONSE: 422 for POST /api/v1/auth/login DURATION: 0.004s
2026-01-31 00:38:53,951 - kings_builder - INFO - REQUEST: GET /api/v1/users/ FROM: 127.0.0.1:56781 USER_AGENT: curl/8.17.0
2026-01-31 00:38:53,966 - kings_builder - ERROR - HTTP Exception: 403 - Not authenticated
2026-01-31 00:38:53,967 - kings_builder - INFO - RESPONSE: 403 for GET /api/v1/users/ DURATION: 0.015s
2026-01-31 00:39:18,534 - kings_builder - INFO - REQUEST: OPTIONS /api/v1/auth/login FROM: 127.0.0.1:56796 USER_AGENT: curl/8.17.0
2026-01-31 00:39:18,536 - kings_builder - ERROR - HTTP Exception: 405 - Method Not Allowed
2026-01-31 00:39:18,538 - kings_builder - INFO - RESPONSE: 405 for OPTIONS /api/v1/auth/login DURATION: 0.003s
2026-01-31 00:39:41,084 - kings_builder - INFO - REQUEST: GET /openapi.json FROM: 127.0.0.1:56804 USER_AGENT: curl/8.17.0
2026-01-31 00:39:41,089 - kings_builder - INFO - RESPONSE: 200 for GET /openapi.json DURATION: 0.004s
2026-01-31 00:40:34,329 - kings_builder - INFO - REQUEST: GET /api/v1/projects/ FROM: 127.0.0.1:56829 USER_AGENT: curl/8.17.0
2026-01-31 00:40:34,334 - kings_builder - ERROR - HTTP Exception: 403 - Not authenticated
2026-01-31 00:40:34,335 - kings_builder - INFO - RESPONSE: 403 for GET /api/v1/projects/ DURATION: 0.006s
2026-01-31 00:41:03,353 - kings_builder - INFO - REQUEST: GET / FROM: 127.0.0.1:56844 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 00:41:03,354 - kings_builder - INFO - RESPONSE: 307 for GET / DURATION: 0.001s
2026-01-31 00:41:03,363 - kings_builder - INFO - REQUEST: GET /docs FROM: 127.0.0.1:56844 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 00:41:03,364 - kings_builder - INFO - RESPONSE: 200 for GET /docs DURATION: 0.001s
2026-01-31 00:41:03,616 - kings_builder - INFO - REQUEST: GET /openapi.json FROM: 127.0.0.1:56844 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 00:41:03,622 - kings_builder - INFO - RESPONSE: 200 for GET /openapi.json DURATION: 0.006s
2026-01-31 00:41:14,058 - kings_builder - INFO - REQUEST: GET /api/v1/auth/login FROM: 127.0.0.1:56845 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 00:41:14,059 - kings_builder - ERROR - HTTP Exception: 405 - Method Not Allowed
2026-01-31 00:41:14,060 - kings_builder - INFO - RESPONSE: 405 for GET /api/v1/auth/login DURATION: 0.002s
2026-01-31 00:41:16,154 - kings_builder - INFO - REQUEST: GET /api/v1/auth/login FROM: 127.0.0.1:56845 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 00:41:16,155 - kings_builder - ERROR - HTTP Exception: 405 - Method Not Allowed
2026-01-31 00:41:16,158 - kings_builder - INFO - RESPONSE: 405 for GET /api/v1/auth/login DURATION: 0.003s
2026-01-31 00:41:17,340 - kings_builder - INFO - REQUEST: GET /api/v1/auth/login FROM: 127.0.0.1:56845 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 00:41:17,341 - kings_builder - ERROR - HTTP Exception: 405 - Method Not Allowed
2026-01-31 00:41:17,342 - kings_builder - INFO - RESPONSE: 405 for GET /api/v1/auth/login DURATION: 0.002s
2026-01-31 00:41:35,324 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:56858 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 00:41:35,334 - kings_builder - ERROR - Validation Error: [{'type': 'missing', 'loc': ('body', 'username'), 'msg': 'Field required', 'input': None, 'url': 'https://errors.pydantic.dev/2.12/v/missing'}, {'type': 'missing', 'loc': ('body', 'password'), 'msg': 'Field required', 'input': None, 'url': 'https://errors.pydantic.dev/2.12/v/missing'}]
2026-01-31 00:41:35,336 - kings_builder - INFO - RESPONSE: 422 for POST /api/v1/auth/login DURATION: 0.012s
2026-01-31 00:41:41,698 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:56859 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 00:41:41,699 - kings_builder - ERROR - Validation Error: [{'type': 'missing', 'loc': ('body', 'username'), 'msg': 'Field required', 'input': None, 'url': 'https://errors.pydantic.dev/2.12/v/missing'}, {'type': 'missing', 'loc': ('body', 'password'), 'msg': 'Field required', 'input': None, 'url': 'https://errors.pydantic.dev/2.12/v/missing'}]
2026-01-31 00:41:41,700 - kings_builder - INFO - RESPONSE: 422 for POST /api/v1/auth/login DURATION: 0.002s
2026-01-31 00:43:41,984 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:56887 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 00:43:41,986 - kings_builder - ERROR - Validation Error: [{'type': 'missing', 'loc': ('body', 'username'), 'msg': 'Field required', 'input': None, 'url': 'https://errors.pydantic.dev/2.12/v/missing'}, {'type': 'missing', 'loc': ('body', 'password'), 'msg': 'Field required', 'input': None, 'url': 'https://errors.pydantic.dev/2.12/v/missing'}]
2026-01-31 00:43:41,986 - kings_builder - INFO - RESPONSE: 422 for POST /api/v1/auth/login DURATION: 0.002s
2026-01-31 00:43:42,772 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:56887 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 00:43:42,773 - kings_builder - ERROR - Validation Error: [{'type': 'missing', 'loc': ('body', 'username'), 'msg': 'Field required', 'input': None, 'url': 'https://errors.pydantic.dev/2.12/v/missing'}, {'type': 'missing', 'loc': ('body', 'password'), 'msg': 'Field required', 'input': None, 'url': 'https://errors.pydantic.dev/2.12/v/missing'}]
2026-01-31 00:43:42,774 - kings_builder - INFO - RESPONSE: 422 for POST /api/v1/auth/login DURATION: 0.002s
2026-01-31 00:44:52,371 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-31 00:45:11,589 - kings_builder - INFO - Skipped master admin creation during startup due to bcrypt compatibility issues
2026-01-31 00:45:11,589 - kings_builder - INFO - Database tables created and super admin initialized
2026-01-31 00:49:53,300 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:57103 USER_AGENT: curl/8.17.0
2026-01-31 00:49:55,021 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 00:49:55,043 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 30, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 00:51:26,785 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:57147 USER_AGENT: curl/8.17.0
2026-01-31 00:51:28,496 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 00:51:28,526 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 30, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 00:51:55,726 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:57161 USER_AGENT: curl/8.17.0
2026-01-31 00:51:57,559 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 00:51:57,580 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 30, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 00:53:45,105 - kings_builder - INFO - REQUEST: GET /api/v1/auth/signup FROM: 127.0.0.1:57206 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 00:53:45,108 - kings_builder - ERROR - HTTP Exception: 404 - Not Found
2026-01-31 00:53:45,109 - kings_builder - INFO - RESPONSE: 404 for GET /api/v1/auth/signup DURATION: 0.004s
2026-01-31 00:55:07,182 - kings_builder - INFO - REQUEST: GET / FROM: 127.0.0.1:57224 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 00:55:07,183 - kings_builder - INFO - RESPONSE: 307 for GET / DURATION: 0.001s
2026-01-31 00:55:07,622 - kings_builder - INFO - REQUEST: GET /docs FROM: 127.0.0.1:57224 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 00:55:07,628 - kings_builder - INFO - RESPONSE: 200 for GET /docs DURATION: 0.006s
2026-01-31 00:55:08,069 - kings_builder - INFO - REQUEST: GET /openapi.json FROM: 127.0.0.1:57224 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 00:55:08,084 - kings_builder - INFO - RESPONSE: 200 for GET /openapi.json DURATION: 0.015s
2026-01-31 00:55:32,750 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:57233 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 00:55:35,009 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 00:55:35,044 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 30, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 00:56:51,666 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:57245 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 00:56:55,743 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 00:56:55,777 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 30, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 00:59:18,712 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:57271 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 00:59:18,714 - kings_builder - ERROR - Validation Error: [{'type': 'missing', 'loc': ('body', 'username'), 'msg': 'Field required', 'input': None, 'url': 'https://errors.pydantic.dev/2.12/v/missing'}, {'type': 'missing', 'loc': ('body', 'password'), 'msg': 'Field required', 'input': None, 'url': 'https://errors.pydantic.dev/2.12/v/missing'}]
2026-01-31 00:59:18,716 - kings_builder - INFO - RESPONSE: 422 for POST /api/v1/auth/login DURATION: 0.004s
2026-01-31 00:59:56,762 - kings_builder - INFO - REQUEST: POST /api/v1/auth/register FROM: 127.0.0.1:57318 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 00:59:56,763 - kings_builder - ERROR - HTTP Exception: 404 - Not Found
2026-01-31 00:59:56,764 - kings_builder - INFO - RESPONSE: 404 for POST /api/v1/auth/register DURATION: 0.002s
2026-01-31 01:09:12,488 - kings_builder - INFO - REQUEST: GET /api/v1/auth/login FROM: 127.0.0.1:57456 USER_AGENT: curl/8.17.0
2026-01-31 01:09:12,489 - kings_builder - ERROR - HTTP Exception: 405 - Method Not Allowed
2026-01-31 01:09:12,490 - kings_builder - INFO - RESPONSE: 405 for GET /api/v1/auth/login DURATION: 0.002s
2026-01-31 01:10:38,243 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:57490 USER_AGENT: curl/8.17.0
2026-01-31 01:10:41,506 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 01:10:41,527 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 30, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 01:11:06,737 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:57508 USER_AGENT: curl/8.17.0
2026-01-31 01:11:08,451 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 01:11:08,472 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 30, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 01:18:24,952 - kings_builder - INFO - REQUEST: GET /api/v1/auth/login FROM: 127.0.0.1:57670 USER_AGENT: curl/8.17.0
2026-01-31 01:18:24,953 - kings_builder - ERROR - HTTP Exception: 405 - Method Not Allowed
2026-01-31 01:18:24,954 - kings_builder - INFO - RESPONSE: 405 for GET /api/v1/auth/login DURATION: 0.003s
2026-01-31 01:19:21,951 - kings_builder - INFO - REQUEST: GET /openapi.json FROM: 127.0.0.1:57687 USER_AGENT: curl/8.17.0
2026-01-31 01:19:21,961 - kings_builder - INFO - RESPONSE: 200 for GET /openapi.json DURATION: 0.011s
2026-01-31 01:19:59,987 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:57717 USER_AGENT: curl/8.17.0
2026-01-31 01:20:03,100 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 01:20:03,125 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 30, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 01:22:36,841 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-31 01:22:44,727 - kings_builder - INFO - Skipped master admin creation during startup due to bcrypt compatibility issues
2026-01-31 01:22:44,727 - kings_builder - INFO - Database tables created and super admin initialized
2026-01-31 01:23:33,691 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:57807 USER_AGENT: curl/8.17.0
2026-01-31 01:23:35,554 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 01:23:35,592 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 30, in login
    from core.security import verify_password
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    
    
    # Find user by username
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 01:27:45,778 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-31 01:27:55,107 - kings_builder - INFO - Skipped master admin creation during startup due to bcrypt compatibility issues
2026-01-31 01:27:55,108 - kings_builder - INFO - Database tables created and super admin initialized
2026-01-31 01:30:27,912 - kings_builder - INFO - REQUEST: POST /api/v1/dev-auth/dev-login FROM: 127.0.0.1:57946 USER_AGENT: curl/8.17.0
2026-01-31 01:30:27,915 - kings_builder - ERROR - HTTP Exception: 404 - Not Found
2026-01-31 01:30:27,916 - kings_builder - INFO - RESPONSE: 404 for POST /api/v1/dev-auth/dev-login DURATION: 0.007s
2026-01-31 01:31:57,523 - kings_builder - INFO - REQUEST: GET /openapi.json FROM: 127.0.0.1:57971 USER_AGENT: curl/8.17.0
2026-01-31 01:31:57,531 - kings_builder - INFO - RESPONSE: 200 for GET /openapi.json DURATION: 0.008s
2026-01-31 01:32:57,971 - kings_builder - INFO - REQUEST: GET /openapi.json FROM: 127.0.0.1:57991 USER_AGENT: curl/8.17.0
2026-01-31 01:32:57,975 - kings_builder - INFO - RESPONSE: 200 for GET /openapi.json DURATION: 0.004s
2026-01-31 01:33:33,218 - kings_builder - INFO - REQUEST: GET /api/v1/auth FROM: 127.0.0.1:58004 USER_AGENT: curl/8.17.0
2026-01-31 01:33:33,228 - kings_builder - ERROR - HTTP Exception: 404 - Not Found
2026-01-31 01:33:33,228 - kings_builder - INFO - RESPONSE: 404 for GET /api/v1/auth DURATION: 0.011s
2026-01-31 01:35:07,169 - kings_builder - INFO - REQUEST: GET /docs FROM: 127.0.0.1:58022 USER_AGENT: curl/8.17.0
2026-01-31 01:35:07,178 - kings_builder - INFO - RESPONSE: 200 for GET /docs DURATION: 0.009s
2026-01-31 01:35:46,361 - kings_builder - INFO - REQUEST: GET /health FROM: 127.0.0.1:58037 USER_AGENT: curl/8.17.0
2026-01-31 01:35:46,373 - kings_builder - INFO - RESPONSE: 200 for GET /health DURATION: 0.012s
2026-01-31 01:36:11,325 - kings_builder - INFO - REQUEST: GET /api/v1/users/ FROM: 127.0.0.1:58051 USER_AGENT: curl/8.17.0
2026-01-31 01:36:11,331 - kings_builder - ERROR - HTTP Exception: 403 - Not authenticated
2026-01-31 01:36:11,332 - kings_builder - INFO - RESPONSE: 403 for GET /api/v1/users/ DURATION: 0.007s
2026-01-31 01:37:37,910 - kings_builder - INFO - REQUEST: GET /docs FROM: 127.0.0.1:58071 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 01:37:37,922 - kings_builder - INFO - RESPONSE: 200 for GET /docs DURATION: 0.012s
2026-01-31 01:37:38,219 - kings_builder - INFO - REQUEST: GET /openapi.json FROM: 127.0.0.1:58071 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 01:37:38,224 - kings_builder - INFO - RESPONSE: 200 for GET /openapi.json DURATION: 0.005s
2026-01-31 01:38:15,012 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:58072 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 01:38:17,283 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 01:38:17,318 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 30, in login
    from core.security import verify_password
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    
    
    # Find user by username
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 01:38:46,642 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:58097 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 01:38:46,648 - kings_builder - ERROR - Validation Error: [{'type': 'missing', 'loc': ('body', 'username'), 'msg': 'Field required', 'input': None, 'url': 'https://errors.pydantic.dev/2.12/v/missing'}, {'type': 'missing', 'loc': ('body', 'password'), 'msg': 'Field required', 'input': None, 'url': 'https://errors.pydantic.dev/2.12/v/missing'}]
2026-01-31 01:38:46,649 - kings_builder - INFO - RESPONSE: 422 for POST /api/v1/auth/login DURATION: 0.006s
2026-01-31 01:38:55,598 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:58107 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 01:38:55,599 - kings_builder - ERROR - Validation Error: [{'type': 'missing', 'loc': ('body', 'username'), 'msg': 'Field required', 'input': None, 'url': 'https://errors.pydantic.dev/2.12/v/missing'}, {'type': 'missing', 'loc': ('body', 'password'), 'msg': 'Field required', 'input': None, 'url': 'https://errors.pydantic.dev/2.12/v/missing'}]
2026-01-31 01:38:55,600 - kings_builder - INFO - RESPONSE: 422 for POST /api/v1/auth/login DURATION: 0.002s
2026-01-31 01:38:57,592 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:58107 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 01:38:57,593 - kings_builder - ERROR - Validation Error: [{'type': 'missing', 'loc': ('body', 'username'), 'msg': 'Field required', 'input': None, 'url': 'https://errors.pydantic.dev/2.12/v/missing'}, {'type': 'missing', 'loc': ('body', 'password'), 'msg': 'Field required', 'input': None, 'url': 'https://errors.pydantic.dev/2.12/v/missing'}]
2026-01-31 01:38:57,602 - kings_builder - INFO - RESPONSE: 422 for POST /api/v1/auth/login DURATION: 0.010s
2026-01-31 01:38:58,838 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:58107 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 01:38:58,839 - kings_builder - ERROR - Validation Error: [{'type': 'missing', 'loc': ('body', 'username'), 'msg': 'Field required', 'input': None, 'url': 'https://errors.pydantic.dev/2.12/v/missing'}, {'type': 'missing', 'loc': ('body', 'password'), 'msg': 'Field required', 'input': None, 'url': 'https://errors.pydantic.dev/2.12/v/missing'}]
2026-01-31 01:38:58,839 - kings_builder - INFO - RESPONSE: 422 for POST /api/v1/auth/login DURATION: 0.001s
2026-01-31 01:40:37,131 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:58137 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 01:40:37,135 - kings_builder - ERROR - Validation Error: [{'type': 'missing', 'loc': ('body', 'username'), 'msg': 'Field required', 'input': None, 'url': 'https://errors.pydantic.dev/2.12/v/missing'}, {'type': 'missing', 'loc': ('body', 'password'), 'msg': 'Field required', 'input': None, 'url': 'https://errors.pydantic.dev/2.12/v/missing'}]
2026-01-31 01:40:37,137 - kings_builder - INFO - RESPONSE: 422 for POST /api/v1/auth/login DURATION: 0.007s
2026-01-31 15:10:27,764 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-31 15:10:36,594 - kings_builder - INFO - Skipped master admin creation during startup due to bcrypt compatibility issues
2026-01-31 15:10:36,595 - kings_builder - INFO - Database tables created and super admin initialized
2026-01-31 15:24:10,915 - kings_builder - INFO - REQUEST: GET /api/v1 FROM: 127.0.0.1:60422 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 15:24:10,916 - kings_builder - ERROR - HTTP Exception: 404 - Not Found
2026-01-31 15:24:10,917 - kings_builder - INFO - RESPONSE: 404 for GET /api/v1 DURATION: 0.002s
2026-01-31 15:24:10,982 - kings_builder - INFO - REQUEST: GET /favicon.ico FROM: 127.0.0.1:60422 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 15:24:10,983 - kings_builder - ERROR - HTTP Exception: 404 - Not Found
2026-01-31 15:24:10,985 - kings_builder - INFO - RESPONSE: 404 for GET /favicon.ico DURATION: 0.003s
2026-01-31 15:24:17,461 - kings_builder - INFO - REQUEST: GET / FROM: 127.0.0.1:60423 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 15:24:17,464 - kings_builder - INFO - RESPONSE: 307 for GET / DURATION: 0.003s
2026-01-31 15:24:17,486 - kings_builder - INFO - REQUEST: GET /docs FROM: 127.0.0.1:60423 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 15:24:17,488 - kings_builder - INFO - RESPONSE: 200 for GET /docs DURATION: 0.002s
2026-01-31 15:24:18,133 - kings_builder - INFO - REQUEST: GET /openapi.json FROM: 127.0.0.1:60423 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 15:24:18,480 - kings_builder - INFO - RESPONSE: 200 for GET /openapi.json DURATION: 0.348s
2026-01-31 15:39:50,041 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:60539 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 15:39:50,053 - kings_builder - ERROR - Validation Error: [{'type': 'missing', 'loc': ('body', 'username'), 'msg': 'Field required', 'input': None, 'url': 'https://errors.pydantic.dev/2.12/v/missing'}, {'type': 'missing', 'loc': ('body', 'password'), 'msg': 'Field required', 'input': None, 'url': 'https://errors.pydantic.dev/2.12/v/missing'}]
2026-01-31 15:39:50,054 - kings_builder - INFO - RESPONSE: 422 for POST /api/v1/auth/login DURATION: 0.013s
2026-01-31 15:40:38,255 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:60540 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 15:40:38,257 - kings_builder - ERROR - Validation Error: [{'type': 'missing', 'loc': ('body', 'username'), 'msg': 'Field required', 'input': None, 'url': 'https://errors.pydantic.dev/2.12/v/missing'}, {'type': 'missing', 'loc': ('body', 'password'), 'msg': 'Field required', 'input': None, 'url': 'https://errors.pydantic.dev/2.12/v/missing'}]
2026-01-31 15:40:38,257 - kings_builder - INFO - RESPONSE: 422 for POST /api/v1/auth/login DURATION: 0.002s
2026-01-31 15:40:46,455 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:60569 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 15:40:46,456 - kings_builder - ERROR - Validation Error: [{'type': 'missing', 'loc': ('body', 'username'), 'msg': 'Field required', 'input': None, 'url': 'https://errors.pydantic.dev/2.12/v/missing'}, {'type': 'missing', 'loc': ('body', 'password'), 'msg': 'Field required', 'input': None, 'url': 'https://errors.pydantic.dev/2.12/v/missing'}]
2026-01-31 15:40:46,457 - kings_builder - INFO - RESPONSE: 422 for POST /api/v1/auth/login DURATION: 0.001s
2026-01-31 15:44:45,065 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:60640 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 15:44:45,067 - kings_builder - ERROR - Validation Error: [{'type': 'missing', 'loc': ('body', 'username'), 'msg': 'Field required', 'input': None, 'url': 'https://errors.pydantic.dev/2.12/v/missing'}, {'type': 'missing', 'loc': ('body', 'password'), 'msg': 'Field required', 'input': None, 'url': 'https://errors.pydantic.dev/2.12/v/missing'}]
2026-01-31 15:44:45,068 - kings_builder - INFO - RESPONSE: 422 for POST /api/v1/auth/login DURATION: 0.002s
2026-01-31 15:44:46,149 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:60640 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 15:44:46,152 - kings_builder - ERROR - Validation Error: [{'type': 'missing', 'loc': ('body', 'username'), 'msg': 'Field required', 'input': None, 'url': 'https://errors.pydantic.dev/2.12/v/missing'}, {'type': 'missing', 'loc': ('body', 'password'), 'msg': 'Field required', 'input': None, 'url': 'https://errors.pydantic.dev/2.12/v/missing'}]
2026-01-31 15:44:46,153 - kings_builder - INFO - RESPONSE: 422 for POST /api/v1/auth/login DURATION: 0.003s
2026-01-31 17:00:50,928 - kings_builder - INFO - REQUEST: GET /docs FROM: 127.0.0.1:54949 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 17:00:50,930 - kings_builder - INFO - RESPONSE: 200 for GET /docs DURATION: 0.001s
2026-01-31 17:00:51,165 - kings_builder - INFO - REQUEST: GET /openapi.json FROM: 127.0.0.1:54949 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 17:00:51,170 - kings_builder - INFO - RESPONSE: 200 for GET /openapi.json DURATION: 0.005s
2026-01-31 17:01:10,183 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:54957 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 17:01:13,004 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:54958 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 17:01:15,740 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 17:01:15,749 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 17:01:15,818 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 17:01:15,869 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\relationships.py", line 2434, in _determine_joins
    self.primaryjoin = join_condition(
                       ~~~~~~~~~~~~~~^
        self.parent_persist_selectable,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        consider_as_foreign_keys=consider_as_foreign_keys,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\util.py", line 121, in join_condition
    return Join._join_condition(
           ~~~~~~~~~~~~~~~~~~~~^
        a,
        ^^
    ...<2 lines>...
        consider_as_foreign_keys=consider_as_foreign_keys,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\selectable.py", line 1441, in _join_condition
    cls._joincond_trim_constraints(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        a, b, constraints, consider_as_foreign_keys
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\selectable.py", line 1586, in _joincond_trim_constraints
    raise exc.AmbiguousForeignKeysError(
    ...<5 lines>...
    )
sqlalchemy.exc.AmbiguousForeignKeysError: Can't determine join between 'users' and 'builders'; tables have more than one foreign key constraint relationship between them. Please specify the 'onclause' of this join explicitly.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4268, in _do_configure_registries
    mapper._post_configure_properties()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2427, in _post_configure_properties
    prop.init()
    ~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\interfaces.py", line 595, in init
    self.do_init()
    ~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\relationships.py", line 1657, in do_init
    self._setup_join_conditions()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\relationships.py", line 1895, in _setup_join_conditions
    self._join_condition = jc = JoinCondition(
                                ~~~~~~~~~~~~~^
        parent_persist_selectable=self.parent.persist_selectable,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<14 lines>...
        can_be_synced_fn=self._columns_are_mapped,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\relationships.py", line 2321, in __init__
    self._determine_joins()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\relationships.py", line 2478, in _determine_joins
    raise sa_exc.AmbiguousForeignKeysError(
    ...<7 lines>...
    ) from afe
sqlalchemy.exc.AmbiguousForeignKeysError: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 17:01:18,572 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:54963 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 17:01:20,160 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 17:01:20,190 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 17:01:20,207 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:54965 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 17:01:21,775 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:54968 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 17:01:21,794 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 17:01:21,815 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 17:01:22,886 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:54971 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 17:01:23,287 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:54974 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 17:01:23,415 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 17:01:23,427 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 17:01:24,518 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 17:01:24,538 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 17:01:24,898 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 17:01:24,914 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 17:07:38,849 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:55057 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 17:07:41,380 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:55058 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 17:07:42,094 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 17:07:42,124 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 17:07:43,027 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 17:07:43,062 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 17:08:14,767 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:55066 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 17:08:16,466 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 17:08:16,491 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 17:27:23,681 - kings_builder - INFO - REQUEST: GET /api/v1 FROM: 127.0.0.1:55511 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 17:27:23,702 - kings_builder - ERROR - HTTP Exception: 404 - Not Found
2026-01-31 17:27:23,703 - kings_builder - INFO - RESPONSE: 404 for GET /api/v1 DURATION: 0.022s
2026-01-31 17:27:43,259 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:55527 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 17:27:45,689 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 17:27:45,741 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 17:27:48,971 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:55535 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 17:27:50,809 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 17:27:50,828 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 17:27:53,661 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:55537 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 17:27:54,006 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:55540 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 17:27:55,033 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:55545 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 17:27:55,444 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 17:27:55,472 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 17:27:55,817 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 17:27:55,838 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 17:27:56,790 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:55549 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 17:27:56,798 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:55551 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 17:27:56,837 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 17:27:56,854 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 17:27:58,452 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 17:27:58,477 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 17:27:58,531 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 17:27:58,556 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 17:34:38,759 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:55681 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 17:34:42,997 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 17:34:43,021 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 17:34:45,200 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:55682 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 17:34:46,888 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 17:34:46,906 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 17:34:49,087 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:55687 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 17:34:49,761 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:55689 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 17:34:50,776 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 17:34:50,794 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 17:34:51,674 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 17:34:51,712 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 17:34:52,878 - kings_builder - INFO - REQUEST: GET /docs FROM: 127.0.0.1:55694 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 17:34:52,885 - kings_builder - INFO - RESPONSE: 200 for GET /docs DURATION: 0.007s
2026-01-31 17:34:53,834 - kings_builder - INFO - REQUEST: GET /openapi.json FROM: 127.0.0.1:55694 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 17:34:53,884 - kings_builder - INFO - RESPONSE: 200 for GET /openapi.json DURATION: 0.050s
2026-01-31 17:35:02,092 - kings_builder - INFO - REQUEST: GET /docs FROM: 127.0.0.1:55704 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 17:35:02,093 - kings_builder - INFO - RESPONSE: 200 for GET /docs DURATION: 0.001s
2026-01-31 17:35:02,333 - kings_builder - INFO - REQUEST: GET /openapi.json FROM: 127.0.0.1:55704 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 17:35:02,341 - kings_builder - INFO - RESPONSE: 200 for GET /openapi.json DURATION: 0.008s
2026-01-31 17:35:18,682 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:55709 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 17:35:20,003 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:55711 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 17:35:20,328 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 17:35:20,354 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 17:35:21,452 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:55715 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 17:35:21,479 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:55716 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 17:35:21,643 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 17:35:21,660 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 17:35:23,143 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 17:35:23,163 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 17:35:23,245 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 17:35:23,262 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 17:35:36,551 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:55731 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 17:35:38,253 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 17:35:38,275 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 18:08:55,835 - kings_builder - INFO - REQUEST: GET / FROM: 127.0.0.1:62059 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 18:08:55,845 - kings_builder - INFO - RESPONSE: 307 for GET / DURATION: 0.010s
2026-01-31 18:08:55,852 - kings_builder - INFO - REQUEST: GET /docs FROM: 127.0.0.1:62059 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 18:08:55,854 - kings_builder - INFO - RESPONSE: 200 for GET /docs DURATION: 0.002s
2026-01-31 18:08:56,059 - kings_builder - INFO - REQUEST: GET /openapi.json FROM: 127.0.0.1:62059 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 18:08:56,069 - kings_builder - INFO - RESPONSE: 200 for GET /openapi.json DURATION: 0.010s
2026-01-31 18:09:58,510 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:62096 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 18:10:01,556 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 18:10:01,581 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 18:10:02,110 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:62097 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 18:10:03,726 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 18:10:03,782 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 18:10:28,614 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:62112 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 18:10:30,156 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 18:10:30,178 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 18:10:32,204 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:62114 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 18:10:33,938 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 18:10:33,972 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 18:10:51,693 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:62119 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 18:10:53,203 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 18:10:53,234 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 18:10:54,227 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:62121 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 18:10:55,877 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 18:10:55,916 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 18:10:56,033 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:62127 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 18:10:57,732 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 18:10:57,749 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 18:11:22,479 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:62129 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 18:11:24,026 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 18:11:24,052 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 18:18:24,053 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:62193 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 18:18:26,580 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 18:18:26,611 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 18:18:36,301 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:62201 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 18:18:37,997 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 18:18:38,016 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 18:18:53,223 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:62203 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 18:18:54,891 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 18:18:54,913 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 18:18:54,954 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:62207 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 18:18:56,489 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:62209 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 18:18:56,713 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 18:18:56,738 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 18:18:58,318 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 18:18:58,332 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 18:20:08,335 - kings_builder - INFO - REQUEST: GET /docs FROM: 127.0.0.1:62229 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 18:20:08,347 - kings_builder - INFO - RESPONSE: 200 for GET /docs DURATION: 0.012s
2026-01-31 18:20:08,931 - kings_builder - INFO - REQUEST: GET /openapi.json FROM: 127.0.0.1:62229 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 18:20:08,943 - kings_builder - INFO - RESPONSE: 200 for GET /openapi.json DURATION: 0.012s
2026-01-31 18:20:50,371 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:62238 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 18:20:52,182 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 18:20:52,223 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 18:32:47,464 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:62530 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 18:32:48,281 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:62531 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 18:32:49,462 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:62535 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 18:32:49,911 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 18:32:49,911 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 18:32:49,932 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 18:32:49,974 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 18:32:51,025 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 18:32:51,039 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 18:32:52,495 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:62540 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 18:32:53,162 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:62542 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 18:32:54,089 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 18:32:54,102 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 18:32:54,221 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:62546 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 18:32:54,969 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 18:32:54,999 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 18:32:55,885 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 18:32:55,908 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 18:32:57,428 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:62548 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 18:32:59,449 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 18:32:59,470 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 18:34:08,918 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000']
2026-01-31 18:34:08,918 - kings_builder - INFO - Registering authentication routes...
2026-01-31 18:34:08,922 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-01-31 18:34:09,078 - kings_builder - INFO - Registered routes:
2026-01-31 18:34:09,078 - kings_builder - INFO -   {'GET', 'HEAD'} /openapi.json
2026-01-31 18:34:09,078 - kings_builder - INFO -   {'GET', 'HEAD'} /docs
2026-01-31 18:34:09,078 - kings_builder - INFO -   {'GET', 'HEAD'} /docs/oauth2-redirect
2026-01-31 18:34:09,078 - kings_builder - INFO -   {'GET', 'HEAD'} /redoc
2026-01-31 18:34:09,079 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-01-31 18:34:09,079 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-01-31 18:34:09,079 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-01-31 18:34:09,079 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-01-31 18:34:09,079 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-01-31 18:34:09,079 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-01-31 18:34:09,080 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-01-31 18:34:09,080 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-01-31 18:34:09,080 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-01-31 18:34:09,080 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-01-31 18:34:09,080 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-01-31 18:34:09,080 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-01-31 18:34:09,081 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-01-31 18:34:09,081 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-01-31 18:34:09,081 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-01-31 18:34:09,081 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-01-31 18:34:09,081 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-01-31 18:34:09,081 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-01-31 18:34:09,082 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-01-31 18:34:09,082 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-01-31 18:34:09,082 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-01-31 18:34:09,082 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-01-31 18:34:09,082 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-01-31 18:34:09,082 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-01-31 18:34:09,083 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-01-31 18:34:09,083 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-01-31 18:34:09,083 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-01-31 18:34:09,083 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-01-31 18:34:09,083 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-01-31 18:34:09,083 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-01-31 18:34:09,083 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-01-31 18:34:09,083 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-01-31 18:34:09,083 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-01-31 18:34:09,083 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-01-31 18:34:09,084 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-01-31 18:34:09,084 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-01-31 18:34:09,084 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-01-31 18:34:09,084 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-01-31 18:34:09,084 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-01-31 18:34:09,084 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-01-31 18:34:09,084 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-01-31 18:34:09,084 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-01-31 18:34:09,084 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-01-31 18:34:09,084 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-01-31 18:34:09,084 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-01-31 18:34:09,085 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-01-31 18:34:09,085 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-01-31 18:34:09,085 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-01-31 18:34:09,085 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-01-31 18:34:09,085 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-01-31 18:34:09,085 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-01-31 18:34:09,085 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-01-31 18:34:09,085 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-01-31 18:34:09,086 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-01-31 18:34:09,086 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-01-31 18:34:09,086 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-01-31 18:34:09,087 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-01-31 18:34:09,087 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-01-31 18:34:09,087 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-01-31 18:34:09,087 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-01-31 18:34:09,087 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-01-31 18:34:09,087 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-01-31 18:34:09,087 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-01-31 18:34:43,593 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:62593 USER_AGENT: python-requests/2.31.0
2026-01-31 18:34:45,220 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 18:34:45,243 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 18:38:10,265 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000']
2026-01-31 18:38:10,266 - kings_builder - INFO - Registering authentication routes...
2026-01-31 18:38:10,269 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-01-31 18:38:10,419 - kings_builder - INFO - Registered routes:
2026-01-31 18:38:10,419 - kings_builder - INFO -   {'HEAD', 'GET'} /openapi.json
2026-01-31 18:38:10,419 - kings_builder - INFO -   {'HEAD', 'GET'} /docs
2026-01-31 18:38:10,420 - kings_builder - INFO -   {'HEAD', 'GET'} /docs/oauth2-redirect
2026-01-31 18:38:10,420 - kings_builder - INFO -   {'HEAD', 'GET'} /redoc
2026-01-31 18:38:10,420 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-01-31 18:38:10,420 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-01-31 18:38:10,420 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-01-31 18:38:10,420 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-01-31 18:38:10,420 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-01-31 18:38:10,420 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-01-31 18:38:10,420 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-01-31 18:38:10,420 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-01-31 18:38:10,421 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-01-31 18:38:10,421 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-01-31 18:38:10,421 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-01-31 18:38:10,421 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-01-31 18:38:10,421 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-01-31 18:38:10,421 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-01-31 18:38:10,421 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-01-31 18:38:10,421 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-01-31 18:38:10,421 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-01-31 18:38:10,421 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-01-31 18:38:10,421 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-01-31 18:38:10,422 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-01-31 18:38:10,422 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-01-31 18:38:10,422 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-01-31 18:38:10,422 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-01-31 18:38:10,422 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-01-31 18:38:10,422 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-01-31 18:38:10,422 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-01-31 18:38:10,422 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-01-31 18:38:10,422 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-01-31 18:38:10,422 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-01-31 18:38:10,422 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-01-31 18:38:10,422 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-01-31 18:38:10,423 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-01-31 18:38:10,423 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-01-31 18:38:10,423 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-01-31 18:38:10,423 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-01-31 18:38:10,423 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-01-31 18:38:10,423 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-01-31 18:38:10,423 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-01-31 18:38:10,424 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-01-31 18:38:10,426 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-01-31 18:38:10,426 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-01-31 18:38:10,426 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-01-31 18:38:10,427 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-01-31 18:38:10,427 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-01-31 18:38:10,427 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-01-31 18:38:10,427 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-01-31 18:38:10,427 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-01-31 18:38:10,428 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-01-31 18:38:10,428 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-01-31 18:38:10,428 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-01-31 18:38:10,428 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-01-31 18:38:10,428 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-01-31 18:38:10,428 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-01-31 18:38:10,428 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-01-31 18:38:10,428 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-01-31 18:38:10,428 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-01-31 18:38:10,428 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-01-31 18:38:10,428 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-01-31 18:38:10,429 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-01-31 18:38:10,429 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-01-31 18:38:10,429 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-01-31 18:38:10,429 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-01-31 18:38:10,429 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-01-31 18:38:10,430 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-31 18:39:18,332 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000']
2026-01-31 18:39:18,333 - kings_builder - INFO - Registering authentication routes...
2026-01-31 18:39:18,338 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-01-31 18:39:18,491 - kings_builder - INFO - Registered routes:
2026-01-31 18:39:18,491 - kings_builder - INFO -   {'GET', 'HEAD'} /openapi.json
2026-01-31 18:39:18,491 - kings_builder - INFO -   {'GET', 'HEAD'} /docs
2026-01-31 18:39:18,492 - kings_builder - INFO -   {'GET', 'HEAD'} /docs/oauth2-redirect
2026-01-31 18:39:18,492 - kings_builder - INFO -   {'GET', 'HEAD'} /redoc
2026-01-31 18:39:18,492 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-01-31 18:39:18,492 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-01-31 18:39:18,492 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-01-31 18:39:18,492 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-01-31 18:39:18,492 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-01-31 18:39:18,492 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-01-31 18:39:18,492 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-01-31 18:39:18,492 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-01-31 18:39:18,493 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-01-31 18:39:18,493 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-01-31 18:39:18,493 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-01-31 18:39:18,493 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-01-31 18:39:18,493 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-01-31 18:39:18,494 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-01-31 18:39:18,494 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-01-31 18:39:18,494 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-01-31 18:39:18,495 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-01-31 18:39:18,495 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-01-31 18:39:18,495 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-01-31 18:39:18,495 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-01-31 18:39:18,496 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-01-31 18:39:18,496 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-01-31 18:39:18,496 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-01-31 18:39:18,497 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-01-31 18:39:18,497 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-01-31 18:39:18,497 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-01-31 18:39:18,498 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-01-31 18:39:18,498 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-01-31 18:39:18,498 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-01-31 18:39:18,498 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-01-31 18:39:18,498 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-01-31 18:39:18,498 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-01-31 18:39:18,499 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-01-31 18:39:18,499 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-01-31 18:39:18,499 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-01-31 18:39:18,499 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-01-31 18:39:18,499 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-01-31 18:39:18,499 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-01-31 18:39:18,499 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-01-31 18:39:18,499 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-01-31 18:39:18,500 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-01-31 18:39:18,500 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-01-31 18:39:18,500 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-01-31 18:39:18,500 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-01-31 18:39:18,500 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-01-31 18:39:18,500 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-01-31 18:39:18,500 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-01-31 18:39:18,500 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-01-31 18:39:18,500 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-01-31 18:39:18,500 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-01-31 18:39:18,501 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-01-31 18:39:18,501 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-01-31 18:39:18,501 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-01-31 18:39:18,501 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-01-31 18:39:18,501 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-01-31 18:39:18,501 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-01-31 18:39:18,501 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-01-31 18:39:18,501 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-01-31 18:39:18,501 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-01-31 18:39:18,501 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-01-31 18:39:18,501 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-01-31 18:39:18,502 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-01-31 18:39:18,502 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-01-31 18:39:18,503 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-31 18:39:19,015 - kings_builder - INFO - Checking for master admin user...
2026-01-31 18:39:52,212 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000']
2026-01-31 18:39:52,213 - kings_builder - INFO - Registering authentication routes...
2026-01-31 18:39:52,217 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-01-31 18:39:52,226 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000']
2026-01-31 18:39:52,226 - kings_builder - INFO - Registering authentication routes...
2026-01-31 18:39:52,229 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-01-31 18:39:52,365 - kings_builder - INFO - Registered routes:
2026-01-31 18:39:52,365 - kings_builder - INFO -   {'GET', 'HEAD'} /openapi.json
2026-01-31 18:39:52,365 - kings_builder - INFO -   {'GET', 'HEAD'} /docs
2026-01-31 18:39:52,365 - kings_builder - INFO -   {'GET', 'HEAD'} /docs/oauth2-redirect
2026-01-31 18:39:52,365 - kings_builder - INFO -   {'GET', 'HEAD'} /redoc
2026-01-31 18:39:52,365 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-01-31 18:39:52,365 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-01-31 18:39:52,365 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-01-31 18:39:52,365 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-01-31 18:39:52,365 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-01-31 18:39:52,366 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-01-31 18:39:52,366 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-01-31 18:39:52,366 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-01-31 18:39:52,366 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-01-31 18:39:52,366 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-01-31 18:39:52,366 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-01-31 18:39:52,366 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-01-31 18:39:52,366 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-01-31 18:39:52,366 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-01-31 18:39:52,366 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-01-31 18:39:52,366 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-01-31 18:39:52,366 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-01-31 18:39:52,366 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-01-31 18:39:52,366 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-01-31 18:39:52,367 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-01-31 18:39:52,367 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-01-31 18:39:52,367 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-01-31 18:39:52,367 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-01-31 18:39:52,367 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-01-31 18:39:52,367 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-01-31 18:39:52,367 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-01-31 18:39:52,367 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-01-31 18:39:52,367 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-01-31 18:39:52,367 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-01-31 18:39:52,367 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-01-31 18:39:52,367 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-01-31 18:39:52,367 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-01-31 18:39:52,367 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-01-31 18:39:52,368 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-01-31 18:39:52,368 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-01-31 18:39:52,368 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-01-31 18:39:52,368 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-01-31 18:39:52,368 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-01-31 18:39:52,368 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-01-31 18:39:52,368 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-01-31 18:39:52,368 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-01-31 18:39:52,368 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-01-31 18:39:52,368 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-01-31 18:39:52,368 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-01-31 18:39:52,368 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-01-31 18:39:52,368 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-01-31 18:39:52,368 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-01-31 18:39:52,369 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-01-31 18:39:52,369 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-01-31 18:39:52,369 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-01-31 18:39:52,369 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-01-31 18:39:52,369 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-01-31 18:39:52,369 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-01-31 18:39:52,369 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-01-31 18:39:52,369 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-01-31 18:39:52,371 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-01-31 18:39:52,371 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-01-31 18:39:52,371 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-01-31 18:39:52,372 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-01-31 18:39:52,372 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-01-31 18:39:52,372 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-01-31 18:39:52,372 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-01-31 18:39:52,372 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-01-31 18:39:52,373 - kings_builder - INFO - Registered routes:
2026-01-31 18:39:52,373 - kings_builder - INFO -   {'HEAD', 'GET'} /openapi.json
2026-01-31 18:39:52,373 - kings_builder - INFO -   {'HEAD', 'GET'} /docs
2026-01-31 18:39:52,374 - kings_builder - INFO -   {'HEAD', 'GET'} /docs/oauth2-redirect
2026-01-31 18:39:52,374 - kings_builder - INFO -   {'HEAD', 'GET'} /redoc
2026-01-31 18:39:52,374 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-01-31 18:39:52,374 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-01-31 18:39:52,374 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-01-31 18:39:52,374 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-01-31 18:39:52,374 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-01-31 18:39:52,374 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-01-31 18:39:52,374 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-01-31 18:39:52,374 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-31 18:39:52,374 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-01-31 18:39:52,374 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-01-31 18:39:52,374 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-01-31 18:39:52,374 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-01-31 18:39:52,374 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-01-31 18:39:52,375 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-01-31 18:39:52,375 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-01-31 18:39:52,375 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-01-31 18:39:52,375 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-01-31 18:39:52,375 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-01-31 18:39:52,375 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-01-31 18:39:52,375 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-01-31 18:39:52,375 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-01-31 18:39:52,375 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-01-31 18:39:52,383 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-01-31 18:39:52,383 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-01-31 18:39:52,384 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-01-31 18:39:52,384 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-01-31 18:39:52,384 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-01-31 18:39:52,384 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-01-31 18:39:52,384 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-01-31 18:39:52,384 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-01-31 18:39:52,384 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-01-31 18:39:52,385 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-01-31 18:39:52,385 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-01-31 18:39:52,385 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-01-31 18:39:52,385 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-01-31 18:39:52,385 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-01-31 18:39:52,385 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-01-31 18:39:52,385 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-01-31 18:39:52,385 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-01-31 18:39:52,385 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-01-31 18:39:52,385 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-01-31 18:39:52,385 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-01-31 18:39:52,385 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-01-31 18:39:52,385 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-01-31 18:39:52,386 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-01-31 18:39:52,386 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-01-31 18:39:52,386 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-01-31 18:39:52,386 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-01-31 18:39:52,386 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-01-31 18:39:52,386 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-01-31 18:39:52,387 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-01-31 18:39:52,387 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-01-31 18:39:52,387 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-01-31 18:39:52,387 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-01-31 18:39:52,388 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-01-31 18:39:52,388 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-01-31 18:39:52,388 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-01-31 18:39:52,388 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-01-31 18:39:52,389 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-01-31 18:39:52,389 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-01-31 18:39:52,389 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-01-31 18:39:52,390 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-01-31 18:39:52,390 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-01-31 18:39:52,390 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-01-31 18:39:52,392 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-31 18:39:52,441 - kings_builder - INFO - Checking for master admin user...
2026-01-31 18:39:52,461 - kings_builder - INFO - Checking for master admin user...
2026-01-31 18:40:07,693 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000']
2026-01-31 18:40:07,693 - kings_builder - INFO - Registering authentication routes...
2026-01-31 18:40:07,698 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-01-31 18:40:07,842 - kings_builder - INFO - Registered routes:
2026-01-31 18:40:07,842 - kings_builder - INFO -   {'GET', 'HEAD'} /openapi.json
2026-01-31 18:40:07,842 - kings_builder - INFO -   {'GET', 'HEAD'} /docs
2026-01-31 18:40:07,842 - kings_builder - INFO -   {'GET', 'HEAD'} /docs/oauth2-redirect
2026-01-31 18:40:07,843 - kings_builder - INFO -   {'GET', 'HEAD'} /redoc
2026-01-31 18:40:07,843 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-01-31 18:40:07,843 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-01-31 18:40:07,843 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-01-31 18:40:07,843 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-01-31 18:40:07,843 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-01-31 18:40:07,843 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-01-31 18:40:07,843 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-01-31 18:40:07,843 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-01-31 18:40:07,843 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-01-31 18:40:07,844 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-01-31 18:40:07,844 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-01-31 18:40:07,844 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-01-31 18:40:07,845 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-01-31 18:40:07,845 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-01-31 18:40:07,845 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-01-31 18:40:07,845 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-01-31 18:40:07,845 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-01-31 18:40:07,845 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-01-31 18:40:07,846 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-01-31 18:40:07,846 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-01-31 18:40:07,846 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-01-31 18:40:07,846 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-01-31 18:40:07,846 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-01-31 18:40:07,846 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-01-31 18:40:07,846 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-01-31 18:40:07,846 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-01-31 18:40:07,846 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-01-31 18:40:07,846 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-01-31 18:40:07,846 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-01-31 18:40:07,847 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-01-31 18:40:07,847 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-01-31 18:40:07,847 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-01-31 18:40:07,847 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-01-31 18:40:07,847 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-01-31 18:40:07,847 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-01-31 18:40:07,847 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-01-31 18:40:07,847 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-01-31 18:40:07,847 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-01-31 18:40:07,847 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-01-31 18:40:07,847 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-01-31 18:40:07,848 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-01-31 18:40:07,848 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-01-31 18:40:07,848 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-01-31 18:40:07,848 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-01-31 18:40:07,848 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-01-31 18:40:07,848 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-01-31 18:40:07,848 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-01-31 18:40:07,848 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-01-31 18:40:07,848 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-01-31 18:40:07,848 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-01-31 18:40:07,848 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-01-31 18:40:07,848 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-01-31 18:40:07,849 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-01-31 18:40:07,849 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-01-31 18:40:07,849 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-01-31 18:40:07,849 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-01-31 18:40:07,849 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-01-31 18:40:07,849 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-01-31 18:40:07,849 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-01-31 18:40:07,850 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-01-31 18:40:07,850 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-01-31 18:40:07,851 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-01-31 18:40:07,851 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-01-31 18:40:07,855 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-31 18:40:07,922 - kings_builder - INFO - Checking for master admin user...
2026-01-31 18:40:43,606 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000']
2026-01-31 18:40:43,606 - kings_builder - INFO - Registering authentication routes...
2026-01-31 18:40:43,612 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-01-31 18:40:43,645 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000']
2026-01-31 18:40:43,645 - kings_builder - INFO - Registering authentication routes...
2026-01-31 18:40:43,651 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-01-31 18:40:43,803 - kings_builder - INFO - Registered routes:
2026-01-31 18:40:43,804 - kings_builder - INFO -   {'GET', 'HEAD'} /openapi.json
2026-01-31 18:40:43,804 - kings_builder - INFO -   {'GET', 'HEAD'} /docs
2026-01-31 18:40:43,804 - kings_builder - INFO -   {'GET', 'HEAD'} /docs/oauth2-redirect
2026-01-31 18:40:43,804 - kings_builder - INFO -   {'GET', 'HEAD'} /redoc
2026-01-31 18:40:43,804 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-01-31 18:40:43,805 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-01-31 18:40:43,805 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-01-31 18:40:43,805 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-01-31 18:40:43,805 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-01-31 18:40:43,805 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-01-31 18:40:43,805 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-01-31 18:40:43,805 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-01-31 18:40:43,805 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-01-31 18:40:43,806 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-01-31 18:40:43,806 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-01-31 18:40:43,806 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-01-31 18:40:43,806 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-01-31 18:40:43,806 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-01-31 18:40:43,806 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-01-31 18:40:43,806 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-01-31 18:40:43,807 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-01-31 18:40:43,807 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-01-31 18:40:43,807 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-01-31 18:40:43,807 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-01-31 18:40:43,807 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-01-31 18:40:43,807 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-01-31 18:40:43,807 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-01-31 18:40:43,808 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-01-31 18:40:43,808 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-01-31 18:40:43,808 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-01-31 18:40:43,808 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-01-31 18:40:43,809 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-01-31 18:40:43,810 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-01-31 18:40:43,810 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-01-31 18:40:43,811 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-01-31 18:40:43,811 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-01-31 18:40:43,811 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-01-31 18:40:43,811 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-01-31 18:40:43,812 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-01-31 18:40:43,812 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-01-31 18:40:43,812 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-01-31 18:40:43,812 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-01-31 18:40:43,813 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-01-31 18:40:43,813 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-01-31 18:40:43,813 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-01-31 18:40:43,813 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-01-31 18:40:43,813 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-01-31 18:40:43,813 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-01-31 18:40:43,813 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-01-31 18:40:43,813 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-01-31 18:40:43,814 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-01-31 18:40:43,814 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-01-31 18:40:43,814 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-01-31 18:40:43,814 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-01-31 18:40:43,814 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-01-31 18:40:43,814 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-01-31 18:40:43,815 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-01-31 18:40:43,815 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-01-31 18:40:43,815 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-01-31 18:40:43,815 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-01-31 18:40:43,815 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-01-31 18:40:43,815 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-01-31 18:40:43,815 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-01-31 18:40:43,816 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-01-31 18:40:43,816 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-01-31 18:40:43,816 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-01-31 18:40:43,816 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-01-31 18:40:43,818 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-31 18:40:43,832 - kings_builder - INFO - Registered routes:
2026-01-31 18:40:43,832 - kings_builder - INFO -   {'GET', 'HEAD'} /openapi.json
2026-01-31 18:40:43,832 - kings_builder - INFO -   {'GET', 'HEAD'} /docs
2026-01-31 18:40:43,832 - kings_builder - INFO -   {'GET', 'HEAD'} /docs/oauth2-redirect
2026-01-31 18:40:43,832 - kings_builder - INFO -   {'GET', 'HEAD'} /redoc
2026-01-31 18:40:43,832 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-01-31 18:40:43,833 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-01-31 18:40:43,833 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-01-31 18:40:43,833 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-01-31 18:40:43,833 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-01-31 18:40:43,834 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-01-31 18:40:43,835 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-01-31 18:40:43,835 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-01-31 18:40:43,836 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-01-31 18:40:43,837 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-01-31 18:40:43,837 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-01-31 18:40:43,838 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-01-31 18:40:43,838 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-01-31 18:40:43,838 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-01-31 18:40:43,838 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-01-31 18:40:43,838 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-01-31 18:40:43,839 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-01-31 18:40:43,839 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-01-31 18:40:43,839 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-01-31 18:40:43,839 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-01-31 18:40:43,839 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-01-31 18:40:43,839 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-01-31 18:40:43,839 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-01-31 18:40:43,839 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-01-31 18:40:43,839 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-01-31 18:40:43,840 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-01-31 18:40:43,840 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-01-31 18:40:43,840 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-01-31 18:40:43,840 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-01-31 18:40:43,840 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-01-31 18:40:43,840 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-01-31 18:40:43,840 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-01-31 18:40:43,840 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-01-31 18:40:43,840 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-01-31 18:40:43,841 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-01-31 18:40:43,841 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-01-31 18:40:43,841 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-01-31 18:40:43,841 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-01-31 18:40:43,841 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-01-31 18:40:43,841 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-01-31 18:40:43,841 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-01-31 18:40:43,841 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-01-31 18:40:43,841 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-01-31 18:40:43,842 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-01-31 18:40:43,842 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-01-31 18:40:43,842 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-01-31 18:40:43,846 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-01-31 18:40:43,846 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-01-31 18:40:43,847 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-01-31 18:40:43,847 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-01-31 18:40:43,847 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-01-31 18:40:43,847 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-01-31 18:40:43,847 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-01-31 18:40:43,847 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-01-31 18:40:43,847 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-01-31 18:40:43,847 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-01-31 18:40:43,848 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-01-31 18:40:43,848 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-01-31 18:40:43,848 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-01-31 18:40:43,848 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-01-31 18:40:43,848 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-01-31 18:40:43,848 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-01-31 18:40:43,848 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-01-31 18:40:43,850 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-31 18:40:43,932 - kings_builder - INFO - Checking for master admin user...
2026-01-31 18:40:43,998 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000']
2026-01-31 18:40:43,999 - kings_builder - INFO - Registering authentication routes...
2026-01-31 18:40:44,005 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-01-31 18:40:44,018 - kings_builder - INFO - Checking for master admin user...
2026-01-31 18:40:44,213 - kings_builder - INFO - Registered routes:
2026-01-31 18:40:44,214 - kings_builder - INFO -   {'GET', 'HEAD'} /openapi.json
2026-01-31 18:40:44,214 - kings_builder - INFO -   {'GET', 'HEAD'} /docs
2026-01-31 18:40:44,214 - kings_builder - INFO -   {'GET', 'HEAD'} /docs/oauth2-redirect
2026-01-31 18:40:44,214 - kings_builder - INFO -   {'GET', 'HEAD'} /redoc
2026-01-31 18:40:44,214 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-01-31 18:40:44,214 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-01-31 18:40:44,214 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-01-31 18:40:44,214 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-01-31 18:40:44,215 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-01-31 18:40:44,215 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-01-31 18:40:44,215 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-01-31 18:40:44,215 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-01-31 18:40:44,215 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-01-31 18:40:44,215 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-01-31 18:40:44,215 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-01-31 18:40:44,215 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-01-31 18:40:44,216 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-01-31 18:40:44,216 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-01-31 18:40:44,216 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-01-31 18:40:44,216 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-01-31 18:40:44,216 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-01-31 18:40:44,216 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-01-31 18:40:44,216 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-01-31 18:40:44,216 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-01-31 18:40:44,217 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-01-31 18:40:44,217 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-01-31 18:40:44,217 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-01-31 18:40:44,217 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-01-31 18:40:44,217 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-01-31 18:40:44,217 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-01-31 18:40:44,217 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-01-31 18:40:44,217 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-01-31 18:40:44,217 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-01-31 18:40:44,218 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-01-31 18:40:44,218 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-01-31 18:40:44,218 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-01-31 18:40:44,218 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-01-31 18:40:44,218 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-01-31 18:40:44,218 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-01-31 18:40:44,218 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-01-31 18:40:44,218 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-01-31 18:40:44,218 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-01-31 18:40:44,219 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-01-31 18:40:44,219 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-01-31 18:40:44,219 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-01-31 18:40:44,230 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-01-31 18:40:44,230 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-01-31 18:40:44,230 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-01-31 18:40:44,231 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-01-31 18:40:44,231 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-01-31 18:40:44,231 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-01-31 18:40:44,231 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-01-31 18:40:44,231 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-01-31 18:40:44,231 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-01-31 18:40:44,231 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-01-31 18:40:44,231 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-01-31 18:40:44,232 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-01-31 18:40:44,232 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-01-31 18:40:44,232 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-01-31 18:40:44,232 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-01-31 18:40:44,232 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-01-31 18:40:44,232 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-01-31 18:40:44,232 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-01-31 18:40:44,232 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-01-31 18:40:44,233 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-01-31 18:40:44,233 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-01-31 18:40:44,233 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-01-31 18:40:44,235 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-31 18:40:44,321 - kings_builder - INFO - Checking for master admin user...
2026-01-31 18:41:11,569 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000']
2026-01-31 18:41:11,569 - kings_builder - INFO - Registering authentication routes...
2026-01-31 18:41:11,576 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-01-31 18:41:11,685 - kings_builder - INFO - Registered routes:
2026-01-31 18:41:11,686 - kings_builder - INFO -   {'HEAD', 'GET'} /openapi.json
2026-01-31 18:41:11,686 - kings_builder - INFO -   {'HEAD', 'GET'} /docs
2026-01-31 18:41:11,686 - kings_builder - INFO -   {'HEAD', 'GET'} /docs/oauth2-redirect
2026-01-31 18:41:11,686 - kings_builder - INFO -   {'HEAD', 'GET'} /redoc
2026-01-31 18:41:11,686 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-01-31 18:41:11,686 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-01-31 18:41:11,686 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-01-31 18:41:11,686 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-01-31 18:41:11,686 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-01-31 18:41:11,686 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-01-31 18:41:11,687 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-01-31 18:41:11,687 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-01-31 18:41:11,687 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-01-31 18:41:11,687 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-01-31 18:41:11,687 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-01-31 18:41:11,688 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-01-31 18:41:11,690 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-01-31 18:41:11,691 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-01-31 18:41:11,691 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-01-31 18:41:11,691 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-01-31 18:41:11,691 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-01-31 18:41:11,691 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-01-31 18:41:11,691 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-01-31 18:41:11,691 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-01-31 18:41:11,691 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-01-31 18:41:11,691 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-01-31 18:41:11,691 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-01-31 18:41:11,691 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-01-31 18:41:11,692 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-01-31 18:41:11,692 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-01-31 18:41:11,692 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-01-31 18:41:11,692 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-01-31 18:41:11,692 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-01-31 18:41:11,692 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-01-31 18:41:11,692 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-01-31 18:41:11,692 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-01-31 18:41:11,692 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-01-31 18:41:11,692 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-01-31 18:41:11,692 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-01-31 18:41:11,692 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-01-31 18:41:11,692 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-01-31 18:41:11,693 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-01-31 18:41:11,693 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-01-31 18:41:11,693 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-01-31 18:41:11,693 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-01-31 18:41:11,693 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-01-31 18:41:11,693 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-01-31 18:41:11,693 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-01-31 18:41:11,693 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-01-31 18:41:11,693 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-01-31 18:41:11,693 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-01-31 18:41:11,693 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-01-31 18:41:11,693 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-01-31 18:41:11,693 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-01-31 18:41:11,693 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-01-31 18:41:11,694 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-01-31 18:41:11,694 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-01-31 18:41:11,694 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-01-31 18:41:11,694 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-01-31 18:41:11,694 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-01-31 18:41:11,694 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-01-31 18:41:11,694 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-01-31 18:41:11,694 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-01-31 18:41:11,694 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-01-31 18:41:11,694 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-01-31 18:41:11,694 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-01-31 18:41:11,694 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-01-31 18:41:41,158 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:62773 USER_AGENT: curl/8.17.0
2026-01-31 18:41:41,230 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 18:41:41,302 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\relationships.py", line 2434, in _determine_joins
    self.primaryjoin = join_condition(
                       ~~~~~~~~~~~~~~^
        self.parent_persist_selectable,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        consider_as_foreign_keys=consider_as_foreign_keys,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\util.py", line 121, in join_condition
    return Join._join_condition(
           ~~~~~~~~~~~~~~~~~~~~^
        a,
        ^^
    ...<2 lines>...
        consider_as_foreign_keys=consider_as_foreign_keys,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\selectable.py", line 1441, in _join_condition
    cls._joincond_trim_constraints(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        a, b, constraints, consider_as_foreign_keys
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\selectable.py", line 1586, in _joincond_trim_constraints
    raise exc.AmbiguousForeignKeysError(
    ...<5 lines>...
    )
sqlalchemy.exc.AmbiguousForeignKeysError: Can't determine join between 'users' and 'builders'; tables have more than one foreign key constraint relationship between them. Please specify the 'onclause' of this join explicitly.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4268, in _do_configure_registries
    mapper._post_configure_properties()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2427, in _post_configure_properties
    prop.init()
    ~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\interfaces.py", line 595, in init
    self.do_init()
    ~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\relationships.py", line 1657, in do_init
    self._setup_join_conditions()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\relationships.py", line 1895, in _setup_join_conditions
    self._join_condition = jc = JoinCondition(
                                ~~~~~~~~~~~~~^
        parent_persist_selectable=self.parent.persist_selectable,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<14 lines>...
        can_be_synced_fn=self._columns_are_mapped,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\relationships.py", line 2321, in __init__
    self._determine_joins()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\relationships.py", line 2478, in _determine_joins
    raise sa_exc.AmbiguousForeignKeysError(
    ...<7 lines>...
    ) from afe
sqlalchemy.exc.AmbiguousForeignKeysError: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 18:42:16,505 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000']
2026-01-31 18:42:16,505 - kings_builder - INFO - Registering authentication routes...
2026-01-31 18:42:16,511 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000']
2026-01-31 18:42:16,512 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-01-31 18:42:16,512 - kings_builder - INFO - Registering authentication routes...
2026-01-31 18:42:16,518 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-01-31 18:42:16,752 - kings_builder - INFO - Registered routes:
2026-01-31 18:42:16,753 - kings_builder - INFO -   {'HEAD', 'GET'} /openapi.json
2026-01-31 18:42:16,753 - kings_builder - INFO -   {'HEAD', 'GET'} /docs
2026-01-31 18:42:16,753 - kings_builder - INFO -   {'HEAD', 'GET'} /docs/oauth2-redirect
2026-01-31 18:42:16,753 - kings_builder - INFO -   {'HEAD', 'GET'} /redoc
2026-01-31 18:42:16,753 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-01-31 18:42:16,753 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-01-31 18:42:16,754 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-01-31 18:42:16,754 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-01-31 18:42:16,754 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-01-31 18:42:16,754 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-01-31 18:42:16,755 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-01-31 18:42:16,755 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-01-31 18:42:16,755 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-01-31 18:42:16,755 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-01-31 18:42:16,755 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-01-31 18:42:16,755 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-01-31 18:42:16,756 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-01-31 18:42:16,756 - kings_builder - INFO - Registered routes:
2026-01-31 18:42:16,756 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-01-31 18:42:16,756 - kings_builder - INFO -   {'GET', 'HEAD'} /openapi.json
2026-01-31 18:42:16,756 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-01-31 18:42:16,756 - kings_builder - INFO -   {'GET', 'HEAD'} /docs
2026-01-31 18:42:16,756 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-01-31 18:42:16,756 - kings_builder - INFO -   {'GET', 'HEAD'} /docs/oauth2-redirect
2026-01-31 18:42:16,756 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-01-31 18:42:16,756 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-01-31 18:42:16,757 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-01-31 18:42:16,757 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-01-31 18:42:16,756 - kings_builder - INFO -   {'GET', 'HEAD'} /redoc
2026-01-31 18:42:16,758 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-01-31 18:42:16,758 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-01-31 18:42:16,758 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-01-31 18:42:16,758 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-01-31 18:42:16,759 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-01-31 18:42:16,759 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-01-31 18:42:16,759 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-01-31 18:42:16,760 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-01-31 18:42:16,760 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-01-31 18:42:16,760 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-01-31 18:42:16,760 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-01-31 18:42:16,761 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-01-31 18:42:16,761 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-01-31 18:42:16,761 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-01-31 18:42:16,761 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-01-31 18:42:16,761 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-01-31 18:42:16,761 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-01-31 18:42:16,762 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-01-31 18:42:16,762 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-01-31 18:42:16,762 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-01-31 18:42:16,762 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-01-31 18:42:16,762 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-01-31 18:42:16,762 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-01-31 18:42:16,762 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-01-31 18:42:16,765 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-01-31 18:42:16,765 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-01-31 18:42:16,765 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-01-31 18:42:16,766 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-01-31 18:42:16,766 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-01-31 18:42:16,766 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-01-31 18:42:16,766 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-01-31 18:42:16,766 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-01-31 18:42:16,766 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-01-31 18:42:16,767 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-01-31 18:42:16,767 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-01-31 18:42:16,767 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-01-31 18:42:16,767 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-01-31 18:42:16,767 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-01-31 18:42:16,767 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-01-31 18:42:16,768 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-01-31 18:42:16,768 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-01-31 18:42:16,768 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-01-31 18:42:16,768 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-01-31 18:42:16,768 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-01-31 18:42:16,768 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-01-31 18:42:16,769 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-01-31 18:42:16,769 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-01-31 18:42:16,769 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-01-31 18:42:16,769 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-01-31 18:42:16,769 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-01-31 18:42:16,769 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-01-31 18:42:16,770 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-01-31 18:42:16,770 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-01-31 18:42:16,770 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-01-31 18:42:16,770 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-01-31 18:42:16,770 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-01-31 18:42:16,771 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-01-31 18:42:16,771 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-01-31 18:42:16,771 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-01-31 18:42:16,771 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-01-31 18:42:16,771 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-01-31 18:42:16,771 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-01-31 18:42:16,772 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-01-31 18:42:16,772 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-01-31 18:42:16,772 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-01-31 18:42:16,772 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-01-31 18:42:16,772 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-01-31 18:42:16,775 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-31 18:42:16,778 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-01-31 18:42:16,779 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-01-31 18:42:16,779 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-01-31 18:42:16,779 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-01-31 18:42:16,779 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-01-31 18:42:16,779 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-01-31 18:42:16,780 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-01-31 18:42:16,780 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-01-31 18:42:16,780 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-01-31 18:42:16,780 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-01-31 18:42:16,781 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-01-31 18:42:16,781 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-01-31 18:42:16,781 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-01-31 18:42:16,781 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-01-31 18:42:16,781 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-01-31 18:42:16,781 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-01-31 18:42:16,782 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-01-31 18:42:16,782 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-01-31 18:42:16,782 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-01-31 18:42:16,782 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-01-31 18:42:16,782 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-01-31 18:42:16,783 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-01-31 18:42:16,783 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-01-31 18:42:16,783 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-01-31 18:42:16,783 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-01-31 18:42:16,784 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-01-31 18:42:16,784 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-01-31 18:42:16,784 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-01-31 18:42:16,784 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-01-31 18:42:16,784 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-01-31 18:42:16,785 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-01-31 18:42:16,785 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-01-31 18:42:16,785 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-01-31 18:42:16,785 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-01-31 18:42:16,785 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-01-31 18:42:16,786 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-01-31 18:42:16,786 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-01-31 18:42:16,786 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-01-31 18:42:16,787 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-01-31 18:42:16,789 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-31 18:42:16,796 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000']
2026-01-31 18:42:16,796 - kings_builder - INFO - Registering authentication routes...
2026-01-31 18:42:16,804 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-01-31 18:42:16,903 - kings_builder - INFO - Checking for master admin user...
2026-01-31 18:42:16,939 - kings_builder - INFO - Checking for master admin user...
2026-01-31 18:42:17,054 - kings_builder - INFO - Registered routes:
2026-01-31 18:42:17,055 - kings_builder - INFO -   {'HEAD', 'GET'} /openapi.json
2026-01-31 18:42:17,055 - kings_builder - INFO -   {'HEAD', 'GET'} /docs
2026-01-31 18:42:17,055 - kings_builder - INFO -   {'HEAD', 'GET'} /docs/oauth2-redirect
2026-01-31 18:42:17,055 - kings_builder - INFO -   {'HEAD', 'GET'} /redoc
2026-01-31 18:42:17,055 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-01-31 18:42:17,055 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-01-31 18:42:17,055 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-01-31 18:42:17,056 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-01-31 18:42:17,056 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-01-31 18:42:17,056 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-01-31 18:42:17,056 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-01-31 18:42:17,056 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-01-31 18:42:17,056 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-01-31 18:42:17,077 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-01-31 18:42:17,078 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-01-31 18:42:17,078 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-01-31 18:42:17,078 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-01-31 18:42:17,078 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-01-31 18:42:17,078 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-01-31 18:42:17,078 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-01-31 18:42:17,078 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-01-31 18:42:17,078 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-01-31 18:42:17,079 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-01-31 18:42:17,079 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-01-31 18:42:17,079 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-01-31 18:42:17,079 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-01-31 18:42:17,079 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-01-31 18:42:17,079 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-01-31 18:42:17,079 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-01-31 18:42:17,079 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-01-31 18:42:17,080 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-01-31 18:42:17,080 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-01-31 18:42:17,080 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-01-31 18:42:17,080 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-01-31 18:42:17,080 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-01-31 18:42:17,080 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-01-31 18:42:17,080 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-01-31 18:42:17,080 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-01-31 18:42:17,080 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-01-31 18:42:17,081 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-01-31 18:42:17,081 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-01-31 18:42:17,081 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-01-31 18:42:17,081 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-01-31 18:42:17,081 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-01-31 18:42:17,081 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-01-31 18:42:17,081 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-01-31 18:42:17,081 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-01-31 18:42:17,081 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-01-31 18:42:17,082 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-01-31 18:42:17,082 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-01-31 18:42:17,082 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-01-31 18:42:17,082 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-01-31 18:42:17,082 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-01-31 18:42:17,082 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-01-31 18:42:17,082 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-01-31 18:42:17,082 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-01-31 18:42:17,083 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-01-31 18:42:17,083 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-01-31 18:42:17,083 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-01-31 18:42:17,083 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-01-31 18:42:17,083 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-01-31 18:42:17,083 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-01-31 18:42:17,083 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-01-31 18:42:17,083 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-01-31 18:42:17,084 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-01-31 18:42:17,084 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-01-31 18:42:17,084 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-01-31 18:42:17,086 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-31 18:42:17,263 - kings_builder - INFO - Checking for master admin user...
2026-01-31 18:42:46,480 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000']
2026-01-31 18:42:46,481 - kings_builder - INFO - Registering authentication routes...
2026-01-31 18:42:46,486 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-01-31 18:42:46,510 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000']
2026-01-31 18:42:46,510 - kings_builder - INFO - Registering authentication routes...
2026-01-31 18:42:46,516 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-01-31 18:42:46,579 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000']
2026-01-31 18:42:46,579 - kings_builder - INFO - Registering authentication routes...
2026-01-31 18:42:46,584 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-01-31 18:42:46,675 - kings_builder - INFO - Registered routes:
2026-01-31 18:42:46,675 - kings_builder - INFO -   {'GET', 'HEAD'} /openapi.json
2026-01-31 18:42:46,675 - kings_builder - INFO -   {'GET', 'HEAD'} /docs
2026-01-31 18:42:46,675 - kings_builder - INFO -   {'GET', 'HEAD'} /docs/oauth2-redirect
2026-01-31 18:42:46,675 - kings_builder - INFO -   {'GET', 'HEAD'} /redoc
2026-01-31 18:42:46,675 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-01-31 18:42:46,676 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-01-31 18:42:46,676 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-01-31 18:42:46,676 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-01-31 18:42:46,676 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-01-31 18:42:46,676 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-01-31 18:42:46,676 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-01-31 18:42:46,676 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-01-31 18:42:46,677 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-01-31 18:42:46,677 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-01-31 18:42:46,677 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-01-31 18:42:46,677 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-01-31 18:42:46,677 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-01-31 18:42:46,677 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-01-31 18:42:46,677 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-01-31 18:42:46,677 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-01-31 18:42:46,678 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-01-31 18:42:46,678 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-01-31 18:42:46,678 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-01-31 18:42:46,678 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-01-31 18:42:46,678 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-01-31 18:42:46,678 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-01-31 18:42:46,678 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-01-31 18:42:46,678 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-01-31 18:42:46,679 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-01-31 18:42:46,679 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-01-31 18:42:46,679 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-01-31 18:42:46,679 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-01-31 18:42:46,679 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-01-31 18:42:46,679 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-01-31 18:42:46,679 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-01-31 18:42:46,679 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-01-31 18:42:46,679 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-01-31 18:42:46,680 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-01-31 18:42:46,680 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-01-31 18:42:46,680 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-01-31 18:42:46,680 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-01-31 18:42:46,680 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-01-31 18:42:46,680 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-01-31 18:42:46,680 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-01-31 18:42:46,680 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-01-31 18:42:46,681 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-01-31 18:42:46,681 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-01-31 18:42:46,681 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-01-31 18:42:46,681 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-01-31 18:42:46,681 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-01-31 18:42:46,681 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-01-31 18:42:46,681 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-01-31 18:42:46,681 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-01-31 18:42:46,682 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-01-31 18:42:46,682 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-01-31 18:42:46,682 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-01-31 18:42:46,682 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-01-31 18:42:46,682 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-01-31 18:42:46,682 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-01-31 18:42:46,682 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-01-31 18:42:46,682 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-01-31 18:42:46,683 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-01-31 18:42:46,683 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-01-31 18:42:46,683 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-01-31 18:42:46,683 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-01-31 18:42:46,683 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-01-31 18:42:46,683 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-01-31 18:42:46,686 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-31 18:42:46,708 - kings_builder - INFO - Registered routes:
2026-01-31 18:42:46,709 - kings_builder - INFO -   {'HEAD', 'GET'} /openapi.json
2026-01-31 18:42:46,709 - kings_builder - INFO -   {'HEAD', 'GET'} /docs
2026-01-31 18:42:46,709 - kings_builder - INFO -   {'HEAD', 'GET'} /docs/oauth2-redirect
2026-01-31 18:42:46,709 - kings_builder - INFO -   {'HEAD', 'GET'} /redoc
2026-01-31 18:42:46,709 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-01-31 18:42:46,709 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-01-31 18:42:46,710 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-01-31 18:42:46,710 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-01-31 18:42:46,710 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-01-31 18:42:46,710 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-01-31 18:42:46,710 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-01-31 18:42:46,710 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-01-31 18:42:46,710 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-01-31 18:42:46,710 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-01-31 18:42:46,711 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-01-31 18:42:46,711 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-01-31 18:42:46,711 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-01-31 18:42:46,711 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-01-31 18:42:46,711 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-01-31 18:42:46,711 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-01-31 18:42:46,711 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-01-31 18:42:46,711 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-01-31 18:42:46,712 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-01-31 18:42:46,712 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-01-31 18:42:46,712 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-01-31 18:42:46,712 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-01-31 18:42:46,712 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-01-31 18:42:46,712 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-01-31 18:42:46,712 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-01-31 18:42:46,712 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-01-31 18:42:46,713 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-01-31 18:42:46,713 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-01-31 18:42:46,713 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-01-31 18:42:46,713 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-01-31 18:42:46,713 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-01-31 18:42:46,713 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-01-31 18:42:46,713 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-01-31 18:42:46,713 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-01-31 18:42:46,714 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-01-31 18:42:46,714 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-01-31 18:42:46,714 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-01-31 18:42:46,714 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-01-31 18:42:46,714 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-01-31 18:42:46,714 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-01-31 18:42:46,714 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-01-31 18:42:46,715 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-01-31 18:42:46,715 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-01-31 18:42:46,715 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-01-31 18:42:46,715 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-01-31 18:42:46,715 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-01-31 18:42:46,715 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-01-31 18:42:46,715 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-01-31 18:42:46,716 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-01-31 18:42:46,716 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-01-31 18:42:46,716 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-01-31 18:42:46,716 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-01-31 18:42:46,716 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-01-31 18:42:46,716 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-01-31 18:42:46,716 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-01-31 18:42:46,717 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-01-31 18:42:46,717 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-01-31 18:42:46,717 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-01-31 18:42:46,717 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-01-31 18:42:46,719 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-01-31 18:42:46,719 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-01-31 18:42:46,719 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-01-31 18:42:46,719 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-01-31 18:42:46,721 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-31 18:42:46,815 - kings_builder - INFO - Registered routes:
2026-01-31 18:42:46,815 - kings_builder - INFO -   {'GET', 'HEAD'} /openapi.json
2026-01-31 18:42:46,815 - kings_builder - INFO -   {'GET', 'HEAD'} /docs
2026-01-31 18:42:46,816 - kings_builder - INFO -   {'GET', 'HEAD'} /docs/oauth2-redirect
2026-01-31 18:42:46,816 - kings_builder - INFO -   {'GET', 'HEAD'} /redoc
2026-01-31 18:42:46,816 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-01-31 18:42:46,816 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-01-31 18:42:46,816 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-01-31 18:42:46,816 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-01-31 18:42:46,816 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-01-31 18:42:46,816 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-01-31 18:42:46,817 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-01-31 18:42:46,817 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-01-31 18:42:46,817 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-01-31 18:42:46,817 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-01-31 18:42:46,818 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-01-31 18:42:46,818 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-01-31 18:42:46,818 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-01-31 18:42:46,818 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-01-31 18:42:46,819 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-01-31 18:42:46,819 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-01-31 18:42:46,819 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-01-31 18:42:46,819 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-01-31 18:42:46,819 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-01-31 18:42:46,819 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-01-31 18:42:46,819 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-01-31 18:42:46,820 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-01-31 18:42:46,820 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-01-31 18:42:46,820 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-01-31 18:42:46,820 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-01-31 18:42:46,820 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-01-31 18:42:46,820 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-01-31 18:42:46,821 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-01-31 18:42:46,821 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-01-31 18:42:46,821 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-01-31 18:42:46,821 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-01-31 18:42:46,821 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-01-31 18:42:46,821 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-01-31 18:42:46,821 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-01-31 18:42:46,822 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-01-31 18:42:46,822 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-01-31 18:42:46,822 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-01-31 18:42:46,822 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-01-31 18:42:46,822 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-01-31 18:42:46,822 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-01-31 18:42:46,822 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-01-31 18:42:46,822 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-01-31 18:42:46,823 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-01-31 18:42:46,823 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-01-31 18:42:46,823 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-01-31 18:42:46,823 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-01-31 18:42:46,823 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-01-31 18:42:46,823 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-01-31 18:42:46,823 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-01-31 18:42:46,824 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-01-31 18:42:46,824 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-01-31 18:42:46,824 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-01-31 18:42:46,824 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-01-31 18:42:46,824 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-01-31 18:42:46,824 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-01-31 18:42:46,824 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-01-31 18:42:46,825 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-01-31 18:42:46,825 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-01-31 18:42:46,825 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-01-31 18:42:46,825 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-01-31 18:42:46,825 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-01-31 18:42:46,825 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-01-31 18:42:46,825 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-01-31 18:42:46,827 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-31 18:42:46,838 - kings_builder - INFO - Checking for master admin user...
2026-01-31 18:42:46,968 - kings_builder - INFO - Checking for master admin user...
2026-01-31 18:42:46,972 - kings_builder - INFO - Checking for master admin user...
2026-01-31 18:43:06,068 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000']
2026-01-31 18:43:06,069 - kings_builder - INFO - Registering authentication routes...
2026-01-31 18:43:06,090 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-01-31 18:43:06,159 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000']
2026-01-31 18:43:06,160 - kings_builder - INFO - Registering authentication routes...
2026-01-31 18:43:06,167 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-01-31 18:43:06,174 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000']
2026-01-31 18:43:06,175 - kings_builder - INFO - Registering authentication routes...
2026-01-31 18:43:06,181 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-01-31 18:43:06,313 - kings_builder - INFO - Registered routes:
2026-01-31 18:43:06,314 - kings_builder - INFO -   {'HEAD', 'GET'} /openapi.json
2026-01-31 18:43:06,314 - kings_builder - INFO -   {'HEAD', 'GET'} /docs
2026-01-31 18:43:06,314 - kings_builder - INFO -   {'HEAD', 'GET'} /docs/oauth2-redirect
2026-01-31 18:43:06,315 - kings_builder - INFO -   {'HEAD', 'GET'} /redoc
2026-01-31 18:43:06,315 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-01-31 18:43:06,315 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-01-31 18:43:06,315 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-01-31 18:43:06,316 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-01-31 18:43:06,316 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-01-31 18:43:06,316 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-01-31 18:43:06,316 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-01-31 18:43:06,316 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-01-31 18:43:06,316 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-01-31 18:43:06,317 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-01-31 18:43:06,317 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-01-31 18:43:06,317 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-01-31 18:43:06,317 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-01-31 18:43:06,317 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-01-31 18:43:06,318 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-01-31 18:43:06,318 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-01-31 18:43:06,318 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-01-31 18:43:06,318 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-01-31 18:43:06,318 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-01-31 18:43:06,318 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-01-31 18:43:06,319 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-01-31 18:43:06,319 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-01-31 18:43:06,319 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-01-31 18:43:06,319 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-01-31 18:43:06,319 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-01-31 18:43:06,320 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-01-31 18:43:06,320 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-01-31 18:43:06,320 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-01-31 18:43:06,320 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-01-31 18:43:06,320 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-01-31 18:43:06,320 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-01-31 18:43:06,321 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-01-31 18:43:06,321 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-01-31 18:43:06,321 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-01-31 18:43:06,321 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-01-31 18:43:06,324 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-01-31 18:43:06,324 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-01-31 18:43:06,324 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-01-31 18:43:06,325 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-01-31 18:43:06,325 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-01-31 18:43:06,325 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-01-31 18:43:06,325 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-01-31 18:43:06,325 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-01-31 18:43:06,325 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-01-31 18:43:06,326 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-01-31 18:43:06,326 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-01-31 18:43:06,326 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-01-31 18:43:06,326 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-01-31 18:43:06,326 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-01-31 18:43:06,326 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-01-31 18:43:06,327 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-01-31 18:43:06,327 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-01-31 18:43:06,327 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-01-31 18:43:06,327 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-01-31 18:43:06,327 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-01-31 18:43:06,327 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-01-31 18:43:06,328 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-01-31 18:43:06,328 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-01-31 18:43:06,328 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-01-31 18:43:06,328 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-01-31 18:43:06,328 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-01-31 18:43:06,328 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-01-31 18:43:06,328 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-01-31 18:43:06,331 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-31 18:43:06,409 - kings_builder - INFO - Registered routes:
2026-01-31 18:43:06,409 - kings_builder - INFO -   {'HEAD', 'GET'} /openapi.json
2026-01-31 18:43:06,409 - kings_builder - INFO -   {'HEAD', 'GET'} /docs
2026-01-31 18:43:06,409 - kings_builder - INFO -   {'HEAD', 'GET'} /docs/oauth2-redirect
2026-01-31 18:43:06,410 - kings_builder - INFO -   {'HEAD', 'GET'} /redoc
2026-01-31 18:43:06,410 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-01-31 18:43:06,410 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-01-31 18:43:06,410 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-01-31 18:43:06,411 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-01-31 18:43:06,411 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-01-31 18:43:06,411 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-01-31 18:43:06,411 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-01-31 18:43:06,413 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-01-31 18:43:06,413 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-01-31 18:43:06,415 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-01-31 18:43:06,415 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-01-31 18:43:06,415 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-01-31 18:43:06,416 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-01-31 18:43:06,416 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-01-31 18:43:06,416 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-01-31 18:43:06,416 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-01-31 18:43:06,417 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-01-31 18:43:06,417 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-01-31 18:43:06,417 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-01-31 18:43:06,419 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-01-31 18:43:06,419 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-01-31 18:43:06,419 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-01-31 18:43:06,419 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-01-31 18:43:06,420 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-01-31 18:43:06,420 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-01-31 18:43:06,420 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-01-31 18:43:06,420 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-01-31 18:43:06,420 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-01-31 18:43:06,420 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-01-31 18:43:06,421 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-01-31 18:43:06,421 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-01-31 18:43:06,421 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-01-31 18:43:06,421 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-01-31 18:43:06,421 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-01-31 18:43:06,421 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-01-31 18:43:06,423 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-01-31 18:43:06,423 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-01-31 18:43:06,423 - kings_builder - INFO - Registered routes:
2026-01-31 18:43:06,423 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-01-31 18:43:06,424 - kings_builder - INFO -   {'GET', 'HEAD'} /openapi.json
2026-01-31 18:43:06,424 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-01-31 18:43:06,424 - kings_builder - INFO -   {'GET', 'HEAD'} /docs
2026-01-31 18:43:06,424 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-01-31 18:43:06,424 - kings_builder - INFO -   {'GET', 'HEAD'} /docs/oauth2-redirect
2026-01-31 18:43:06,424 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-01-31 18:43:06,424 - kings_builder - INFO -   {'GET', 'HEAD'} /redoc
2026-01-31 18:43:06,424 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-01-31 18:43:06,424 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-01-31 18:43:06,424 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-01-31 18:43:06,424 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-01-31 18:43:06,425 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-01-31 18:43:06,425 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-01-31 18:43:06,425 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-01-31 18:43:06,425 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-01-31 18:43:06,425 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-01-31 18:43:06,425 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-01-31 18:43:06,425 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-01-31 18:43:06,425 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-01-31 18:43:06,425 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-01-31 18:43:06,425 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-01-31 18:43:06,425 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-01-31 18:43:06,426 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-01-31 18:43:06,426 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-01-31 18:43:06,426 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-01-31 18:43:06,426 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-01-31 18:43:06,427 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-01-31 18:43:06,427 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-01-31 18:43:06,426 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-01-31 18:43:06,427 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-01-31 18:43:06,427 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-01-31 18:43:06,427 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-01-31 18:43:06,427 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-01-31 18:43:06,427 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-01-31 18:43:06,427 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-01-31 18:43:06,427 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-01-31 18:43:06,428 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-01-31 18:43:06,428 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-01-31 18:43:06,428 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-01-31 18:43:06,428 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-01-31 18:43:06,428 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-01-31 18:43:06,428 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-01-31 18:43:06,428 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-01-31 18:43:06,428 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-01-31 18:43:06,429 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-01-31 18:43:06,429 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-01-31 18:43:06,429 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-01-31 18:43:06,429 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-01-31 18:43:06,429 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-01-31 18:43:06,429 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-01-31 18:43:06,429 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-01-31 18:43:06,429 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-01-31 18:43:06,430 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-01-31 18:43:06,430 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-01-31 18:43:06,431 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-01-31 18:43:06,431 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-01-31 18:43:06,432 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-01-31 18:43:06,432 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-01-31 18:43:06,432 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-01-31 18:43:06,432 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-01-31 18:43:06,432 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-01-31 18:43:06,433 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-01-31 18:43:06,433 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-01-31 18:43:06,433 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-31 18:43:06,433 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-01-31 18:43:06,433 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-01-31 18:43:06,433 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-01-31 18:43:06,433 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-01-31 18:43:06,434 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-01-31 18:43:06,434 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-01-31 18:43:06,434 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-01-31 18:43:06,434 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-01-31 18:43:06,434 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-01-31 18:43:06,434 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-01-31 18:43:06,435 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-01-31 18:43:06,435 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-01-31 18:43:06,435 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-01-31 18:43:06,435 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-01-31 18:43:06,435 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-01-31 18:43:06,436 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-01-31 18:43:06,436 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-01-31 18:43:06,436 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-01-31 18:43:06,436 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-01-31 18:43:06,436 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-01-31 18:43:06,437 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-01-31 18:43:06,437 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-01-31 18:43:06,437 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-01-31 18:43:06,438 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-01-31 18:43:06,439 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-01-31 18:43:06,439 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-01-31 18:43:06,439 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-01-31 18:43:06,439 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-01-31 18:43:06,441 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-31 18:43:06,468 - kings_builder - INFO - Checking for master admin user...
2026-01-31 18:43:06,572 - kings_builder - INFO - Checking for master admin user...
2026-01-31 18:43:06,591 - kings_builder - INFO - Checking for master admin user...
2026-01-31 18:44:19,441 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000']
2026-01-31 18:44:19,442 - kings_builder - INFO - Registering authentication routes...
2026-01-31 18:44:19,446 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-01-31 18:44:19,464 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000']
2026-01-31 18:44:19,464 - kings_builder - INFO - Registering authentication routes...
2026-01-31 18:44:19,472 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-01-31 18:44:19,511 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000']
2026-01-31 18:44:19,512 - kings_builder - INFO - Registering authentication routes...
2026-01-31 18:44:19,516 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-01-31 18:44:19,639 - kings_builder - INFO - Registered routes:
2026-01-31 18:44:19,646 - kings_builder - INFO -   {'GET', 'HEAD'} /openapi.json
2026-01-31 18:44:19,646 - kings_builder - INFO -   {'GET', 'HEAD'} /docs
2026-01-31 18:44:19,647 - kings_builder - INFO -   {'GET', 'HEAD'} /docs/oauth2-redirect
2026-01-31 18:44:19,647 - kings_builder - INFO -   {'GET', 'HEAD'} /redoc
2026-01-31 18:44:19,647 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-01-31 18:44:19,647 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-01-31 18:44:19,647 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-01-31 18:44:19,647 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-01-31 18:44:19,647 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-01-31 18:44:19,648 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-01-31 18:44:19,648 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-01-31 18:44:19,648 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-01-31 18:44:19,648 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-01-31 18:44:19,648 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-01-31 18:44:19,648 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-01-31 18:44:19,648 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-01-31 18:44:19,649 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-01-31 18:44:19,649 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-01-31 18:44:19,649 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-01-31 18:44:19,649 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-01-31 18:44:19,649 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-01-31 18:44:19,649 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-01-31 18:44:19,649 - kings_builder - INFO - Registered routes:
2026-01-31 18:44:19,649 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-01-31 18:44:19,650 - kings_builder - INFO -   {'GET', 'HEAD'} /openapi.json
2026-01-31 18:44:19,650 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-01-31 18:44:19,650 - kings_builder - INFO -   {'GET', 'HEAD'} /docs
2026-01-31 18:44:19,650 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-01-31 18:44:19,650 - kings_builder - INFO -   {'GET', 'HEAD'} /docs/oauth2-redirect
2026-01-31 18:44:19,650 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-01-31 18:44:19,650 - kings_builder - INFO -   {'GET', 'HEAD'} /redoc
2026-01-31 18:44:19,650 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-01-31 18:44:19,650 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-01-31 18:44:19,650 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-01-31 18:44:19,650 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-01-31 18:44:19,650 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-01-31 18:44:19,650 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-01-31 18:44:19,650 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-01-31 18:44:19,651 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-01-31 18:44:19,651 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-01-31 18:44:19,651 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-01-31 18:44:19,651 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-01-31 18:44:19,651 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-01-31 18:44:19,651 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-01-31 18:44:19,651 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-01-31 18:44:19,651 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-01-31 18:44:19,651 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-01-31 18:44:19,651 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-01-31 18:44:19,651 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-01-31 18:44:19,651 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-01-31 18:44:19,651 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-01-31 18:44:19,651 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-01-31 18:44:19,652 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-01-31 18:44:19,652 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-01-31 18:44:19,652 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-01-31 18:44:19,652 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-01-31 18:44:19,652 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-01-31 18:44:19,652 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-01-31 18:44:19,652 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-01-31 18:44:19,653 - kings_builder - INFO -   {'POST'} /api/v1/projects/
{booking_id}
2026-01-31 18:44:19,653 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-01-31 18:44:19,653 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-01-31 18:44:19,653 - kings_builder - INFO -   {'GET'} /api/v1/inventory/

2026-01-31 18:44:19,653 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-01-31 18:44:19,653 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-01-31 18:44:19,653 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
{customer_id}
2026-01-31 18:44:19,653 - kings_builder - INFO -   {'GET'} /api/v1/payments/
inventory_id}
2026-01-31 18:44:19,654 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
id}/lock
2026-01-31 18:44:19,654 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-01-31 18:44:19,654 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-01-31 18:44:19,654 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-01-31 18:44:19,654 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-01-31 18:44:19,654 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-01-31 18:44:19,654 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-01-31 18:44:19,654 - kings_builder - INFO -   {'POST'} /api/v1/investors/

2026-01-31 18:44:19,654 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-01-31 18:44:19,654 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-01-31 18:44:19,654 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-01-31 18:44:19,654 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-01-31 18:44:19,655 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-01-31 18:44:19,655 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-01-31 18:44:19,655 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-01-31 18:44:19,655 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-01-31 18:44:19,655 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-01-31 18:44:19,655 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-01-31 18:44:19,655 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-01-31 18:44:19,655 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-01-31 18:44:19,655 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-01-31 18:44:19,655 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-01-31 18:44:19,655 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-01-31 18:44:19,656 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-01-31 18:44:19,656 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-01-31 18:44:19,656 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-01-31 18:44:19,656 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-01-31 18:44:19,656 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-01-31 18:44:19,656 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-01-31 18:44:19,656 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-01-31 18:44:19,656 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-01-31 18:44:19,656 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-01-31 18:44:19,656 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-01-31 18:44:19,656 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-01-31 18:44:19,656 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-01-31 18:44:19,656 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-01-31 18:44:19,656 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}

2026-01-31 18:44:19,657 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-01-31 18:44:19,657 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-01-31 18:44:19,657 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-01-31 18:44:19,657 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-01-31 18:44:19,657 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-01-31 18:44:19,657 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-01-31 18:44:19,657 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-01-31 18:44:19,657 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-01-31 18:44:19,658 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-01-31 18:44:19,658 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-01-31 18:44:19,658 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-01-31 18:44:19,658 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-01-31 18:44:19,658 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-01-31 18:44:19,658 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-31 18:44:19,658 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-01-31 18:44:19,658 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-01-31 18:44:19,659 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-01-31 18:44:19,659 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-01-31 18:44:19,659 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-01-31 18:44:19,659 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-01-31 18:44:19,661 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-31 18:44:19,747 - kings_builder - INFO - Registered routes:
2026-01-31 18:44:19,748 - kings_builder - INFO -   {'HEAD', 'GET'} /openapi.json
2026-01-31 18:44:19,749 - kings_builder - INFO -   {'HEAD', 'GET'} /docs
2026-01-31 18:44:19,750 - kings_builder - INFO -   {'HEAD', 'GET'} /docs/oauth2-redirect
2026-01-31 18:44:19,750 - kings_builder - INFO -   {'HEAD', 'GET'} /redoc
2026-01-31 18:44:19,750 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-01-31 18:44:19,751 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-01-31 18:44:19,751 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-01-31 18:44:19,751 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-01-31 18:44:19,752 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-01-31 18:44:19,753 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-01-31 18:44:19,753 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-01-31 18:44:19,753 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-01-31 18:44:19,754 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-01-31 18:44:19,754 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-01-31 18:44:19,754 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-01-31 18:44:19,754 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-01-31 18:44:19,755 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-01-31 18:44:19,755 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-01-31 18:44:19,755 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-01-31 18:44:19,755 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-01-31 18:44:19,756 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-01-31 18:44:19,756 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-01-31 18:44:19,756 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-01-31 18:44:19,756 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-01-31 18:44:19,757 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-01-31 18:44:19,757 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-01-31 18:44:19,760 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-01-31 18:44:19,761 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-01-31 18:44:19,761 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-01-31 18:44:19,761 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-01-31 18:44:19,761 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-01-31 18:44:19,761 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-01-31 18:44:19,762 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-01-31 18:44:19,762 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-01-31 18:44:19,762 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-01-31 18:44:19,762 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-01-31 18:44:19,762 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-01-31 18:44:19,763 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-01-31 18:44:19,763 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-01-31 18:44:19,763 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-01-31 18:44:19,763 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-01-31 18:44:19,764 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-01-31 18:44:19,764 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-01-31 18:44:19,764 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-01-31 18:44:19,764 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-01-31 18:44:19,764 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-01-31 18:44:19,765 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-01-31 18:44:19,768 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-01-31 18:44:19,769 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-01-31 18:44:19,769 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-01-31 18:44:19,769 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-01-31 18:44:19,769 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-01-31 18:44:19,769 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-01-31 18:44:19,770 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-01-31 18:44:19,770 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-01-31 18:44:19,770 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-01-31 18:44:19,770 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-01-31 18:44:19,770 - kings_builder - INFO - Checking for master admin user...
2026-01-31 18:44:19,770 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-01-31 18:44:19,770 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-01-31 18:44:19,771 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-01-31 18:44:19,771 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-01-31 18:44:19,771 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-01-31 18:44:19,771 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-01-31 18:44:19,771 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-01-31 18:44:19,771 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-01-31 18:44:19,771 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-01-31 18:44:19,772 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-01-31 18:44:19,774 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-31 18:44:19,797 - kings_builder - INFO - Checking for master admin user...
2026-01-31 18:44:19,907 - kings_builder - INFO - Checking for master admin user...
2026-01-31 18:44:49,044 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000']
2026-01-31 18:44:49,045 - kings_builder - INFO - Registering authentication routes...
2026-01-31 18:44:49,053 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-01-31 18:44:49,257 - kings_builder - INFO - Registered routes:
2026-01-31 18:44:49,257 - kings_builder - INFO -   {'HEAD', 'GET'} /openapi.json
2026-01-31 18:44:49,257 - kings_builder - INFO -   {'HEAD', 'GET'} /docs
2026-01-31 18:44:49,258 - kings_builder - INFO -   {'HEAD', 'GET'} /docs/oauth2-redirect
2026-01-31 18:44:49,258 - kings_builder - INFO -   {'HEAD', 'GET'} /redoc
2026-01-31 18:44:49,258 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-01-31 18:44:49,258 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-01-31 18:44:49,258 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-01-31 18:44:49,258 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-01-31 18:44:49,258 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-01-31 18:44:49,258 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-01-31 18:44:49,258 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-01-31 18:44:49,259 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-01-31 18:44:49,259 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-01-31 18:44:49,259 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-01-31 18:44:49,260 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-01-31 18:44:49,260 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-01-31 18:44:49,260 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-01-31 18:44:49,260 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-01-31 18:44:49,261 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-01-31 18:44:49,261 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-01-31 18:44:49,261 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-01-31 18:44:49,261 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-01-31 18:44:49,262 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-01-31 18:44:49,262 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-01-31 18:44:49,263 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-01-31 18:44:49,264 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-01-31 18:44:49,264 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-01-31 18:44:49,264 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-01-31 18:44:49,264 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-01-31 18:44:49,264 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-01-31 18:44:49,264 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-01-31 18:44:49,265 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-01-31 18:44:49,265 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-01-31 18:44:49,265 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-01-31 18:44:49,265 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-01-31 18:44:49,265 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-01-31 18:44:49,265 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-01-31 18:44:49,265 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-01-31 18:44:49,265 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-01-31 18:44:49,266 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-01-31 18:44:49,266 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-01-31 18:44:49,266 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-01-31 18:44:49,266 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-01-31 18:44:49,266 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-01-31 18:44:49,266 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-01-31 18:44:49,266 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-01-31 18:44:49,266 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-01-31 18:44:49,266 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-01-31 18:44:49,266 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-01-31 18:44:49,267 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-01-31 18:44:49,267 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-01-31 18:44:49,267 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-01-31 18:44:49,267 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-01-31 18:44:49,267 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-01-31 18:44:49,267 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-01-31 18:44:49,267 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-01-31 18:44:49,275 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-01-31 18:44:49,275 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-01-31 18:44:49,275 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-01-31 18:44:49,275 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-01-31 18:44:49,275 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-01-31 18:44:49,276 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-01-31 18:44:49,276 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-01-31 18:44:49,276 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-01-31 18:44:49,277 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-01-31 18:44:49,277 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-01-31 18:44:49,277 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-01-31 18:45:18,341 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000']
2026-01-31 18:45:18,341 - kings_builder - INFO - Registering authentication routes...
2026-01-31 18:45:18,348 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-01-31 18:45:18,529 - kings_builder - INFO - Registered routes:
2026-01-31 18:45:18,529 - kings_builder - INFO -   {'HEAD', 'GET'} /openapi.json
2026-01-31 18:45:18,529 - kings_builder - INFO -   {'HEAD', 'GET'} /docs
2026-01-31 18:45:18,529 - kings_builder - INFO -   {'HEAD', 'GET'} /docs/oauth2-redirect
2026-01-31 18:45:18,529 - kings_builder - INFO -   {'HEAD', 'GET'} /redoc
2026-01-31 18:45:18,529 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-01-31 18:45:18,530 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-01-31 18:45:18,530 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-01-31 18:45:18,530 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-01-31 18:45:18,530 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-01-31 18:45:18,530 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-01-31 18:45:18,530 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-01-31 18:45:18,530 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-01-31 18:45:18,530 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-01-31 18:45:18,530 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-01-31 18:45:18,530 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-01-31 18:45:18,531 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-01-31 18:45:18,531 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-01-31 18:45:18,531 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-01-31 18:45:18,531 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-01-31 18:45:18,531 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-01-31 18:45:18,531 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-01-31 18:45:18,531 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-01-31 18:45:18,531 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-01-31 18:45:18,531 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-01-31 18:45:18,531 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-01-31 18:45:18,532 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-01-31 18:45:18,532 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-01-31 18:45:18,532 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-01-31 18:45:18,532 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-01-31 18:45:18,532 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-01-31 18:45:18,532 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-01-31 18:45:18,532 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-01-31 18:45:18,532 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-01-31 18:45:18,533 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-01-31 18:45:18,533 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-01-31 18:45:18,533 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-01-31 18:45:18,534 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-01-31 18:45:18,534 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-01-31 18:45:18,534 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-01-31 18:45:18,534 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-01-31 18:45:18,534 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-01-31 18:45:18,534 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-01-31 18:45:18,534 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-01-31 18:45:18,534 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-01-31 18:45:18,534 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-01-31 18:45:18,534 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-01-31 18:45:18,535 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-01-31 18:45:18,535 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-01-31 18:45:18,535 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-01-31 18:45:18,535 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-01-31 18:45:18,535 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-01-31 18:45:18,535 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-01-31 18:45:18,535 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-01-31 18:45:18,535 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-01-31 18:45:18,535 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-01-31 18:45:18,535 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-01-31 18:45:18,536 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-01-31 18:45:18,536 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-01-31 18:45:18,536 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-01-31 18:45:18,536 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-01-31 18:45:18,536 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-01-31 18:45:18,536 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-01-31 18:45:18,537 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-01-31 18:45:18,537 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-01-31 18:45:18,537 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-01-31 18:45:18,537 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-01-31 18:45:18,538 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-01-31 18:45:51,980 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:62907 USER_AGENT: curl/8.17.0
2026-01-31 18:45:52,050 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 18:45:52,108 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\relationships.py", line 2434, in _determine_joins
    self.primaryjoin = join_condition(
                       ~~~~~~~~~~~~~~^
        self.parent_persist_selectable,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        consider_as_foreign_keys=consider_as_foreign_keys,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\util.py", line 121, in join_condition
    return Join._join_condition(
           ~~~~~~~~~~~~~~~~~~~~^
        a,
        ^^
    ...<2 lines>...
        consider_as_foreign_keys=consider_as_foreign_keys,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\selectable.py", line 1441, in _join_condition
    cls._joincond_trim_constraints(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        a, b, constraints, consider_as_foreign_keys
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\selectable.py", line 1586, in _joincond_trim_constraints
    raise exc.AmbiguousForeignKeysError(
    ...<5 lines>...
    )
sqlalchemy.exc.AmbiguousForeignKeysError: Can't determine join between 'users' and 'builders'; tables have more than one foreign key constraint relationship between them. Please specify the 'onclause' of this join explicitly.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4268, in _do_configure_registries
    mapper._post_configure_properties()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2427, in _post_configure_properties
    prop.init()
    ~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\interfaces.py", line 595, in init
    self.do_init()
    ~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\relationships.py", line 1657, in do_init
    self._setup_join_conditions()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\relationships.py", line 1895, in _setup_join_conditions
    self._join_condition = jc = JoinCondition(
                                ~~~~~~~~~~~~~^
        parent_persist_selectable=self.parent.persist_selectable,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<14 lines>...
        can_be_synced_fn=self._columns_are_mapped,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\relationships.py", line 2321, in __init__
    self._determine_joins()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\relationships.py", line 2478, in _determine_joins
    raise sa_exc.AmbiguousForeignKeysError(
    ...<7 lines>...
    ) from afe
sqlalchemy.exc.AmbiguousForeignKeysError: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 18:47:56,702 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000']
2026-01-31 18:47:56,702 - kings_builder - INFO - Registering authentication routes...
2026-01-31 18:47:56,707 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-01-31 18:47:56,859 - kings_builder - INFO - Registered routes:
2026-01-31 18:47:56,859 - kings_builder - INFO -   {'HEAD', 'GET'} /openapi.json
2026-01-31 18:47:56,859 - kings_builder - INFO -   {'HEAD', 'GET'} /docs
2026-01-31 18:47:56,859 - kings_builder - INFO -   {'HEAD', 'GET'} /docs/oauth2-redirect
2026-01-31 18:47:56,859 - kings_builder - INFO -   {'HEAD', 'GET'} /redoc
2026-01-31 18:47:56,859 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-01-31 18:47:56,859 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-01-31 18:47:56,859 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-01-31 18:47:56,860 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-01-31 18:47:56,860 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-01-31 18:47:56,860 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-01-31 18:47:56,860 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-01-31 18:47:56,860 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-01-31 18:47:56,860 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-01-31 18:47:56,860 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-01-31 18:47:56,860 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-01-31 18:47:56,860 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-01-31 18:47:56,860 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-01-31 18:47:56,860 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-01-31 18:47:56,860 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-01-31 18:47:56,860 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-01-31 18:47:56,861 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-01-31 18:47:56,861 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-01-31 18:47:56,861 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-01-31 18:47:56,861 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-01-31 18:47:56,861 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-01-31 18:47:56,861 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-01-31 18:47:56,861 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-01-31 18:47:56,861 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-01-31 18:47:56,861 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-01-31 18:47:56,861 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-01-31 18:47:56,861 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-01-31 18:47:56,861 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-01-31 18:47:56,861 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-01-31 18:47:56,861 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-01-31 18:47:56,862 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-01-31 18:47:56,862 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-01-31 18:47:56,862 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-01-31 18:47:56,862 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-01-31 18:47:56,862 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-01-31 18:47:56,862 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-01-31 18:47:56,862 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-01-31 18:47:56,862 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-01-31 18:47:56,862 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-01-31 18:47:56,862 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-01-31 18:47:56,863 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-01-31 18:47:56,863 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-01-31 18:47:56,863 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-01-31 18:47:56,863 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-01-31 18:47:56,863 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-01-31 18:47:56,863 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-01-31 18:47:56,863 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-01-31 18:47:56,863 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-01-31 18:47:56,863 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-01-31 18:47:56,864 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-01-31 18:47:56,865 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-01-31 18:47:56,865 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-01-31 18:47:56,865 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-01-31 18:47:56,865 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-01-31 18:47:56,866 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-01-31 18:47:56,866 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-01-31 18:47:56,866 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-01-31 18:47:56,866 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-01-31 18:47:56,866 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-01-31 18:47:56,866 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-01-31 18:47:56,866 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-01-31 18:47:56,866 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-01-31 18:47:56,867 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-01-31 18:48:09,458 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:62953 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 18:48:10,653 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:62954 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 18:48:11,821 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 18:48:11,846 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 18:48:12,254 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 18:48:12,266 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 18:48:15,327 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:62959 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 18:48:16,906 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 18:48:16,923 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 18:49:33,675 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:62980 USER_AGENT: curl/8.17.0
2026-01-31 18:49:33,804 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 18:49:33,932 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\relationships.py", line 2434, in _determine_joins
    self.primaryjoin = join_condition(
                       ~~~~~~~~~~~~~~^
        self.parent_persist_selectable,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        consider_as_foreign_keys=consider_as_foreign_keys,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\util.py", line 121, in join_condition
    return Join._join_condition(
           ~~~~~~~~~~~~~~~~~~~~^
        a,
        ^^
    ...<2 lines>...
        consider_as_foreign_keys=consider_as_foreign_keys,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\selectable.py", line 1441, in _join_condition
    cls._joincond_trim_constraints(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        a, b, constraints, consider_as_foreign_keys
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\selectable.py", line 1586, in _joincond_trim_constraints
    raise exc.AmbiguousForeignKeysError(
    ...<5 lines>...
    )
sqlalchemy.exc.AmbiguousForeignKeysError: Can't determine join between 'users' and 'builders'; tables have more than one foreign key constraint relationship between them. Please specify the 'onclause' of this join explicitly.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4268, in _do_configure_registries
    mapper._post_configure_properties()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2427, in _post_configure_properties
    prop.init()
    ~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\interfaces.py", line 595, in init
    self.do_init()
    ~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\relationships.py", line 1657, in do_init
    self._setup_join_conditions()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\relationships.py", line 1895, in _setup_join_conditions
    self._join_condition = jc = JoinCondition(
                                ~~~~~~~~~~~~~^
        parent_persist_selectable=self.parent.persist_selectable,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<14 lines>...
        can_be_synced_fn=self._columns_are_mapped,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\relationships.py", line 2321, in __init__
    self._determine_joins()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\relationships.py", line 2478, in _determine_joins
    raise sa_exc.AmbiguousForeignKeysError(
    ...<7 lines>...
    ) from afe
sqlalchemy.exc.AmbiguousForeignKeysError: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 18:50:22,433 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000']
2026-01-31 18:50:22,434 - kings_builder - INFO - Registering authentication routes...
2026-01-31 18:50:22,437 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000']
2026-01-31 18:50:22,437 - kings_builder - INFO - Registering authentication routes...
2026-01-31 18:50:22,439 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-01-31 18:50:22,442 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-01-31 18:50:22,534 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000']
2026-01-31 18:50:22,534 - kings_builder - INFO - Registering authentication routes...
2026-01-31 18:50:22,539 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-01-31 18:50:22,619 - kings_builder - INFO - Registered routes:
2026-01-31 18:50:22,619 - kings_builder - INFO -   {'GET', 'HEAD'} /openapi.json
2026-01-31 18:50:22,619 - kings_builder - INFO -   {'GET', 'HEAD'} /docs
2026-01-31 18:50:22,619 - kings_builder - INFO -   {'GET', 'HEAD'} /docs/oauth2-redirect
2026-01-31 18:50:22,619 - kings_builder - INFO -   {'GET', 'HEAD'} /redoc
2026-01-31 18:50:22,619 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-01-31 18:50:22,620 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-01-31 18:50:22,620 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-01-31 18:50:22,620 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-01-31 18:50:22,620 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-01-31 18:50:22,620 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-01-31 18:50:22,620 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-01-31 18:50:22,620 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-01-31 18:50:22,621 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-01-31 18:50:22,621 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-01-31 18:50:22,621 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-01-31 18:50:22,621 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-01-31 18:50:22,621 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-01-31 18:50:22,621 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-01-31 18:50:22,621 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-01-31 18:50:22,622 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-01-31 18:50:22,622 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-01-31 18:50:22,622 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-01-31 18:50:22,622 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-01-31 18:50:22,622 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-01-31 18:50:22,622 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-01-31 18:50:22,622 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-01-31 18:50:22,622 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-01-31 18:50:22,623 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-01-31 18:50:22,623 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-01-31 18:50:22,623 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-01-31 18:50:22,623 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-01-31 18:50:22,623 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-01-31 18:50:22,623 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-01-31 18:50:22,623 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-01-31 18:50:22,624 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-01-31 18:50:22,624 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-01-31 18:50:22,624 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-01-31 18:50:22,624 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-01-31 18:50:22,624 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-01-31 18:50:22,624 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-01-31 18:50:22,624 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-01-31 18:50:22,625 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-01-31 18:50:22,625 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-01-31 18:50:22,625 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-01-31 18:50:22,625 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-01-31 18:50:22,625 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-01-31 18:50:22,625 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-01-31 18:50:22,625 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-01-31 18:50:22,625 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-01-31 18:50:22,626 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-01-31 18:50:22,626 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-01-31 18:50:22,626 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-01-31 18:50:22,626 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-01-31 18:50:22,626 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-01-31 18:50:22,626 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-01-31 18:50:22,626 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-01-31 18:50:22,627 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-01-31 18:50:22,627 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-01-31 18:50:22,627 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-01-31 18:50:22,627 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-01-31 18:50:22,627 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-01-31 18:50:22,627 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-01-31 18:50:22,627 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-01-31 18:50:22,628 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-01-31 18:50:22,628 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-01-31 18:50:22,628 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-01-31 18:50:22,628 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-01-31 18:50:22,630 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-31 18:50:22,654 - kings_builder - INFO - Registered routes:
2026-01-31 18:50:22,655 - kings_builder - INFO -   {'GET', 'HEAD'} /openapi.json
2026-01-31 18:50:22,655 - kings_builder - INFO -   {'GET', 'HEAD'} /docs
2026-01-31 18:50:22,655 - kings_builder - INFO -   {'GET', 'HEAD'} /docs/oauth2-redirect
2026-01-31 18:50:22,655 - kings_builder - INFO -   {'GET', 'HEAD'} /redoc
2026-01-31 18:50:22,655 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-01-31 18:50:22,655 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-01-31 18:50:22,656 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-01-31 18:50:22,656 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-01-31 18:50:22,656 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-01-31 18:50:22,656 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-01-31 18:50:22,656 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-01-31 18:50:22,657 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-01-31 18:50:22,657 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-01-31 18:50:22,657 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-01-31 18:50:22,657 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-01-31 18:50:22,657 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-01-31 18:50:22,662 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-01-31 18:50:22,663 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-01-31 18:50:22,663 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-01-31 18:50:22,663 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-01-31 18:50:22,663 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-01-31 18:50:22,663 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-01-31 18:50:22,663 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-01-31 18:50:22,664 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-01-31 18:50:22,664 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-01-31 18:50:22,664 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-01-31 18:50:22,664 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-01-31 18:50:22,664 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-01-31 18:50:22,664 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-01-31 18:50:22,664 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-01-31 18:50:22,665 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-01-31 18:50:22,665 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-01-31 18:50:22,665 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-01-31 18:50:22,665 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-01-31 18:50:22,665 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-01-31 18:50:22,665 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-01-31 18:50:22,665 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-01-31 18:50:22,665 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-01-31 18:50:22,666 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-01-31 18:50:22,666 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-01-31 18:50:22,666 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-01-31 18:50:22,666 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-01-31 18:50:22,666 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-01-31 18:50:22,666 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-01-31 18:50:22,666 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-01-31 18:50:22,666 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-01-31 18:50:22,666 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-01-31 18:50:22,667 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-01-31 18:50:22,667 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-01-31 18:50:22,667 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-01-31 18:50:22,667 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-01-31 18:50:22,667 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-01-31 18:50:22,667 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-01-31 18:50:22,667 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-01-31 18:50:22,667 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-01-31 18:50:22,668 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-01-31 18:50:22,668 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-01-31 18:50:22,668 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-01-31 18:50:22,668 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-01-31 18:50:22,668 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-01-31 18:50:22,668 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-01-31 18:50:22,668 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-01-31 18:50:22,668 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-01-31 18:50:22,668 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-01-31 18:50:22,669 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-01-31 18:50:22,669 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-01-31 18:50:22,669 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-01-31 18:50:22,671 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-31 18:50:22,732 - kings_builder - INFO - Registered routes:
2026-01-31 18:50:22,732 - kings_builder - INFO -   {'GET', 'HEAD'} /openapi.json
2026-01-31 18:50:22,732 - kings_builder - INFO -   {'GET', 'HEAD'} /docs
2026-01-31 18:50:22,732 - kings_builder - INFO -   {'GET', 'HEAD'} /docs/oauth2-redirect
2026-01-31 18:50:22,733 - kings_builder - INFO -   {'GET', 'HEAD'} /redoc
2026-01-31 18:50:22,733 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-01-31 18:50:22,733 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-01-31 18:50:22,733 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-01-31 18:50:22,733 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-01-31 18:50:22,733 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-01-31 18:50:22,733 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-01-31 18:50:22,733 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-01-31 18:50:22,734 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-01-31 18:50:22,734 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-01-31 18:50:22,734 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-01-31 18:50:22,734 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-01-31 18:50:22,734 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-01-31 18:50:22,734 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-01-31 18:50:22,734 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-01-31 18:50:22,734 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-01-31 18:50:22,735 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-01-31 18:50:22,735 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-01-31 18:50:22,735 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-01-31 18:50:22,735 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-01-31 18:50:22,735 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-01-31 18:50:22,735 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-01-31 18:50:22,735 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-01-31 18:50:22,735 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-01-31 18:50:22,735 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-01-31 18:50:22,736 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-01-31 18:50:22,736 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-01-31 18:50:22,736 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-01-31 18:50:22,736 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-01-31 18:50:22,736 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-01-31 18:50:22,736 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-01-31 18:50:22,736 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-01-31 18:50:22,736 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-01-31 18:50:22,736 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-01-31 18:50:22,737 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-01-31 18:50:22,737 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-01-31 18:50:22,737 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-01-31 18:50:22,737 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-01-31 18:50:22,737 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-01-31 18:50:22,737 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-01-31 18:50:22,737 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-01-31 18:50:22,737 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-01-31 18:50:22,738 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-01-31 18:50:22,738 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-01-31 18:50:22,738 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-01-31 18:50:22,738 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-01-31 18:50:22,738 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-01-31 18:50:22,738 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-01-31 18:50:22,738 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-01-31 18:50:22,739 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-01-31 18:50:22,739 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-01-31 18:50:22,739 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-01-31 18:50:22,739 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-01-31 18:50:22,739 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-01-31 18:50:22,739 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-01-31 18:50:22,739 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-01-31 18:50:22,740 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-01-31 18:50:22,740 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-01-31 18:50:22,740 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-01-31 18:50:22,740 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-01-31 18:50:22,740 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-01-31 18:50:22,748 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-01-31 18:50:22,748 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-01-31 18:50:22,748 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-01-31 18:50:22,750 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-31 18:50:22,766 - kings_builder - INFO - Checking for master admin user...
2026-01-31 18:50:22,770 - kings_builder - INFO - Checking for master admin user...
2026-01-31 18:50:22,904 - kings_builder - INFO - Checking for master admin user...
2026-01-31 18:51:15,812 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000']
2026-01-31 18:51:15,813 - kings_builder - INFO - Registering authentication routes...
2026-01-31 18:51:15,818 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-01-31 18:51:15,952 - kings_builder - INFO - Registered routes:
2026-01-31 18:51:15,952 - kings_builder - INFO -   {'GET', 'HEAD'} /openapi.json
2026-01-31 18:51:15,953 - kings_builder - INFO -   {'GET', 'HEAD'} /docs
2026-01-31 18:51:15,953 - kings_builder - INFO -   {'GET', 'HEAD'} /docs/oauth2-redirect
2026-01-31 18:51:15,953 - kings_builder - INFO -   {'GET', 'HEAD'} /redoc
2026-01-31 18:51:15,953 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-01-31 18:51:15,953 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-01-31 18:51:15,954 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-01-31 18:51:15,954 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-01-31 18:51:15,954 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-01-31 18:51:15,954 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-01-31 18:51:15,954 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-01-31 18:51:15,954 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-01-31 18:51:15,954 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-01-31 18:51:15,954 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-01-31 18:51:15,955 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-01-31 18:51:15,955 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-01-31 18:51:15,955 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-01-31 18:51:15,956 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-01-31 18:51:15,956 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-01-31 18:51:15,957 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-01-31 18:51:15,957 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-01-31 18:51:15,957 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-01-31 18:51:15,957 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-01-31 18:51:15,957 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-01-31 18:51:15,958 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-01-31 18:51:15,958 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-01-31 18:51:15,958 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-01-31 18:51:15,958 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-01-31 18:51:15,958 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-01-31 18:51:15,958 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-01-31 18:51:15,959 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-01-31 18:51:15,959 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-01-31 18:51:15,959 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-01-31 18:51:15,959 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-01-31 18:51:15,959 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-01-31 18:51:15,959 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-01-31 18:51:15,959 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-01-31 18:51:15,959 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-01-31 18:51:15,959 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-01-31 18:51:15,960 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-01-31 18:51:15,960 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-01-31 18:51:15,960 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-01-31 18:51:15,960 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-01-31 18:51:15,960 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-01-31 18:51:15,960 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-01-31 18:51:15,960 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-01-31 18:51:15,960 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-01-31 18:51:15,960 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-01-31 18:51:15,961 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-01-31 18:51:15,961 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-01-31 18:51:15,961 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-01-31 18:51:15,961 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-01-31 18:51:15,961 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-01-31 18:51:15,961 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-01-31 18:51:15,961 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-01-31 18:51:15,961 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-01-31 18:51:15,961 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-01-31 18:51:15,962 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-01-31 18:51:15,962 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-01-31 18:51:15,962 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-01-31 18:51:15,962 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-01-31 18:51:15,962 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-01-31 18:51:15,962 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-01-31 18:51:15,962 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-01-31 18:51:15,962 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-01-31 18:51:15,962 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-01-31 18:51:15,963 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-01-31 18:53:19,015 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:63037 USER_AGENT: curl/8.17.0
2026-01-31 18:53:19,348 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 18:53:19,454 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\relationships.py", line 2434, in _determine_joins
    self.primaryjoin = join_condition(
                       ~~~~~~~~~~~~~~^
        self.parent_persist_selectable,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        consider_as_foreign_keys=consider_as_foreign_keys,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\util.py", line 121, in join_condition
    return Join._join_condition(
           ~~~~~~~~~~~~~~~~~~~~^
        a,
        ^^
    ...<2 lines>...
        consider_as_foreign_keys=consider_as_foreign_keys,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\selectable.py", line 1441, in _join_condition
    cls._joincond_trim_constraints(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        a, b, constraints, consider_as_foreign_keys
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\selectable.py", line 1586, in _joincond_trim_constraints
    raise exc.AmbiguousForeignKeysError(
    ...<5 lines>...
    )
sqlalchemy.exc.AmbiguousForeignKeysError: Can't determine join between 'users' and 'builders'; tables have more than one foreign key constraint relationship between them. Please specify the 'onclause' of this join explicitly.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4268, in _do_configure_registries
    mapper._post_configure_properties()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2427, in _post_configure_properties
    prop.init()
    ~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\interfaces.py", line 595, in init
    self.do_init()
    ~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\relationships.py", line 1657, in do_init
    self._setup_join_conditions()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\relationships.py", line 1895, in _setup_join_conditions
    self._join_condition = jc = JoinCondition(
                                ~~~~~~~~~~~~~^
        parent_persist_selectable=self.parent.persist_selectable,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<14 lines>...
        can_be_synced_fn=self._columns_are_mapped,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\relationships.py", line 2321, in __init__
    self._determine_joins()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\relationships.py", line 2478, in _determine_joins
    raise sa_exc.AmbiguousForeignKeysError(
    ...<7 lines>...
    ) from afe
sqlalchemy.exc.AmbiguousForeignKeysError: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 18:53:49,852 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000']
2026-01-31 18:53:49,853 - kings_builder - INFO - Registering authentication routes...
2026-01-31 18:53:49,857 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-01-31 18:53:49,862 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000']
2026-01-31 18:53:49,863 - kings_builder - INFO - Registering authentication routes...
2026-01-31 18:53:49,873 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-01-31 18:53:49,878 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000']
2026-01-31 18:53:49,879 - kings_builder - INFO - Registering authentication routes...
2026-01-31 18:53:49,886 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-01-31 18:53:50,063 - kings_builder - INFO - Registered routes:
2026-01-31 18:53:50,063 - kings_builder - INFO -   {'HEAD', 'GET'} /openapi.json
2026-01-31 18:53:50,063 - kings_builder - INFO -   {'HEAD', 'GET'} /docs
2026-01-31 18:53:50,063 - kings_builder - INFO -   {'HEAD', 'GET'} /docs/oauth2-redirect
2026-01-31 18:53:50,064 - kings_builder - INFO -   {'HEAD', 'GET'} /redoc
2026-01-31 18:53:50,064 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-01-31 18:53:50,064 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-01-31 18:53:50,064 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-01-31 18:53:50,064 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-01-31 18:53:50,064 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-01-31 18:53:50,064 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-01-31 18:53:50,065 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-01-31 18:53:50,065 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-01-31 18:53:50,065 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-01-31 18:53:50,065 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-01-31 18:53:50,065 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-01-31 18:53:50,065 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-01-31 18:53:50,066 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-01-31 18:53:50,066 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-01-31 18:53:50,066 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-01-31 18:53:50,067 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-01-31 18:53:50,068 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-01-31 18:53:50,068 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-01-31 18:53:50,068 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-01-31 18:53:50,068 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-01-31 18:53:50,068 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-01-31 18:53:50,069 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-01-31 18:53:50,069 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-01-31 18:53:50,069 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-01-31 18:53:50,069 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-01-31 18:53:50,069 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-01-31 18:53:50,069 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-01-31 18:53:50,070 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-01-31 18:53:50,070 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-01-31 18:53:50,070 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-01-31 18:53:50,070 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-01-31 18:53:50,070 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-01-31 18:53:50,070 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-01-31 18:53:50,070 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-01-31 18:53:50,071 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-01-31 18:53:50,071 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-01-31 18:53:50,071 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-01-31 18:53:50,071 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-01-31 18:53:50,071 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-01-31 18:53:50,071 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-01-31 18:53:50,071 - kings_builder - INFO - Registered routes:
2026-01-31 18:53:50,071 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-01-31 18:53:50,071 - kings_builder - INFO -   {'HEAD', 'GET'} /openapi.json
2026-01-31 18:53:50,072 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-01-31 18:53:50,072 - kings_builder - INFO -   {'HEAD', 'GET'} /docs
2026-01-31 18:53:50,072 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-01-31 18:53:50,072 - kings_builder - INFO -   {'HEAD', 'GET'} /docs/oauth2-redirect
2026-01-31 18:53:50,072 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-01-31 18:53:50,072 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-01-31 18:53:50,072 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-01-31 18:53:50,072 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-01-31 18:53:50,072 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-01-31 18:53:50,072 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-01-31 18:53:50,072 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-01-31 18:53:50,072 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-01-31 18:53:50,073 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-01-31 18:53:50,073 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-01-31 18:53:50,073 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-01-31 18:53:50,073 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-01-31 18:53:50,073 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-01-31 18:53:50,073 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-01-31 18:53:50,073 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-01-31 18:53:50,073 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-01-31 18:53:50,073 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-01-31 18:53:50,073 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-01-31 18:53:50,073 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-01-31 18:53:50,073 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-01-31 18:53:50,073 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-01-31 18:53:50,073 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-01-31 18:53:50,073 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-01-31 18:53:50,074 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-01-31 18:53:50,074 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-01-31 18:53:50,074 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-01-31 18:53:50,074 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-01-31 18:53:50,074 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-01-31 18:53:50,074 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-01-31 18:53:50,074 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-01-31 18:53:50,074 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-01-31 18:53:50,074 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-01-31 18:53:50,074 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-01-31 18:53:50,074 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-01-31 18:53:50,074 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-01-31 18:53:50,074 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-01-31 18:53:50,074 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-01-31 18:53:50,074 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-01-31 18:53:50,074 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-01-31 18:53:50,075 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-01-31 18:53:50,075 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-01-31 18:53:50,075 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-01-31 18:53:50,075 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-01-31 18:53:50,075 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-01-31 18:53:50,075 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-01-31 18:53:50,075 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-01-31 18:53:50,076 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-01-31 18:53:50,076 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-01-31 18:53:50,076 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-01-31 18:53:50,076 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-01-31 18:53:50,076 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-31 18:53:50,076 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-01-31 18:53:50,076 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-01-31 18:53:50,076 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-01-31 18:53:50,077 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-01-31 18:53:50,077 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-01-31 18:53:50,077 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-01-31 18:53:50,077 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-01-31 18:53:50,077 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-01-31 18:53:50,077 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-01-31 18:53:50,077 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-01-31 18:53:50,077 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-01-31 18:53:50,078 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-01-31 18:53:50,078 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-01-31 18:53:50,078 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-01-31 18:53:50,078 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-01-31 18:53:50,078 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-01-31 18:53:50,078 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-01-31 18:53:50,079 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-01-31 18:53:50,079 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-01-31 18:53:50,079 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-01-31 18:53:50,079 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-01-31 18:53:50,079 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-01-31 18:53:50,079 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-01-31 18:53:50,079 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-01-31 18:53:50,079 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-01-31 18:53:50,080 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-01-31 18:53:50,080 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-01-31 18:53:50,080 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-01-31 18:53:50,080 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-01-31 18:53:50,080 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-01-31 18:53:50,080 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-01-31 18:53:50,080 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-01-31 18:53:50,083 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-31 18:53:50,107 - kings_builder - INFO - Registered routes:
2026-01-31 18:53:50,108 - kings_builder - INFO -   {'GET', 'HEAD'} /openapi.json
2026-01-31 18:53:50,108 - kings_builder - INFO -   {'GET', 'HEAD'} /docs
2026-01-31 18:53:50,108 - kings_builder - INFO -   {'GET', 'HEAD'} /docs/oauth2-redirect
2026-01-31 18:53:50,108 - kings_builder - INFO -   {'GET', 'HEAD'} /redoc
2026-01-31 18:53:50,108 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-01-31 18:53:50,108 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-01-31 18:53:50,109 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-01-31 18:53:50,109 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-01-31 18:53:50,109 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-01-31 18:53:50,109 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-01-31 18:53:50,109 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-01-31 18:53:50,109 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-01-31 18:53:50,110 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-01-31 18:53:50,110 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-01-31 18:53:50,110 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-01-31 18:53:50,110 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-01-31 18:53:50,110 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-01-31 18:53:50,110 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-01-31 18:53:50,110 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-01-31 18:53:50,111 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-01-31 18:53:50,111 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-01-31 18:53:50,111 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-01-31 18:53:50,111 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-01-31 18:53:50,111 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-01-31 18:53:50,111 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-01-31 18:53:50,111 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-01-31 18:53:50,112 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-01-31 18:53:50,112 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-01-31 18:53:50,112 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-01-31 18:53:50,112 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-01-31 18:53:50,112 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-01-31 18:53:50,112 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-01-31 18:53:50,112 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-01-31 18:53:50,113 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-01-31 18:53:50,113 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-01-31 18:53:50,113 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-01-31 18:53:50,113 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-01-31 18:53:50,113 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-01-31 18:53:50,113 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-01-31 18:53:50,113 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-01-31 18:53:50,114 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-01-31 18:53:50,114 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-01-31 18:53:50,114 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-01-31 18:53:50,114 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-01-31 18:53:50,114 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-01-31 18:53:50,114 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-01-31 18:53:50,114 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-01-31 18:53:50,115 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-01-31 18:53:50,115 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-01-31 18:53:50,115 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-01-31 18:53:50,115 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-01-31 18:53:50,115 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-01-31 18:53:50,118 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-01-31 18:53:50,118 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-01-31 18:53:50,118 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-01-31 18:53:50,118 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-01-31 18:53:50,118 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-01-31 18:53:50,118 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-01-31 18:53:50,119 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-01-31 18:53:50,119 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-01-31 18:53:50,119 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-01-31 18:53:50,119 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-01-31 18:53:50,120 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-01-31 18:53:50,120 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-01-31 18:53:50,120 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-01-31 18:53:50,120 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-01-31 18:53:50,120 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-01-31 18:53:50,122 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-31 18:53:50,173 - kings_builder - INFO - Checking for master admin user...
2026-01-31 18:53:50,189 - kings_builder - INFO - Checking for master admin user...
2026-01-31 18:53:50,192 - kings_builder - INFO - Checking for master admin user...
2026-01-31 18:54:50,579 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000']
2026-01-31 18:54:50,580 - kings_builder - INFO - Registering authentication routes...
2026-01-31 18:54:50,585 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-01-31 18:54:50,639 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000']
2026-01-31 18:54:50,640 - kings_builder - INFO - Registering authentication routes...
2026-01-31 18:54:50,645 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-01-31 18:54:50,764 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000']
2026-01-31 18:54:50,764 - kings_builder - INFO - Registering authentication routes...
2026-01-31 18:54:50,767 - kings_builder - INFO - Registered routes:
2026-01-31 18:54:50,767 - kings_builder - INFO -   {'GET', 'HEAD'} /openapi.json
2026-01-31 18:54:50,767 - kings_builder - INFO -   {'GET', 'HEAD'} /docs
2026-01-31 18:54:50,768 - kings_builder - INFO -   {'GET', 'HEAD'} /docs/oauth2-redirect
2026-01-31 18:54:50,768 - kings_builder - INFO -   {'GET', 'HEAD'} /redoc
2026-01-31 18:54:50,768 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-01-31 18:54:50,768 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-01-31 18:54:50,768 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-01-31 18:54:50,768 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-01-31 18:54:50,768 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-01-31 18:54:50,769 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-01-31 18:54:50,769 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-01-31 18:54:50,769 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-01-31 18:54:50,769 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-01-31 18:54:50,769 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-01-31 18:54:50,770 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-01-31 18:54:50,770 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-01-31 18:54:50,770 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-01-31 18:54:50,771 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-01-31 18:54:50,771 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-01-31 18:54:50,771 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-01-31 18:54:50,771 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-01-31 18:54:50,771 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-01-31 18:54:50,771 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-01-31 18:54:50,771 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-01-31 18:54:50,772 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-01-31 18:54:50,772 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-01-31 18:54:50,772 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-01-31 18:54:50,772 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-01-31 18:54:50,772 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-01-31 18:54:50,772 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-01-31 18:54:50,772 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-01-31 18:54:50,773 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-01-31 18:54:50,773 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-01-31 18:54:50,773 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-01-31 18:54:50,773 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-01-31 18:54:50,773 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-01-31 18:54:50,773 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-01-31 18:54:50,773 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-01-31 18:54:50,774 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-01-31 18:54:50,774 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-01-31 18:54:50,774 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-01-31 18:54:50,774 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-01-31 18:54:50,774 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-01-31 18:54:50,774 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-01-31 18:54:50,774 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-01-31 18:54:50,775 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-01-31 18:54:50,775 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-01-31 18:54:50,775 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-01-31 18:54:50,775 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-01-31 18:54:50,775 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-01-31 18:54:50,775 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-01-31 18:54:50,775 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-01-31 18:54:50,775 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-01-31 18:54:50,776 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-01-31 18:54:50,776 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-01-31 18:54:50,776 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-01-31 18:54:50,776 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-01-31 18:54:50,776 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-01-31 18:54:50,776 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-01-31 18:54:50,776 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-01-31 18:54:50,777 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-01-31 18:54:50,777 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-01-31 18:54:50,777 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-01-31 18:54:50,777 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-01-31 18:54:50,777 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-01-31 18:54:50,777 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-01-31 18:54:50,778 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-01-31 18:54:50,778 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-01-31 18:54:50,779 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-31 18:54:50,803 - kings_builder - INFO - Registered routes:
2026-01-31 18:54:50,803 - kings_builder - INFO -   {'GET', 'HEAD'} /openapi.json
2026-01-31 18:54:50,804 - kings_builder - INFO -   {'GET', 'HEAD'} /docs
2026-01-31 18:54:50,804 - kings_builder - INFO -   {'GET', 'HEAD'} /docs/oauth2-redirect
2026-01-31 18:54:50,804 - kings_builder - INFO -   {'GET', 'HEAD'} /redoc
2026-01-31 18:54:50,804 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-01-31 18:54:50,804 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-01-31 18:54:50,804 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-01-31 18:54:50,805 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-01-31 18:54:50,805 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-01-31 18:54:50,805 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-01-31 18:54:50,805 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-01-31 18:54:50,805 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-01-31 18:54:50,805 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-01-31 18:54:50,805 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-01-31 18:54:50,806 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-01-31 18:54:50,806 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-01-31 18:54:50,806 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-01-31 18:54:50,806 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-01-31 18:54:50,806 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-01-31 18:54:50,806 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-01-31 18:54:50,806 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-01-31 18:54:50,807 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-01-31 18:54:50,807 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-01-31 18:54:50,807 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-01-31 18:54:50,807 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-01-31 18:54:50,807 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-01-31 18:54:50,807 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-01-31 18:54:50,807 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-01-31 18:54:50,808 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-01-31 18:54:50,808 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-01-31 18:54:50,808 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-01-31 18:54:50,808 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-01-31 18:54:50,808 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-01-31 18:54:50,808 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-01-31 18:54:50,808 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-01-31 18:54:50,809 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-01-31 18:54:50,809 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-01-31 18:54:50,809 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-01-31 18:54:50,809 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-01-31 18:54:50,809 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-01-31 18:54:50,809 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-01-31 18:54:50,809 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-01-31 18:54:50,810 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-01-31 18:54:50,810 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-01-31 18:54:50,810 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-01-31 18:54:50,810 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-01-31 18:54:50,810 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-01-31 18:54:50,810 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-01-31 18:54:50,810 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-01-31 18:54:50,811 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-01-31 18:54:50,811 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-01-31 18:54:50,811 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-01-31 18:54:50,811 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-01-31 18:54:50,811 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-01-31 18:54:50,811 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-01-31 18:54:50,811 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-01-31 18:54:50,812 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-01-31 18:54:50,812 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-01-31 18:54:50,812 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-01-31 18:54:50,812 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-01-31 18:54:50,812 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-01-31 18:54:50,812 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-01-31 18:54:50,812 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-01-31 18:54:50,813 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-01-31 18:54:50,813 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-01-31 18:54:50,813 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-01-31 18:54:50,813 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-01-31 18:54:50,815 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-31 18:54:50,917 - kings_builder - INFO - Checking for master admin user...
2026-01-31 18:54:50,951 - kings_builder - INFO - Checking for master admin user...
2026-01-31 18:54:50,987 - kings_builder - INFO - Registered routes:
2026-01-31 18:54:50,987 - kings_builder - INFO -   {'GET', 'HEAD'} /openapi.json
2026-01-31 18:54:50,988 - kings_builder - INFO -   {'GET', 'HEAD'} /docs
2026-01-31 18:54:50,988 - kings_builder - INFO -   {'GET', 'HEAD'} /docs/oauth2-redirect
2026-01-31 18:54:50,988 - kings_builder - INFO -   {'GET', 'HEAD'} /redoc
2026-01-31 18:54:50,988 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-01-31 18:54:50,988 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-01-31 18:54:50,988 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-01-31 18:54:50,989 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-01-31 18:54:50,989 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-01-31 18:54:50,989 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-01-31 18:54:50,989 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-01-31 18:54:50,989 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-01-31 18:54:50,989 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-01-31 18:54:50,989 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-01-31 18:54:50,990 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-01-31 18:54:50,990 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-01-31 18:54:50,990 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-01-31 18:54:50,991 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-01-31 18:54:50,991 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-01-31 18:54:50,991 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-01-31 18:54:50,991 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-01-31 18:54:50,991 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-01-31 18:54:50,991 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-01-31 18:54:50,991 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-01-31 18:54:50,992 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-01-31 18:54:50,992 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-01-31 18:54:50,992 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-01-31 18:54:50,992 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-01-31 18:54:50,992 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-01-31 18:54:50,992 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-01-31 18:54:50,992 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-01-31 18:54:50,993 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-01-31 18:54:50,993 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-01-31 18:54:50,993 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-01-31 18:54:50,993 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-01-31 18:54:50,993 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-01-31 18:54:50,993 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-01-31 18:54:50,993 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-01-31 18:54:50,994 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-01-31 18:54:50,994 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-01-31 18:54:50,994 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-01-31 18:54:50,994 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-01-31 18:54:50,994 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-01-31 18:54:50,994 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-01-31 18:54:50,994 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-01-31 18:54:50,995 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-01-31 18:54:51,001 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-01-31 18:54:51,001 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-01-31 18:54:51,001 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-01-31 18:54:51,002 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-01-31 18:54:51,002 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-01-31 18:54:51,002 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-01-31 18:54:51,002 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-01-31 18:54:51,002 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-01-31 18:54:51,002 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-01-31 18:54:51,002 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-01-31 18:54:51,003 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-01-31 18:54:51,003 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-01-31 18:54:51,003 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-01-31 18:54:51,003 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-01-31 18:54:51,003 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-01-31 18:54:51,004 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-01-31 18:54:51,004 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-01-31 18:54:51,004 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-01-31 18:54:51,004 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-01-31 18:54:51,004 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-01-31 18:54:51,004 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-01-31 18:54:51,006 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-31 18:54:51,172 - kings_builder - INFO - Checking for master admin user...
2026-01-31 18:55:11,328 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000']
2026-01-31 18:55:11,328 - kings_builder - INFO - Registering authentication routes...
2026-01-31 18:55:11,336 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-01-31 18:55:11,494 - kings_builder - INFO - Registered routes:
2026-01-31 18:55:11,495 - kings_builder - INFO -   {'GET', 'HEAD'} /openapi.json
2026-01-31 18:55:11,495 - kings_builder - INFO -   {'GET', 'HEAD'} /docs
2026-01-31 18:55:11,495 - kings_builder - INFO -   {'GET', 'HEAD'} /docs/oauth2-redirect
2026-01-31 18:55:11,495 - kings_builder - INFO -   {'GET', 'HEAD'} /redoc
2026-01-31 18:55:11,495 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-01-31 18:55:11,495 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-01-31 18:55:11,495 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-01-31 18:55:11,495 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-01-31 18:55:11,495 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-01-31 18:55:11,496 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-01-31 18:55:11,496 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-01-31 18:55:11,496 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-01-31 18:55:11,496 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-01-31 18:55:11,496 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-01-31 18:55:11,496 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-01-31 18:55:11,496 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-01-31 18:55:11,496 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-01-31 18:55:11,496 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-01-31 18:55:11,496 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-01-31 18:55:11,497 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-01-31 18:55:11,497 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-01-31 18:55:11,497 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-01-31 18:55:11,497 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-01-31 18:55:11,497 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-01-31 18:55:11,497 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-01-31 18:55:11,497 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-01-31 18:55:11,497 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-01-31 18:55:11,497 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-01-31 18:55:11,497 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-01-31 18:55:11,498 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-01-31 18:55:11,498 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-01-31 18:55:11,498 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-01-31 18:55:11,498 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-01-31 18:55:11,498 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-01-31 18:55:11,498 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-01-31 18:55:11,498 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-01-31 18:55:11,498 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-01-31 18:55:11,498 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-01-31 18:55:11,498 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-01-31 18:55:11,499 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-01-31 18:55:11,499 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-01-31 18:55:11,499 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-01-31 18:55:11,500 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-01-31 18:55:11,500 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-01-31 18:55:11,501 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-01-31 18:55:11,501 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-01-31 18:55:11,501 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-01-31 18:55:11,501 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-01-31 18:55:11,501 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-01-31 18:55:11,501 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-01-31 18:55:11,501 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-01-31 18:55:11,501 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-01-31 18:55:11,501 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-01-31 18:55:11,502 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-01-31 18:55:11,502 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-01-31 18:55:11,503 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-01-31 18:55:11,503 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-01-31 18:55:11,503 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-01-31 18:55:11,504 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-01-31 18:55:11,504 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-01-31 18:55:11,504 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-01-31 18:55:11,504 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-01-31 18:55:11,504 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-01-31 18:55:11,505 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-01-31 18:55:11,505 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-01-31 18:55:11,505 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-01-31 18:55:11,505 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-01-31 19:05:56,367 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:63176 USER_AGENT: curl/8.17.0
2026-01-31 19:05:56,436 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 19:05:56,510 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\relationships.py", line 2434, in _determine_joins
    self.primaryjoin = join_condition(
                       ~~~~~~~~~~~~~~^
        self.parent_persist_selectable,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        consider_as_foreign_keys=consider_as_foreign_keys,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\util.py", line 121, in join_condition
    return Join._join_condition(
           ~~~~~~~~~~~~~~~~~~~~^
        a,
        ^^
    ...<2 lines>...
        consider_as_foreign_keys=consider_as_foreign_keys,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\selectable.py", line 1441, in _join_condition
    cls._joincond_trim_constraints(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        a, b, constraints, consider_as_foreign_keys
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\selectable.py", line 1586, in _joincond_trim_constraints
    raise exc.AmbiguousForeignKeysError(
    ...<5 lines>...
    )
sqlalchemy.exc.AmbiguousForeignKeysError: Can't determine join between 'users' and 'builders'; tables have more than one foreign key constraint relationship between them. Please specify the 'onclause' of this join explicitly.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4268, in _do_configure_registries
    mapper._post_configure_properties()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2427, in _post_configure_properties
    prop.init()
    ~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\interfaces.py", line 595, in init
    self.do_init()
    ~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\relationships.py", line 1657, in do_init
    self._setup_join_conditions()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\relationships.py", line 1895, in _setup_join_conditions
    self._join_condition = jc = JoinCondition(
                                ~~~~~~~~~~~~~^
        parent_persist_selectable=self.parent.persist_selectable,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<14 lines>...
        can_be_synced_fn=self._columns_are_mapped,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\relationships.py", line 2321, in __init__
    self._determine_joins()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\relationships.py", line 2478, in _determine_joins
    raise sa_exc.AmbiguousForeignKeysError(
    ...<7 lines>...
    ) from afe
sqlalchemy.exc.AmbiguousForeignKeysError: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 19:08:30,913 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:63219 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 19:08:33,337 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 19:08:33,373 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 19:08:38,691 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:63221 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 19:08:40,224 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 19:08:40,281 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 19:08:41,233 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:63225 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 19:08:42,937 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 19:08:42,957 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 19:08:43,233 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:63227 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 19:08:44,745 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 19:08:44,766 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 19:08:47,087 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:63231 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 19:08:47,801 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:63233 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 19:08:48,704 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 19:08:48,725 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 19:08:48,808 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:63237 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 19:08:49,392 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 19:08:49,430 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 19:08:49,531 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:63239 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 19:08:50,455 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 19:08:50,481 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 19:08:51,282 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 19:08:51,319 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 19:20:39,180 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:63381 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 19:20:42,463 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 19:20:42,499 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 19:20:46,634 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:63382 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 19:20:48,274 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:63386 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 19:20:48,320 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 19:20:48,342 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 19:20:49,958 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 19:20:49,998 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 19:21:00,927 - kings_builder - INFO - REQUEST: GET /docs FROM: 127.0.0.1:63395 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 19:21:00,933 - kings_builder - INFO - RESPONSE: 200 for GET /docs DURATION: 0.006s
2026-01-31 19:21:01,192 - kings_builder - INFO - REQUEST: GET /openapi.json FROM: 127.0.0.1:63395 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 19:21:01,211 - kings_builder - INFO - RESPONSE: 200 for GET /openapi.json DURATION: 0.019s
2026-01-31 19:21:11,182 - kings_builder - INFO - REQUEST: GET /docs FROM: 127.0.0.1:63396 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 19:21:11,184 - kings_builder - INFO - RESPONSE: 200 for GET /docs DURATION: 0.002s
2026-01-31 19:21:11,322 - kings_builder - INFO - REQUEST: GET /openapi.json FROM: 127.0.0.1:63396 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 19:21:11,328 - kings_builder - INFO - RESPONSE: 200 for GET /openapi.json DURATION: 0.005s
2026-01-31 19:21:16,671 - kings_builder - INFO - REQUEST: GET /docs FROM: 127.0.0.1:63397 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 19:21:16,671 - kings_builder - INFO - RESPONSE: 200 for GET /docs DURATION: 0.001s
2026-01-31 19:21:16,771 - kings_builder - INFO - REQUEST: GET /openapi.json FROM: 127.0.0.1:63397 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 19:21:16,776 - kings_builder - INFO - RESPONSE: 200 for GET /openapi.json DURATION: 0.004s
2026-01-31 19:21:29,002 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:63421 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 19:21:30,632 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 19:21:30,660 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 19:21:31,981 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:63423 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 19:21:33,837 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 19:21:33,861 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 19:21:56,464 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:63408 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 19:21:58,098 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 19:21:58,128 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 19:24:01,136 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:63494 USER_AGENT: Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Mobile Safari/537.36
2026-01-31 19:24:02,737 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 19:24:02,780 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 19:24:20,191 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:63496 USER_AGENT: Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Mobile Safari/537.36
2026-01-31 19:24:21,801 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 19:24:21,831 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 19:24:42,439 - kings_builder - INFO - REQUEST: GET /api/v1/auth/login FROM: 127.0.0.1:63534 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 19:24:42,447 - kings_builder - ERROR - HTTP Exception: 405 - Method Not Allowed
2026-01-31 19:24:42,448 - kings_builder - INFO - RESPONSE: 405 for GET /api/v1/auth/login DURATION: 0.008s
2026-01-31 19:27:31,766 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:63657 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 19:27:35,686 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 19:27:35,698 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 19:27:49,418 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:63670 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 19:27:50,944 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 19:27:50,958 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 19:28:22,211 - kings_builder - INFO - REQUEST: GET /health FROM: 127.0.0.1:63703 USER_AGENT: python-requests/2.31.0
2026-01-31 19:28:22,217 - kings_builder - INFO - RESPONSE: 200 for GET /health DURATION: 0.008s
2026-01-31 19:28:24,264 - kings_builder - INFO - REQUEST: OPTIONS /api/v1/auth/login FROM: 127.0.0.1:63706 USER_AGENT: python-requests/2.31.0
2026-01-31 19:28:24,265 - kings_builder - ERROR - HTTP Exception: 405 - Method Not Allowed
2026-01-31 19:28:24,265 - kings_builder - INFO - RESPONSE: 405 for OPTIONS /api/v1/auth/login DURATION: 0.001s
2026-01-31 19:28:26,310 - kings_builder - INFO - REQUEST: GET /api/v1/auth/login FROM: 127.0.0.1:63709 USER_AGENT: python-requests/2.31.0
2026-01-31 19:28:26,310 - kings_builder - ERROR - HTTP Exception: 405 - Method Not Allowed
2026-01-31 19:28:26,311 - kings_builder - INFO - RESPONSE: 405 for GET /api/v1/auth/login DURATION: 0.001s
2026-01-31 19:28:28,352 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:63714 USER_AGENT: python-requests/2.31.0
2026-01-31 19:28:29,871 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 19:28:29,886 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 19:29:59,285 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000']
2026-01-31 19:29:59,286 - kings_builder - INFO - Registering authentication routes...
2026-01-31 19:29:59,289 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-01-31 19:29:59,412 - kings_builder - INFO - Registered routes:
2026-01-31 19:29:59,412 - kings_builder - INFO -   {'GET', 'HEAD'} /openapi.json
2026-01-31 19:29:59,412 - kings_builder - INFO -   {'GET', 'HEAD'} /docs
2026-01-31 19:29:59,412 - kings_builder - INFO -   {'GET', 'HEAD'} /docs/oauth2-redirect
2026-01-31 19:29:59,412 - kings_builder - INFO -   {'GET', 'HEAD'} /redoc
2026-01-31 19:29:59,413 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-01-31 19:29:59,413 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-01-31 19:29:59,413 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-01-31 19:29:59,413 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-01-31 19:29:59,413 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-01-31 19:29:59,413 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-01-31 19:29:59,413 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-01-31 19:29:59,413 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-01-31 19:29:59,414 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-01-31 19:29:59,414 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-01-31 19:29:59,414 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-01-31 19:29:59,414 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-01-31 19:29:59,414 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-01-31 19:29:59,414 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-01-31 19:29:59,414 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-01-31 19:29:59,414 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-01-31 19:29:59,414 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-01-31 19:29:59,415 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-01-31 19:29:59,415 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-01-31 19:29:59,415 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-01-31 19:29:59,415 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-01-31 19:29:59,415 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-01-31 19:29:59,415 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-01-31 19:29:59,415 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-01-31 19:29:59,415 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-01-31 19:29:59,416 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-01-31 19:29:59,416 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-01-31 19:29:59,416 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-01-31 19:29:59,416 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-01-31 19:29:59,416 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-01-31 19:29:59,416 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-01-31 19:29:59,416 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-01-31 19:29:59,417 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-01-31 19:29:59,417 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-01-31 19:29:59,417 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-01-31 19:29:59,417 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-01-31 19:29:59,417 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-01-31 19:29:59,417 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-01-31 19:29:59,417 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-01-31 19:29:59,418 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-01-31 19:29:59,418 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-01-31 19:29:59,418 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-01-31 19:29:59,418 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-01-31 19:29:59,418 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-01-31 19:29:59,418 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-01-31 19:29:59,418 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-01-31 19:29:59,419 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-01-31 19:29:59,419 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-01-31 19:29:59,419 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-01-31 19:29:59,419 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-01-31 19:29:59,420 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-01-31 19:29:59,428 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-01-31 19:29:59,428 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-01-31 19:29:59,428 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-01-31 19:29:59,428 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-01-31 19:29:59,428 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-01-31 19:29:59,429 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-01-31 19:29:59,429 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-01-31 19:29:59,429 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-01-31 19:29:59,429 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-01-31 19:29:59,429 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-01-31 19:29:59,429 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-01-31 19:29:59,429 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-01-31 19:30:22,082 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:63808 USER_AGENT: curl/8.17.0
2026-01-31 19:30:22,162 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 19:30:22,223 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\relationships.py", line 2434, in _determine_joins
    self.primaryjoin = join_condition(
                       ~~~~~~~~~~~~~~^
        self.parent_persist_selectable,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        consider_as_foreign_keys=consider_as_foreign_keys,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\util.py", line 121, in join_condition
    return Join._join_condition(
           ~~~~~~~~~~~~~~~~~~~~^
        a,
        ^^
    ...<2 lines>...
        consider_as_foreign_keys=consider_as_foreign_keys,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\selectable.py", line 1441, in _join_condition
    cls._joincond_trim_constraints(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        a, b, constraints, consider_as_foreign_keys
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\selectable.py", line 1586, in _joincond_trim_constraints
    raise exc.AmbiguousForeignKeysError(
    ...<5 lines>...
    )
sqlalchemy.exc.AmbiguousForeignKeysError: Can't determine join between 'users' and 'builders'; tables have more than one foreign key constraint relationship between them. Please specify the 'onclause' of this join explicitly.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4268, in _do_configure_registries
    mapper._post_configure_properties()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2427, in _post_configure_properties
    prop.init()
    ~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\interfaces.py", line 595, in init
    self.do_init()
    ~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\relationships.py", line 1657, in do_init
    self._setup_join_conditions()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\relationships.py", line 1895, in _setup_join_conditions
    self._join_condition = jc = JoinCondition(
                                ~~~~~~~~~~~~~^
        parent_persist_selectable=self.parent.persist_selectable,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<14 lines>...
        can_be_synced_fn=self._columns_are_mapped,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\relationships.py", line 2321, in __init__
    self._determine_joins()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\relationships.py", line 2478, in _determine_joins
    raise sa_exc.AmbiguousForeignKeysError(
    ...<7 lines>...
    ) from afe
sqlalchemy.exc.AmbiguousForeignKeysError: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 19:32:09,726 - kings_builder - INFO - REQUEST: GET /health FROM: 127.0.0.1:63900 USER_AGENT: python-requests/2.31.0
2026-01-31 19:32:09,727 - kings_builder - INFO - RESPONSE: 200 for GET /health DURATION: 0.001s
2026-01-31 19:32:11,775 - kings_builder - INFO - REQUEST: OPTIONS /api/v1/auth/login FROM: 127.0.0.1:63902 USER_AGENT: python-requests/2.31.0
2026-01-31 19:32:11,776 - kings_builder - ERROR - HTTP Exception: 405 - Method Not Allowed
2026-01-31 19:32:11,777 - kings_builder - INFO - RESPONSE: 405 for OPTIONS /api/v1/auth/login DURATION: 0.001s
2026-01-31 19:32:13,813 - kings_builder - INFO - REQUEST: GET /api/v1/auth/login FROM: 127.0.0.1:63905 USER_AGENT: python-requests/2.31.0
2026-01-31 19:32:13,813 - kings_builder - ERROR - HTTP Exception: 405 - Method Not Allowed
2026-01-31 19:32:13,814 - kings_builder - INFO - RESPONSE: 405 for GET /api/v1/auth/login DURATION: 0.001s
2026-01-31 19:32:15,846 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:63908 USER_AGENT: python-requests/2.31.0
2026-01-31 19:32:15,853 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 19:32:15,871 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 19:33:01,795 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:63956 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 19:33:05,713 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 19:33:05,752 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 19:33:06,424 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:63963 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 19:33:07,998 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 19:33:08,023 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 19:34:07,930 - kings_builder - INFO - REQUEST: GET /api/v1/auth/login FROM: 127.0.0.1:64013 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 19:34:07,931 - kings_builder - ERROR - HTTP Exception: 405 - Method Not Allowed
2026-01-31 19:34:07,932 - kings_builder - INFO - RESPONSE: 405 for GET /api/v1/auth/login DURATION: 0.002s
2026-01-31 19:34:14,547 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:64024 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 19:34:16,064 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 19:34:16,103 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 19:35:00,778 - kings_builder - INFO - REQUEST: GET /api/v1/auth/login FROM: 127.0.0.1:64060 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 19:35:00,780 - kings_builder - ERROR - HTTP Exception: 405 - Method Not Allowed
2026-01-31 19:35:00,781 - kings_builder - INFO - RESPONSE: 405 for GET /api/v1/auth/login DURATION: 0.003s
2026-01-31 19:35:00,828 - kings_builder - INFO - REQUEST: GET /favicon.ico FROM: 127.0.0.1:64060 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 19:35:00,829 - kings_builder - ERROR - HTTP Exception: 404 - Not Found
2026-01-31 19:35:00,829 - kings_builder - INFO - RESPONSE: 404 for GET /favicon.ico DURATION: 0.002s
2026-01-31 19:35:25,876 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:64080 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 19:35:27,539 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 19:35:27,549 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 19:35:59,910 - kings_builder - INFO - REQUEST: GET /api/v1/auth/login FROM: 127.0.0.1:64110 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 19:35:59,912 - kings_builder - ERROR - HTTP Exception: 405 - Method Not Allowed
2026-01-31 19:35:59,913 - kings_builder - INFO - RESPONSE: 405 for GET /api/v1/auth/login DURATION: 0.002s
2026-01-31 19:36:06,344 - kings_builder - INFO - REQUEST: GET /api/v1/auth/login FROM: 127.0.0.1:64122 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 19:36:06,345 - kings_builder - ERROR - HTTP Exception: 405 - Method Not Allowed
2026-01-31 19:36:06,345 - kings_builder - INFO - RESPONSE: 405 for GET /api/v1/auth/login DURATION: 0.002s
2026-01-31 19:36:11,955 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:64130 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 19:36:13,547 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 19:36:13,557 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 19:38:57,179 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:64235 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 19:39:01,787 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 19:39:01,822 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 20:24:33,986 - kings_builder - INFO - REQUEST: GET /docs FROM: 127.0.0.1:49719 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 20:24:33,998 - kings_builder - INFO - RESPONSE: 200 for GET /docs DURATION: 0.013s
2026-01-31 20:24:34,326 - kings_builder - INFO - REQUEST: GET /openapi.json FROM: 127.0.0.1:49719 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 20:24:34,338 - kings_builder - INFO - RESPONSE: 200 for GET /openapi.json DURATION: 0.012s
2026-01-31 20:24:46,013 - kings_builder - INFO - REQUEST: GET /docs FROM: 127.0.0.1:49720 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 20:24:46,016 - kings_builder - INFO - RESPONSE: 200 for GET /docs DURATION: 0.003s
2026-01-31 20:24:46,324 - kings_builder - INFO - REQUEST: GET /openapi.json FROM: 127.0.0.1:49720 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 20:24:46,328 - kings_builder - INFO - RESPONSE: 200 for GET /openapi.json DURATION: 0.004s
2026-01-31 20:29:24,414 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000']
2026-01-31 20:29:24,415 - kings_builder - INFO - Registering authentication routes...
2026-01-31 20:29:24,421 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-01-31 20:29:24,615 - kings_builder - INFO - Registered routes:
2026-01-31 20:29:24,615 - kings_builder - INFO -   {'GET', 'HEAD'} /openapi.json
2026-01-31 20:29:24,616 - kings_builder - INFO -   {'GET', 'HEAD'} /docs
2026-01-31 20:29:24,616 - kings_builder - INFO -   {'GET', 'HEAD'} /docs/oauth2-redirect
2026-01-31 20:29:24,616 - kings_builder - INFO -   {'GET', 'HEAD'} /redoc
2026-01-31 20:29:24,616 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-01-31 20:29:24,616 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-01-31 20:29:24,616 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-01-31 20:29:24,616 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-01-31 20:29:24,617 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-01-31 20:29:24,617 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-01-31 20:29:24,617 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-01-31 20:29:24,617 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-01-31 20:29:24,617 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-01-31 20:29:24,617 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-01-31 20:29:24,620 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-01-31 20:29:24,620 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-01-31 20:29:24,620 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-01-31 20:29:24,621 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-01-31 20:29:24,621 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-01-31 20:29:24,621 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-01-31 20:29:24,622 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-01-31 20:29:24,623 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-01-31 20:29:24,623 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-01-31 20:29:24,623 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-01-31 20:29:24,623 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-01-31 20:29:24,623 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-01-31 20:29:24,624 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-01-31 20:29:24,624 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-01-31 20:29:24,624 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-01-31 20:29:24,624 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-01-31 20:29:24,624 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-01-31 20:29:24,624 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-01-31 20:29:24,624 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-01-31 20:29:24,625 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-01-31 20:29:24,625 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-01-31 20:29:24,625 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-01-31 20:29:24,625 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-01-31 20:29:24,625 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-01-31 20:29:24,625 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-01-31 20:29:24,626 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-01-31 20:29:24,626 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-01-31 20:29:24,626 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-01-31 20:29:24,627 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-01-31 20:29:24,627 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-01-31 20:29:24,627 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-01-31 20:29:24,627 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-01-31 20:29:24,627 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-01-31 20:29:24,627 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-01-31 20:29:24,627 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-01-31 20:29:24,627 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-01-31 20:29:24,628 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-01-31 20:29:24,628 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-01-31 20:29:24,628 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-01-31 20:29:24,628 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-01-31 20:29:24,628 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-01-31 20:29:24,628 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-01-31 20:29:24,628 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-01-31 20:29:24,629 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-01-31 20:29:24,629 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-01-31 20:29:24,629 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-01-31 20:29:24,629 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-01-31 20:29:24,629 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-01-31 20:29:24,629 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-01-31 20:29:24,629 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-01-31 20:29:24,629 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-01-31 20:29:24,630 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-01-31 20:29:24,630 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-01-31 20:29:24,632 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-31 20:29:24,723 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000']
2026-01-31 20:29:24,724 - kings_builder - INFO - Registering authentication routes...
2026-01-31 20:29:24,728 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-01-31 20:29:24,757 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000']
2026-01-31 20:29:24,757 - kings_builder - INFO - Registering authentication routes...
2026-01-31 20:29:24,765 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-01-31 20:29:24,775 - kings_builder - INFO - Checking for master admin user...
2026-01-31 20:29:24,929 - kings_builder - INFO - Registered routes:
2026-01-31 20:29:24,929 - kings_builder - INFO -   {'GET', 'HEAD'} /openapi.json
2026-01-31 20:29:24,930 - kings_builder - INFO -   {'GET', 'HEAD'} /docs
2026-01-31 20:29:24,930 - kings_builder - INFO -   {'GET', 'HEAD'} /docs/oauth2-redirect
2026-01-31 20:29:24,930 - kings_builder - INFO -   {'GET', 'HEAD'} /redoc
2026-01-31 20:29:24,930 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-01-31 20:29:24,931 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-01-31 20:29:24,931 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-01-31 20:29:24,931 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-01-31 20:29:24,931 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-01-31 20:29:24,931 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-01-31 20:29:24,931 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-01-31 20:29:24,932 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-01-31 20:29:24,932 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-01-31 20:29:24,932 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-01-31 20:29:24,932 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-01-31 20:29:24,932 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-01-31 20:29:24,932 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-01-31 20:29:24,932 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-01-31 20:29:24,933 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-01-31 20:29:24,933 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-01-31 20:29:24,933 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-01-31 20:29:24,933 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-01-31 20:29:24,933 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-01-31 20:29:24,934 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-01-31 20:29:24,934 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-01-31 20:29:24,934 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-01-31 20:29:24,934 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-01-31 20:29:24,934 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-01-31 20:29:24,934 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-01-31 20:29:24,934 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-01-31 20:29:24,934 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-01-31 20:29:24,935 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-01-31 20:29:24,935 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-01-31 20:29:24,935 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-01-31 20:29:24,935 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-01-31 20:29:24,935 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-01-31 20:29:24,935 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-01-31 20:29:24,935 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-01-31 20:29:24,935 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-01-31 20:29:24,935 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-01-31 20:29:24,936 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-01-31 20:29:24,936 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-01-31 20:29:24,936 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-01-31 20:29:24,936 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-01-31 20:29:24,936 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-01-31 20:29:24,936 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-01-31 20:29:24,936 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-01-31 20:29:24,936 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-01-31 20:29:24,936 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-01-31 20:29:24,937 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-01-31 20:29:24,937 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-01-31 20:29:24,937 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-01-31 20:29:24,937 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-01-31 20:29:24,937 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-01-31 20:29:24,937 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-01-31 20:29:24,937 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-01-31 20:29:24,937 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-01-31 20:29:24,938 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-01-31 20:29:24,938 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-01-31 20:29:24,938 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-01-31 20:29:24,938 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-01-31 20:29:24,938 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-01-31 20:29:24,938 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-01-31 20:29:24,938 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-01-31 20:29:24,938 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-01-31 20:29:24,938 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-01-31 20:29:24,939 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-01-31 20:29:24,941 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-31 20:29:25,037 - kings_builder - INFO - Registered routes:
2026-01-31 20:29:25,038 - kings_builder - INFO -   {'GET', 'HEAD'} /openapi.json
2026-01-31 20:29:25,038 - kings_builder - INFO -   {'GET', 'HEAD'} /docs
2026-01-31 20:29:25,038 - kings_builder - INFO -   {'GET', 'HEAD'} /docs/oauth2-redirect
2026-01-31 20:29:25,039 - kings_builder - INFO -   {'GET', 'HEAD'} /redoc
2026-01-31 20:29:25,039 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-01-31 20:29:25,039 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-01-31 20:29:25,039 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-01-31 20:29:25,040 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-01-31 20:29:25,040 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-01-31 20:29:25,040 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-01-31 20:29:25,040 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-01-31 20:29:25,040 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-01-31 20:29:25,041 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-01-31 20:29:25,041 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-01-31 20:29:25,041 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-01-31 20:29:25,041 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-01-31 20:29:25,041 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-01-31 20:29:25,042 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-01-31 20:29:25,042 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-01-31 20:29:25,042 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-01-31 20:29:25,042 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-01-31 20:29:25,042 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-01-31 20:29:25,043 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-01-31 20:29:25,043 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-01-31 20:29:25,043 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-01-31 20:29:25,043 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-01-31 20:29:25,043 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-01-31 20:29:25,044 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-01-31 20:29:25,044 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-01-31 20:29:25,044 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-01-31 20:29:25,044 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-01-31 20:29:25,044 - kings_builder - INFO - Checking for master admin user...
2026-01-31 20:29:25,044 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-01-31 20:29:25,044 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-01-31 20:29:25,044 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-01-31 20:29:25,045 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-01-31 20:29:25,045 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-01-31 20:29:25,045 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-01-31 20:29:25,045 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-01-31 20:29:25,045 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-01-31 20:29:25,045 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-01-31 20:29:25,045 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-01-31 20:29:25,046 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-01-31 20:29:25,046 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-01-31 20:29:25,046 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-01-31 20:29:25,046 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-01-31 20:29:25,046 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-01-31 20:29:25,046 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-01-31 20:29:25,046 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-01-31 20:29:25,047 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-01-31 20:29:25,047 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-01-31 20:29:25,047 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-01-31 20:29:25,047 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-01-31 20:29:25,047 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-01-31 20:29:25,047 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-01-31 20:29:25,048 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-01-31 20:29:25,048 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-01-31 20:29:25,048 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-01-31 20:29:25,048 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-01-31 20:29:25,048 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-01-31 20:29:25,048 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-01-31 20:29:25,048 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-01-31 20:29:25,049 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-01-31 20:29:25,049 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-01-31 20:29:25,049 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-01-31 20:29:25,049 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-01-31 20:29:25,049 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-01-31 20:29:25,049 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-01-31 20:29:25,056 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-31 20:29:25,160 - kings_builder - INFO - Checking for master admin user...
2026-01-31 20:29:43,677 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000']
2026-01-31 20:29:43,678 - kings_builder - INFO - Registering authentication routes...
2026-01-31 20:29:43,682 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-01-31 20:29:43,776 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000']
2026-01-31 20:29:43,776 - kings_builder - INFO - Registering authentication routes...
2026-01-31 20:29:43,786 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-01-31 20:29:43,869 - kings_builder - INFO - Registered routes:
2026-01-31 20:29:43,870 - kings_builder - INFO -   {'HEAD', 'GET'} /openapi.json
2026-01-31 20:29:43,870 - kings_builder - INFO -   {'HEAD', 'GET'} /docs
2026-01-31 20:29:43,870 - kings_builder - INFO -   {'HEAD', 'GET'} /docs/oauth2-redirect
2026-01-31 20:29:43,870 - kings_builder - INFO -   {'HEAD', 'GET'} /redoc
2026-01-31 20:29:43,870 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-01-31 20:29:43,871 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-01-31 20:29:43,871 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-01-31 20:29:43,871 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-01-31 20:29:43,871 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-01-31 20:29:43,871 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-01-31 20:29:43,871 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-01-31 20:29:43,871 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-01-31 20:29:43,872 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-01-31 20:29:43,872 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-01-31 20:29:43,872 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-01-31 20:29:43,872 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-01-31 20:29:43,872 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-01-31 20:29:43,872 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-01-31 20:29:43,872 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-01-31 20:29:43,873 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-01-31 20:29:43,873 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-01-31 20:29:43,873 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-01-31 20:29:43,873 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-01-31 20:29:43,873 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-01-31 20:29:43,873 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-01-31 20:29:43,873 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-01-31 20:29:43,874 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-01-31 20:29:43,874 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-01-31 20:29:43,874 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-01-31 20:29:43,874 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-01-31 20:29:43,874 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-01-31 20:29:43,874 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-01-31 20:29:43,874 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-01-31 20:29:43,875 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-01-31 20:29:43,875 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-01-31 20:29:43,875 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-01-31 20:29:43,875 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-01-31 20:29:43,875 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-01-31 20:29:43,875 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-01-31 20:29:43,875 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-01-31 20:29:43,876 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-01-31 20:29:43,876 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-01-31 20:29:43,876 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-01-31 20:29:43,876 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-01-31 20:29:43,876 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-01-31 20:29:43,876 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-01-31 20:29:43,876 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-01-31 20:29:43,876 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-01-31 20:29:43,877 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-01-31 20:29:43,877 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-01-31 20:29:43,877 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-01-31 20:29:43,877 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-01-31 20:29:43,877 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-01-31 20:29:43,877 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-01-31 20:29:43,877 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-01-31 20:29:43,878 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-01-31 20:29:43,878 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-01-31 20:29:43,878 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-01-31 20:29:43,878 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-01-31 20:29:43,878 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-01-31 20:29:43,878 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-01-31 20:29:43,878 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-01-31 20:29:43,879 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-01-31 20:29:43,879 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-01-31 20:29:43,879 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-01-31 20:29:43,879 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-01-31 20:29:43,879 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-01-31 20:29:43,879 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000']
2026-01-31 20:29:43,880 - kings_builder - INFO - Registering authentication routes...
2026-01-31 20:29:43,881 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-31 20:29:43,888 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-01-31 20:29:43,970 - kings_builder - INFO - Registered routes:
2026-01-31 20:29:43,970 - kings_builder - INFO -   {'GET', 'HEAD'} /openapi.json
2026-01-31 20:29:43,970 - kings_builder - INFO -   {'GET', 'HEAD'} /docs
2026-01-31 20:29:43,970 - kings_builder - INFO -   {'GET', 'HEAD'} /docs/oauth2-redirect
2026-01-31 20:29:43,971 - kings_builder - INFO -   {'GET', 'HEAD'} /redoc
2026-01-31 20:29:43,971 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-01-31 20:29:43,971 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-01-31 20:29:43,971 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-01-31 20:29:43,971 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-01-31 20:29:43,971 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-01-31 20:29:43,971 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-01-31 20:29:43,972 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-01-31 20:29:43,972 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-01-31 20:29:43,972 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-01-31 20:29:43,972 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-01-31 20:29:43,972 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-01-31 20:29:43,972 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-01-31 20:29:43,972 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-01-31 20:29:43,973 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-01-31 20:29:43,973 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-01-31 20:29:43,973 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-01-31 20:29:43,973 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-01-31 20:29:43,973 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-01-31 20:29:43,973 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-01-31 20:29:43,974 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-01-31 20:29:43,974 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-01-31 20:29:43,974 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-01-31 20:29:43,974 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-01-31 20:29:43,974 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-01-31 20:29:43,974 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-01-31 20:29:43,974 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-01-31 20:29:43,975 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-01-31 20:29:43,975 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-01-31 20:29:43,975 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-01-31 20:29:43,975 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-01-31 20:29:43,975 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-01-31 20:29:43,975 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-01-31 20:29:43,975 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-01-31 20:29:43,976 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-01-31 20:29:43,976 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-01-31 20:29:43,976 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-01-31 20:29:43,976 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-01-31 20:29:43,976 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-01-31 20:29:43,976 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-01-31 20:29:43,977 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-01-31 20:29:43,977 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-01-31 20:29:43,977 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-01-31 20:29:43,977 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-01-31 20:29:43,978 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-01-31 20:29:43,978 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-01-31 20:29:43,978 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-01-31 20:29:43,979 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-01-31 20:29:43,979 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-01-31 20:29:43,979 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-01-31 20:29:43,979 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-01-31 20:29:43,979 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-01-31 20:29:43,979 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-01-31 20:29:43,979 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-01-31 20:29:43,980 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-01-31 20:29:43,980 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-01-31 20:29:43,980 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-01-31 20:29:43,980 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-01-31 20:29:43,981 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-01-31 20:29:43,982 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-01-31 20:29:43,982 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-01-31 20:29:43,983 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-01-31 20:29:43,983 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-01-31 20:29:43,983 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-01-31 20:29:43,987 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-31 20:29:44,022 - kings_builder - INFO - Checking for master admin user...
2026-01-31 20:29:44,103 - kings_builder - INFO - Registered routes:
2026-01-31 20:29:44,103 - kings_builder - INFO -   {'GET', 'HEAD'} /openapi.json
2026-01-31 20:29:44,103 - kings_builder - INFO -   {'GET', 'HEAD'} /docs
2026-01-31 20:29:44,103 - kings_builder - INFO -   {'GET', 'HEAD'} /docs/oauth2-redirect
2026-01-31 20:29:44,103 - kings_builder - INFO -   {'GET', 'HEAD'} /redoc
2026-01-31 20:29:44,104 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-01-31 20:29:44,104 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-01-31 20:29:44,104 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-01-31 20:29:44,104 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-01-31 20:29:44,104 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-01-31 20:29:44,104 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-01-31 20:29:44,105 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-01-31 20:29:44,105 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-01-31 20:29:44,105 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-01-31 20:29:44,105 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-01-31 20:29:44,105 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-01-31 20:29:44,105 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-01-31 20:29:44,105 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-01-31 20:29:44,105 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-01-31 20:29:44,106 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-01-31 20:29:44,106 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-01-31 20:29:44,106 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-01-31 20:29:44,106 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-01-31 20:29:44,106 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-01-31 20:29:44,106 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-01-31 20:29:44,106 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-01-31 20:29:44,107 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-01-31 20:29:44,107 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-01-31 20:29:44,107 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-01-31 20:29:44,108 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-01-31 20:29:44,108 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-01-31 20:29:44,108 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-01-31 20:29:44,108 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-01-31 20:29:44,108 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-01-31 20:29:44,108 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-01-31 20:29:44,108 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-01-31 20:29:44,108 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-01-31 20:29:44,109 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-01-31 20:29:44,109 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-01-31 20:29:44,109 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-01-31 20:29:44,109 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-01-31 20:29:44,109 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-01-31 20:29:44,109 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-01-31 20:29:44,109 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-01-31 20:29:44,110 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-01-31 20:29:44,110 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-01-31 20:29:44,110 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-01-31 20:29:44,110 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-01-31 20:29:44,110 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-01-31 20:29:44,110 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-01-31 20:29:44,110 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-01-31 20:29:44,110 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-01-31 20:29:44,111 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-01-31 20:29:44,111 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-01-31 20:29:44,111 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-01-31 20:29:44,111 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-01-31 20:29:44,111 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-01-31 20:29:44,111 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-01-31 20:29:44,111 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-01-31 20:29:44,111 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-01-31 20:29:44,111 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-01-31 20:29:44,112 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-01-31 20:29:44,112 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-01-31 20:29:44,112 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-01-31 20:29:44,112 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-01-31 20:29:44,112 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-01-31 20:29:44,112 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-01-31 20:29:44,112 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-01-31 20:29:44,113 - kings_builder - INFO - Checking for master admin user...
2026-01-31 20:29:44,114 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-31 20:29:44,215 - kings_builder - INFO - Checking for master admin user...
2026-01-31 20:31:40,641 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000']
2026-01-31 20:31:40,642 - kings_builder - INFO - Registering authentication routes...
2026-01-31 20:31:40,646 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-01-31 20:31:40,785 - kings_builder - INFO - Registered routes:
2026-01-31 20:31:40,785 - kings_builder - INFO -   {'HEAD', 'GET'} /openapi.json
2026-01-31 20:31:40,785 - kings_builder - INFO -   {'HEAD', 'GET'} /docs
2026-01-31 20:31:40,785 - kings_builder - INFO -   {'HEAD', 'GET'} /docs/oauth2-redirect
2026-01-31 20:31:40,785 - kings_builder - INFO -   {'HEAD', 'GET'} /redoc
2026-01-31 20:31:40,786 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-01-31 20:31:40,786 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-01-31 20:31:40,786 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-01-31 20:31:40,786 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-01-31 20:31:40,786 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-01-31 20:31:40,786 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-01-31 20:31:40,786 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-01-31 20:31:40,786 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-01-31 20:31:40,786 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-01-31 20:31:40,787 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-01-31 20:31:40,787 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-01-31 20:31:40,787 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-01-31 20:31:40,787 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-01-31 20:31:40,787 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-01-31 20:31:40,787 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-01-31 20:31:40,787 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-01-31 20:31:40,787 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-01-31 20:31:40,787 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-01-31 20:31:40,788 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-01-31 20:31:40,788 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-01-31 20:31:40,788 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-01-31 20:31:40,788 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-01-31 20:31:40,788 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-01-31 20:31:40,788 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-01-31 20:31:40,788 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-01-31 20:31:40,788 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-01-31 20:31:40,788 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-01-31 20:31:40,789 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-01-31 20:31:40,789 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-01-31 20:31:40,789 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-01-31 20:31:40,789 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-01-31 20:31:40,789 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-01-31 20:31:40,789 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-01-31 20:31:40,789 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-01-31 20:31:40,790 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-01-31 20:31:40,790 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-01-31 20:31:40,790 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-01-31 20:31:40,790 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-01-31 20:31:40,790 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-01-31 20:31:40,790 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-01-31 20:31:40,791 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-01-31 20:31:40,797 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-01-31 20:31:40,798 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-01-31 20:31:40,798 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-01-31 20:31:40,798 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-01-31 20:31:40,798 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-01-31 20:31:40,798 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-01-31 20:31:40,798 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-01-31 20:31:40,798 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-01-31 20:31:40,799 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-01-31 20:31:40,799 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-01-31 20:31:40,799 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-01-31 20:31:40,799 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-01-31 20:31:40,799 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-01-31 20:31:40,799 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-01-31 20:31:40,799 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-01-31 20:31:40,799 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-01-31 20:31:40,799 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-01-31 20:31:40,799 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-01-31 20:31:40,799 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-01-31 20:31:40,799 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-01-31 20:31:40,799 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-01-31 20:31:40,800 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-01-31 20:33:51,721 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:50192 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 20:33:52,004 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 20:33:52,056 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 20:33:52,322 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:50193 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 20:33:52,337 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 20:33:52,350 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 20:34:18,498 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:50210 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 20:34:18,521 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 20:34:18,554 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 20:34:19,577 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:50211 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 20:34:19,589 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 20:34:19,605 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 20:34:20,721 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:50216 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 20:34:20,735 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 20:34:20,751 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 20:34:20,993 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:50218 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 20:34:21,003 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 20:34:21,032 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 20:34:21,066 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:50219 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 20:34:21,076 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 20:34:21,099 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 20:34:21,130 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:50220 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 20:34:21,135 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 20:34:21,148 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 20:38:40,104 - kings_builder - INFO - REQUEST: GET /health FROM: 127.0.0.1:50391 USER_AGENT: curl/8.17.0
2026-01-31 20:38:40,111 - kings_builder - INFO - RESPONSE: 200 for GET /health DURATION: 0.007s
2026-01-31 20:38:54,415 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:50408 USER_AGENT: curl/8.17.0
2026-01-31 20:38:56,822 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 20:38:56,856 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    result = await db.execute(
             ^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 20:52:20,989 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000']
2026-01-31 20:52:20,990 - kings_builder - INFO - Registering authentication routes...
2026-01-31 20:52:20,997 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-01-31 20:52:21,369 - kings_builder - INFO - Registered routes:
2026-01-31 20:52:21,369 - kings_builder - INFO -   {'HEAD', 'GET'} /openapi.json
2026-01-31 20:52:21,369 - kings_builder - INFO -   {'HEAD', 'GET'} /docs
2026-01-31 20:52:21,369 - kings_builder - INFO -   {'HEAD', 'GET'} /docs/oauth2-redirect
2026-01-31 20:52:21,370 - kings_builder - INFO -   {'HEAD', 'GET'} /redoc
2026-01-31 20:52:21,370 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-01-31 20:52:21,370 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-01-31 20:52:21,370 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-01-31 20:52:21,370 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-01-31 20:52:21,370 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-01-31 20:52:21,370 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-01-31 20:52:21,371 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-01-31 20:52:21,371 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-01-31 20:52:21,412 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-01-31 20:52:21,413 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-01-31 20:52:21,413 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-01-31 20:52:21,414 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-01-31 20:52:21,414 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-01-31 20:52:21,414 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-01-31 20:52:21,414 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-01-31 20:52:21,414 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-01-31 20:52:21,414 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-01-31 20:52:21,415 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-01-31 20:52:21,415 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-01-31 20:52:21,415 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-01-31 20:52:21,415 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-01-31 20:52:21,415 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-01-31 20:52:21,415 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-01-31 20:52:21,415 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-01-31 20:52:21,416 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-01-31 20:52:21,416 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-01-31 20:52:21,416 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-01-31 20:52:21,416 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-01-31 20:52:21,416 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-01-31 20:52:21,416 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-01-31 20:52:21,416 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-01-31 20:52:21,416 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-01-31 20:52:21,417 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-01-31 20:52:21,417 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-01-31 20:52:21,460 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-01-31 20:52:21,460 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-01-31 20:52:21,460 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-01-31 20:52:21,460 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-01-31 20:52:21,460 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-01-31 20:52:21,460 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-01-31 20:52:21,460 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-01-31 20:52:21,461 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-01-31 20:52:21,461 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-01-31 20:52:21,461 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-01-31 20:52:21,461 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-01-31 20:52:21,461 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-01-31 20:52:21,461 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-01-31 20:52:21,461 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-01-31 20:52:21,462 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-01-31 20:52:21,462 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-01-31 20:52:21,462 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-01-31 20:52:21,462 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-01-31 20:52:21,462 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-01-31 20:52:21,462 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-01-31 20:52:21,462 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-01-31 20:52:21,463 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-01-31 20:52:21,463 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-01-31 20:52:21,463 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-01-31 20:52:21,464 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-01-31 20:52:21,464 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-01-31 20:52:21,464 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-01-31 20:52:21,464 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-01-31 20:52:21,464 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-01-31 20:52:21,466 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-31 20:52:21,559 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000']
2026-01-31 20:52:21,559 - kings_builder - INFO - Registering authentication routes...
2026-01-31 20:52:21,564 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-01-31 20:52:21,673 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000']
2026-01-31 20:52:21,673 - kings_builder - INFO - Registering authentication routes...
2026-01-31 20:52:21,679 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-01-31 20:52:21,710 - kings_builder - INFO - Checking for master admin user...
2026-01-31 20:52:21,822 - kings_builder - INFO - Registered routes:
2026-01-31 20:52:21,822 - kings_builder - INFO -   {'GET', 'HEAD'} /openapi.json
2026-01-31 20:52:21,823 - kings_builder - INFO -   {'GET', 'HEAD'} /docs
2026-01-31 20:52:21,823 - kings_builder - INFO -   {'GET', 'HEAD'} /docs/oauth2-redirect
2026-01-31 20:52:21,823 - kings_builder - INFO -   {'GET', 'HEAD'} /redoc
2026-01-31 20:52:21,823 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-01-31 20:52:21,824 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-01-31 20:52:21,824 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-01-31 20:52:21,824 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-01-31 20:52:21,824 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-01-31 20:52:21,824 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-01-31 20:52:21,824 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-01-31 20:52:21,824 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-01-31 20:52:21,824 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-01-31 20:52:21,825 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-01-31 20:52:21,825 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-01-31 20:52:21,825 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-01-31 20:52:21,825 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-01-31 20:52:21,825 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-01-31 20:52:21,825 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-01-31 20:52:21,825 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-01-31 20:52:21,825 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-01-31 20:52:21,826 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-01-31 20:52:21,826 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-01-31 20:52:21,826 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-01-31 20:52:21,826 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-01-31 20:52:21,826 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-01-31 20:52:21,826 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-01-31 20:52:21,826 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-01-31 20:52:21,826 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-01-31 20:52:21,827 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-01-31 20:52:21,827 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-01-31 20:52:21,827 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-01-31 20:52:21,827 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-01-31 20:52:21,827 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-01-31 20:52:21,827 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-01-31 20:52:21,827 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-01-31 20:52:21,827 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-01-31 20:52:21,827 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-01-31 20:52:21,828 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-01-31 20:52:21,828 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-01-31 20:52:21,828 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-01-31 20:52:21,828 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-01-31 20:52:21,828 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-01-31 20:52:21,828 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-01-31 20:52:21,828 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-01-31 20:52:21,828 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-01-31 20:52:21,829 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-01-31 20:52:21,829 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-01-31 20:52:21,829 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-01-31 20:52:21,829 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-01-31 20:52:21,829 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-01-31 20:52:21,829 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-01-31 20:52:21,829 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-01-31 20:52:21,830 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-01-31 20:52:21,830 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-01-31 20:52:21,830 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-01-31 20:52:21,830 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-01-31 20:52:21,830 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-01-31 20:52:21,830 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-01-31 20:52:21,830 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-01-31 20:52:21,830 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-01-31 20:52:21,830 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-01-31 20:52:21,831 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-01-31 20:52:21,831 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-01-31 20:52:21,831 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-01-31 20:52:21,831 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-01-31 20:52:21,831 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-01-31 20:52:21,834 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-31 20:52:21,911 - kings_builder - INFO - Registered routes:
2026-01-31 20:52:21,912 - kings_builder - INFO -   {'GET', 'HEAD'} /openapi.json
2026-01-31 20:52:21,912 - kings_builder - INFO -   {'GET', 'HEAD'} /docs
2026-01-31 20:52:21,912 - kings_builder - INFO -   {'GET', 'HEAD'} /docs/oauth2-redirect
2026-01-31 20:52:21,913 - kings_builder - INFO -   {'GET', 'HEAD'} /redoc
2026-01-31 20:52:21,913 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-01-31 20:52:21,913 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-01-31 20:52:21,913 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-01-31 20:52:21,913 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-01-31 20:52:21,913 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-01-31 20:52:21,913 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-01-31 20:52:21,913 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-01-31 20:52:21,914 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-01-31 20:52:21,914 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-01-31 20:52:21,914 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-01-31 20:52:21,914 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-01-31 20:52:21,914 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-01-31 20:52:21,914 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-01-31 20:52:21,914 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-01-31 20:52:21,914 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-01-31 20:52:21,915 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-01-31 20:52:21,915 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-01-31 20:52:21,915 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-01-31 20:52:21,915 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-01-31 20:52:21,915 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-01-31 20:52:21,915 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-01-31 20:52:21,915 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-01-31 20:52:21,915 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-01-31 20:52:21,916 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-01-31 20:52:21,916 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-01-31 20:52:21,916 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-01-31 20:52:21,916 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-01-31 20:52:21,916 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-01-31 20:52:21,916 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-01-31 20:52:21,916 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-01-31 20:52:21,916 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-01-31 20:52:21,916 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-01-31 20:52:21,917 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-01-31 20:52:21,917 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-01-31 20:52:21,917 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-01-31 20:52:21,917 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-01-31 20:52:21,917 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-01-31 20:52:21,917 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-01-31 20:52:21,917 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-01-31 20:52:21,918 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-01-31 20:52:21,918 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-01-31 20:52:21,918 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-01-31 20:52:21,918 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-01-31 20:52:21,918 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-01-31 20:52:21,918 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-01-31 20:52:21,919 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-01-31 20:52:21,919 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-01-31 20:52:21,919 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-01-31 20:52:21,919 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-01-31 20:52:21,919 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-01-31 20:52:21,919 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-01-31 20:52:21,919 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-01-31 20:52:21,919 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-01-31 20:52:21,920 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-01-31 20:52:21,920 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-01-31 20:52:21,920 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-01-31 20:52:21,920 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-01-31 20:52:21,920 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-01-31 20:52:21,920 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-01-31 20:52:21,920 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-01-31 20:52:21,921 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-01-31 20:52:21,921 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-01-31 20:52:21,921 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-01-31 20:52:21,923 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-31 20:52:22,032 - kings_builder - INFO - Checking for master admin user...
2026-01-31 20:52:22,060 - kings_builder - INFO - Checking for master admin user...
2026-01-31 20:52:59,716 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000']
2026-01-31 20:52:59,717 - kings_builder - INFO - Registering authentication routes...
2026-01-31 20:52:59,723 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-01-31 20:52:59,904 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000']
2026-01-31 20:52:59,905 - kings_builder - INFO - Registering authentication routes...
2026-01-31 20:52:59,916 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-01-31 20:52:59,930 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000']
2026-01-31 20:52:59,931 - kings_builder - INFO - Registering authentication routes...
2026-01-31 20:52:59,941 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-01-31 20:52:59,980 - kings_builder - INFO - Registered routes:
2026-01-31 20:52:59,981 - kings_builder - INFO -   {'GET', 'HEAD'} /openapi.json
2026-01-31 20:52:59,981 - kings_builder - INFO -   {'GET', 'HEAD'} /docs
2026-01-31 20:52:59,982 - kings_builder - INFO -   {'GET', 'HEAD'} /docs/oauth2-redirect
2026-01-31 20:52:59,982 - kings_builder - INFO -   {'GET', 'HEAD'} /redoc
2026-01-31 20:52:59,982 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-01-31 20:52:59,982 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-01-31 20:52:59,982 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-01-31 20:52:59,983 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-01-31 20:52:59,983 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-01-31 20:52:59,983 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-01-31 20:52:59,983 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-01-31 20:52:59,983 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-01-31 20:52:59,983 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-01-31 20:52:59,983 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-01-31 20:52:59,984 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-01-31 20:52:59,984 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-01-31 20:52:59,984 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-01-31 20:52:59,984 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-01-31 20:52:59,984 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-01-31 20:52:59,984 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-01-31 20:52:59,984 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-01-31 20:52:59,985 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-01-31 20:52:59,985 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-01-31 20:52:59,985 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-01-31 20:52:59,985 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-01-31 20:52:59,985 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-01-31 20:52:59,985 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-01-31 20:52:59,986 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-01-31 20:52:59,986 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-01-31 20:52:59,986 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-01-31 20:52:59,986 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-01-31 20:52:59,986 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-01-31 20:52:59,986 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-01-31 20:52:59,986 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-01-31 20:52:59,987 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-01-31 20:52:59,987 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-01-31 20:52:59,987 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-01-31 20:52:59,987 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-01-31 20:52:59,987 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-01-31 20:52:59,987 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-01-31 20:52:59,987 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-01-31 20:52:59,988 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-01-31 20:52:59,988 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-01-31 20:52:59,988 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-01-31 20:52:59,988 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-01-31 20:52:59,988 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-01-31 20:52:59,988 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-01-31 20:52:59,988 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-01-31 20:52:59,988 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-01-31 20:52:59,989 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-01-31 20:52:59,989 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-01-31 20:52:59,989 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-01-31 20:52:59,989 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-01-31 20:52:59,989 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-01-31 20:52:59,989 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-01-31 20:52:59,989 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-01-31 20:52:59,990 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-01-31 20:52:59,990 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-01-31 20:52:59,990 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-01-31 20:52:59,990 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-01-31 20:52:59,990 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-01-31 20:52:59,991 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-01-31 20:52:59,991 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-01-31 20:52:59,992 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-01-31 20:52:59,992 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-01-31 20:52:59,992 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-01-31 20:52:59,992 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-01-31 20:52:59,997 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-31 20:53:00,123 - kings_builder - INFO - Checking for master admin user...
2026-01-31 20:53:00,199 - kings_builder - INFO - Registered routes:
2026-01-31 20:53:00,199 - kings_builder - INFO -   {'HEAD', 'GET'} /openapi.json
2026-01-31 20:53:00,199 - kings_builder - INFO -   {'HEAD', 'GET'} /docs
2026-01-31 20:53:00,200 - kings_builder - INFO -   {'HEAD', 'GET'} /docs/oauth2-redirect
2026-01-31 20:53:00,200 - kings_builder - INFO -   {'HEAD', 'GET'} /redoc
2026-01-31 20:53:00,200 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-01-31 20:53:00,200 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-01-31 20:53:00,201 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-01-31 20:53:00,201 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-01-31 20:53:00,201 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-01-31 20:53:00,201 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-01-31 20:53:00,204 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-01-31 20:53:00,205 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-01-31 20:53:00,206 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-01-31 20:53:00,206 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-01-31 20:53:00,206 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-01-31 20:53:00,207 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-01-31 20:53:00,207 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-01-31 20:53:00,207 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-01-31 20:53:00,208 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-01-31 20:53:00,208 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-01-31 20:53:00,208 - kings_builder - INFO - Registered routes:
2026-01-31 20:53:00,208 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-01-31 20:53:00,208 - kings_builder - INFO -   {'GET', 'HEAD'} /openapi.json
2026-01-31 20:53:00,208 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-01-31 20:53:00,209 - kings_builder - INFO -   {'GET', 'HEAD'} /docs
2026-01-31 20:53:00,209 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-01-31 20:53:00,209 - kings_builder - INFO -   {'GET', 'HEAD'} /docs/oauth2-redirect
}
2026-01-31 20:53:00,209 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-01-31 20:53:00,209 - kings_builder - INFO -   {'GET', 'HEAD'} /redoc
2026-01-31 20:53:00,209 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-01-31 20:53:00,209 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-01-31 20:53:00,209 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-01-31 20:53:00,209 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-01-31 20:53:00,210 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-01-31 20:53:00,210 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-01-31 20:53:00,210 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-01-31 20:53:00,210 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-01-31 20:53:00,210 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-01-31 20:53:00,210 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-01-31 20:53:00,210 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-01-31 20:53:00,210 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-01-31 20:53:00,210 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-01-31 20:53:00,210 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-01-31 20:53:00,210 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-01-31 20:53:00,210 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-01-31 20:53:00,210 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-01-31 20:53:00,210 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-01-31 20:53:00,211 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-01-31 20:53:00,211 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-01-31 20:53:00,211 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-01-31 20:53:00,211 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-01-31 20:53:00,211 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-01-31 20:53:00,211 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-01-31 20:53:00,211 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-01-31 20:53:00,211 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-01-31 20:53:00,211 - kings_builder - INFO -   {'POST'} /api/v1/projects/
{booking_id}
2026-01-31 20:53:00,212 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-01-31 20:53:00,212 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-01-31 20:53:00,212 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-01-31 20:53:00,212 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-01-31 20:53:00,212 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-01-31 20:53:00,213 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-01-31 20:53:00,213 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-01-31 20:53:00,213 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-01-31 20:53:00,213 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-01-31 20:53:00,213 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-01-31 20:53:00,213 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-01-31 20:53:00,213 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-01-31 20:53:00,214 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-01-31 20:53:00,214 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-01-31 20:53:00,214 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-01-31 20:53:00,214 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-01-31 20:53:00,214 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-01-31 20:53:00,214 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-01-31 20:53:00,214 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-01-31 20:53:00,214 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-01-31 20:53:00,214 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-01-31 20:53:00,214 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-01-31 20:53:00,214 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-01-31 20:53:00,214 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-01-31 20:53:00,214 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-01-31 20:53:00,215 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-01-31 20:53:00,215 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-01-31 20:53:00,215 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-01-31 20:53:00,215 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-01-31 20:53:00,215 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-01-31 20:53:00,215 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-01-31 20:53:00,215 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-01-31 20:53:00,215 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-01-31 20:53:00,216 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-01-31 20:53:00,216 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-01-31 20:53:00,216 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-01-31 20:53:00,216 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-01-31 20:53:00,216 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-01-31 20:53:00,216 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-01-31 20:53:00,216 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-01-31 20:53:00,216 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-01-31 20:53:00,216 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-01-31 20:53:00,217 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-01-31 20:53:00,217 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-01-31 20:53:00,217 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-01-31 20:53:00,217 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-01-31 20:53:00,217 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-01-31 20:53:00,217 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-01-31 20:53:00,217 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-01-31 20:53:00,217 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-01-31 20:53:00,217 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-01-31 20:53:00,217 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-01-31 20:53:00,217 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-01-31 20:53:00,217 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-01-31 20:53:00,217 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-01-31 20:53:00,218 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-01-31 20:53:00,218 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-01-31 20:53:00,218 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-01-31 20:53:00,218 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-01-31 20:53:00,218 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-01-31 20:53:00,218 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-01-31 20:53:00,218 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-01-31 20:53:00,218 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-01-31 20:53:00,218 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-01-31 20:53:00,218 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-01-31 20:53:00,219 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-01-31 20:53:00,219 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-01-31 20:53:00,218 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-01-31 20:53:00,221 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-01-31 20:53:00,221 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-31 20:53:00,221 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-01-31 20:53:00,221 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-01-31 20:53:00,222 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-01-31 20:53:00,228 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-31 20:53:00,326 - kings_builder - INFO - Checking for master admin user...
2026-01-31 20:53:00,371 - kings_builder - INFO - Checking for master admin user...
2026-01-31 20:53:44,532 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000']
2026-01-31 20:53:44,532 - kings_builder - INFO - Registering authentication routes...
2026-01-31 20:53:44,540 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-01-31 20:53:44,717 - kings_builder - INFO - Registered routes:
2026-01-31 20:53:44,717 - kings_builder - INFO -   {'GET', 'HEAD'} /openapi.json
2026-01-31 20:53:44,718 - kings_builder - INFO -   {'GET', 'HEAD'} /docs
2026-01-31 20:53:44,718 - kings_builder - INFO -   {'GET', 'HEAD'} /docs/oauth2-redirect
2026-01-31 20:53:44,718 - kings_builder - INFO -   {'GET', 'HEAD'} /redoc
2026-01-31 20:53:44,718 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-01-31 20:53:44,718 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-01-31 20:53:44,718 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-01-31 20:53:44,719 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-01-31 20:53:44,719 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-01-31 20:53:44,719 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-01-31 20:53:44,719 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-01-31 20:53:44,719 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-01-31 20:53:44,719 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-01-31 20:53:44,719 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-01-31 20:53:44,720 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-01-31 20:53:44,720 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-01-31 20:53:44,720 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-01-31 20:53:44,720 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-01-31 20:53:44,720 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-01-31 20:53:44,720 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-01-31 20:53:44,721 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-01-31 20:53:44,721 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-01-31 20:53:44,721 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-01-31 20:53:44,721 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-01-31 20:53:44,722 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-01-31 20:53:44,722 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-01-31 20:53:44,722 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-01-31 20:53:44,722 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-01-31 20:53:44,722 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-01-31 20:53:44,722 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-01-31 20:53:44,723 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-01-31 20:53:44,723 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-01-31 20:53:44,723 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-01-31 20:53:44,724 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-01-31 20:53:44,724 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-01-31 20:53:44,724 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-01-31 20:53:44,724 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-01-31 20:53:44,725 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-01-31 20:53:44,725 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-01-31 20:53:44,725 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-01-31 20:53:44,725 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-01-31 20:53:44,725 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-01-31 20:53:44,726 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-01-31 20:53:44,726 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-01-31 20:53:44,726 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-01-31 20:53:44,726 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-01-31 20:53:44,727 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-01-31 20:53:44,727 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-01-31 20:53:44,727 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-01-31 20:53:44,727 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-01-31 20:53:44,728 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-01-31 20:53:44,728 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-01-31 20:53:44,728 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-01-31 20:53:44,728 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-01-31 20:53:44,728 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-01-31 20:53:44,729 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-01-31 20:53:44,729 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-01-31 20:53:44,729 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-01-31 20:53:44,729 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-01-31 20:53:44,729 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-01-31 20:53:44,729 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-01-31 20:53:44,730 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-01-31 20:53:44,730 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-01-31 20:53:44,730 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-01-31 20:53:44,730 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-01-31 20:53:44,730 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-01-31 20:53:44,730 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-01-31 20:54:22,444 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000']
2026-01-31 20:54:22,445 - kings_builder - INFO - Registering authentication routes...
2026-01-31 20:54:22,454 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-01-31 20:54:22,647 - kings_builder - INFO - Registered routes:
2026-01-31 20:54:22,648 - kings_builder - INFO -   {'HEAD', 'GET'} /openapi.json
2026-01-31 20:54:22,648 - kings_builder - INFO -   {'HEAD', 'GET'} /docs
2026-01-31 20:54:22,648 - kings_builder - INFO -   {'HEAD', 'GET'} /docs/oauth2-redirect
2026-01-31 20:54:22,648 - kings_builder - INFO -   {'HEAD', 'GET'} /redoc
2026-01-31 20:54:22,648 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-01-31 20:54:22,648 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-01-31 20:54:22,648 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-01-31 20:54:22,649 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-01-31 20:54:22,649 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-01-31 20:54:22,649 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-01-31 20:54:22,649 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-01-31 20:54:22,649 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-01-31 20:54:22,649 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-01-31 20:54:22,649 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-01-31 20:54:22,649 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-01-31 20:54:22,650 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-01-31 20:54:22,650 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-01-31 20:54:22,650 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-01-31 20:54:22,650 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-01-31 20:54:22,650 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-01-31 20:54:22,650 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-01-31 20:54:22,650 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-01-31 20:54:22,650 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-01-31 20:54:22,651 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-01-31 20:54:22,651 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-01-31 20:54:22,651 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-01-31 20:54:22,651 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-01-31 20:54:22,651 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-01-31 20:54:22,651 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-01-31 20:54:22,651 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-01-31 20:54:22,651 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-01-31 20:54:22,651 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-01-31 20:54:22,652 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-01-31 20:54:22,652 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-01-31 20:54:22,652 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-01-31 20:54:22,652 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-01-31 20:54:22,652 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-01-31 20:54:22,654 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-01-31 20:54:22,654 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-01-31 20:54:22,654 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-01-31 20:54:22,654 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-01-31 20:54:22,654 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-01-31 20:54:22,654 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-01-31 20:54:22,655 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-01-31 20:54:22,655 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-01-31 20:54:22,655 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-01-31 20:54:22,655 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-01-31 20:54:22,655 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-01-31 20:54:22,656 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-01-31 20:54:22,656 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-01-31 20:54:22,656 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-01-31 20:54:22,656 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-01-31 20:54:22,656 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-01-31 20:54:22,656 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-01-31 20:54:22,656 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-01-31 20:54:22,656 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-01-31 20:54:22,656 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-01-31 20:54:22,657 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-01-31 20:54:22,657 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-01-31 20:54:22,657 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-01-31 20:54:22,657 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-01-31 20:54:22,657 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-01-31 20:54:22,657 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-01-31 20:54:22,658 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-01-31 20:54:22,658 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-01-31 20:54:22,659 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-01-31 20:54:22,659 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-01-31 20:54:44,017 - kings_builder - INFO - REQUEST: GET /health FROM: 127.0.0.1:50814 USER_AGENT: curl/8.17.0
2026-01-31 20:54:44,019 - kings_builder - INFO - RESPONSE: 200 for GET /health DURATION: 0.002s
2026-01-31 20:55:00,285 - kings_builder - INFO - REQUEST: GET /api/v1/auth/login FROM: 127.0.0.1:50832 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 20:55:00,287 - kings_builder - ERROR - HTTP Exception: 405 - Method Not Allowed
2026-01-31 20:55:00,288 - kings_builder - INFO - RESPONSE: 405 for GET /api/v1/auth/login DURATION: 0.003s
2026-01-31 20:55:10,698 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:50838 USER_AGENT: curl/8.17.0
2026-01-31 20:55:21,273 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 20:55:21,315 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    # Find user by username
         ^^^^^^^^^^^^^^^^^^
    result = await db.execute(
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
    
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 20:59:22,325 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:51011 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 20:59:28,381 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:51013 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 20:59:28,475 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 20:59:28,510 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    # Find user by username
         ^^^^^^^^^^^^^^^^^^
    result = await db.execute(
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
    
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 20:59:30,122 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 20:59:30,146 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    # Find user by username
         ^^^^^^^^^^^^^^^^^^
    result = await db.execute(
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
    
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 21:02:03,046 - kings_builder - INFO - REQUEST: GET /docs FROM: 127.0.0.1:51164 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 21:02:03,053 - kings_builder - INFO - RESPONSE: 200 for GET /docs DURATION: 0.007s
2026-01-31 21:02:03,578 - kings_builder - INFO - REQUEST: GET /openapi.json FROM: 127.0.0.1:51164 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 21:02:03,593 - kings_builder - INFO - RESPONSE: 200 for GET /openapi.json DURATION: 0.015s
2026-01-31 21:02:14,092 - kings_builder - INFO - REQUEST: GET /docs FROM: 127.0.0.1:51165 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 21:02:14,094 - kings_builder - INFO - RESPONSE: 200 for GET /docs DURATION: 0.002s
2026-01-31 21:02:14,549 - kings_builder - INFO - REQUEST: GET /openapi.json FROM: 127.0.0.1:51165 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 21:02:14,564 - kings_builder - INFO - RESPONSE: 200 for GET /openapi.json DURATION: 0.015s
2026-01-31 21:02:43,756 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:51201 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 21:02:45,546 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:51203 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 21:02:46,078 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 21:02:46,117 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    # Find user by username
         ^^^^^^^^^^^^^^^^^^
    result = await db.execute(
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
    
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 21:02:47,367 - kings_builder - ERROR - ERROR in POST /api/v1/auth/login: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 21:02:47,425 - kings_builder - ERROR - General Exception: cannot access local variable 'response' where it is not associated with a value
Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 98, in receive
    return self.receive_nowait()
           ~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 93, in receive_nowait
    raise WouldBlock
anyio.WouldBlock

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 78, in call_next
    message = await recv_stream.receive()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\anyio\streams\memory.py", line 118, in receive
    raise EndOfStream
anyio.EndOfStream

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 29, in dispatch
    raise e
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 25, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 84, in call_next
    raise app_exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 70, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\routing.py", line 66, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 274, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        dependant=dependant, values=values, is_coroutine=is_coroutine
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\fastapi\routing.py", line 191, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\api\v1\routers\auth.py", line 33, in login
    # Find user by username
         ^^^^^^^^^^^^^^^^^^
    result = await db.execute(
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
        select(User).filter(User.username == username)
    
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\engine\base.py", line 1633, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 716, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\elements.py", line 324, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 1448, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 888, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 934, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\visitors.py", line 138, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\compiler.py", line 4783, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\sql\base.py", line 701, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2733, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 2410, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4227, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\sqlalchemy\orm\mapper.py", line 4264, in _do_configure_registries
    raise e
sqlalchemy.exc.InvalidRequestError: One or more mappers failed to initialize - can't proceed with initialization of other mappers. Triggering mapper: 'Mapper[User(users)]'. Original exception was: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\AG Computer\AppData\Roaming\Python\Python314\site-packages\starlette\middleware\base.py", line 108, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AG Computer\Desktop\real_state\backend\middleware\logging_middleware.py", line 36, in dispatch
    f"RESPONSE: {response.status_code} for {request.method} {request.url.path} "
                 ^^^^^^^^
UnboundLocalError: cannot access local variable 'response' where it is not associated with a value

2026-01-31 21:03:05,259 - kings_builder - INFO - REQUEST: GET /api/v1/auth/login FROM: 127.0.0.1:51220 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 21:03:05,262 - kings_builder - ERROR - HTTP Exception: 405 - Method Not Allowed
2026-01-31 21:03:05,264 - kings_builder - INFO - RESPONSE: 405 for GET /api/v1/auth/login DURATION: 0.004s
2026-01-31 21:03:06,419 - kings_builder - INFO - REQUEST: GET /api/v1/auth/login FROM: 127.0.0.1:51220 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 21:03:06,419 - kings_builder - ERROR - HTTP Exception: 405 - Method Not Allowed
2026-01-31 21:03:06,420 - kings_builder - INFO - RESPONSE: 405 for GET /api/v1/auth/login DURATION: 0.001s
2026-01-31 21:03:17,198 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000']
2026-01-31 21:03:17,199 - kings_builder - INFO - Registering authentication routes...
2026-01-31 21:03:17,205 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-01-31 21:03:17,207 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000']
2026-01-31 21:03:17,208 - kings_builder - INFO - Registering authentication routes...
2026-01-31 21:03:17,213 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000']
2026-01-31 21:03:17,213 - kings_builder - INFO - Registering authentication routes...
2026-01-31 21:03:17,214 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-01-31 21:03:17,219 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-01-31 21:03:17,397 - kings_builder - INFO - Registered routes:
2026-01-31 21:03:17,398 - kings_builder - INFO -   {'GET', 'HEAD'} /openapi.json
2026-01-31 21:03:17,398 - kings_builder - INFO -   {'GET', 'HEAD'} /docs
2026-01-31 21:03:17,399 - kings_builder - INFO -   {'GET', 'HEAD'} /docs/oauth2-redirect
2026-01-31 21:03:17,399 - kings_builder - INFO -   {'GET', 'HEAD'} /redoc
2026-01-31 21:03:17,400 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-01-31 21:03:17,400 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-01-31 21:03:17,400 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-01-31 21:03:17,400 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-01-31 21:03:17,400 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-01-31 21:03:17,401 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-01-31 21:03:17,401 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-01-31 21:03:17,401 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-01-31 21:03:17,401 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-01-31 21:03:17,401 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-01-31 21:03:17,402 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-01-31 21:03:17,402 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-01-31 21:03:17,402 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-01-31 21:03:17,402 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-01-31 21:03:17,402 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-01-31 21:03:17,402 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-01-31 21:03:17,402 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-01-31 21:03:17,403 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-01-31 21:03:17,403 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-01-31 21:03:17,403 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-01-31 21:03:17,408 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-01-31 21:03:17,408 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-01-31 21:03:17,409 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-01-31 21:03:17,409 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-01-31 21:03:17,409 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-01-31 21:03:17,409 - kings_builder - INFO - Registered routes:
2026-01-31 21:03:17,409 - kings_builder - INFO -   {'HEAD', 'GET'} /openapi.json
2026-01-31 21:03:17,410 - kings_builder - INFO -   {'HEAD', 'GET'} /docs
2026-01-31 21:03:17,410 - kings_builder - INFO -   {'HEAD', 'GET'} /docs/oauth2-redirect
2026-01-31 21:03:17,409 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-01-31 21:03:17,410 - kings_builder - INFO -   {'HEAD', 'GET'} /redoc
2026-01-31 21:03:17,410 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
vestor_id}
2026-01-31 21:03:17,410 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-01-31 21:03:17,410 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-01-31 21:03:17,410 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-01-31 21:03:17,411 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-01-31 21:03:17,411 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-01-31 21:03:17,411 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-01-31 21:03:17,411 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-01-31 21:03:17,411 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-01-31 21:03:17,411 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-01-31 21:03:17,411 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-01-31 21:03:17,411 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-01-31 21:03:17,411 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-01-31 21:03:17,411 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-01-31 21:03:17,411 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-01-31 21:03:17,411 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-01-31 21:03:17,411 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-01-31 21:03:17,412 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-01-31 21:03:17,412 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-01-31 21:03:17,412 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-01-31 21:03:17,412 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-01-31 21:03:17,412 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-01-31 21:03:17,412 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-01-31 21:03:17,412 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-01-31 21:03:17,412 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-01-31 21:03:17,412 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-01-31 21:03:17,412 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-01-31 21:03:17,412 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-01-31 21:03:17,412 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-01-31 21:03:17,412 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-01-31 21:03:17,412 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-01-31 21:03:17,413 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-01-31 21:03:17,413 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-01-31 21:03:17,413 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-01-31 21:03:17,413 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-01-31 21:03:17,413 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-01-31 21:03:17,413 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-01-31 21:03:17,413 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-01-31 21:03:17,413 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-01-31 21:03:17,414 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-01-31 21:03:17,414 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-01-31 21:03:17,414 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-01-31 21:03:17,414 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-01-31 21:03:17,414 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-01-31 21:03:17,414 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-01-31 21:03:17,414 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-01-31 21:03:17,415 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-01-31 21:03:17,415 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-01-31 21:03:17,415 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-01-31 21:03:17,415 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-01-31 21:03:17,415 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-01-31 21:03:17,415 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
d}
2026-01-31 21:03:17,415 - kings_builder - INFO -   {'GET'} /api/v1/investors/
{transfer_id}/approve
2026-01-31 21:03:17,415 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-01-31 21:03:17,415 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-01-31 21:03:17,416 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-01-31 21:03:17,416 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-01-31 21:03:17,416 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-01-31 21:03:17,416 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-01-31 21:03:17,416 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-01-31 21:03:17,416 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-01-31 21:03:17,416 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-01-31 21:03:17,416 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-01-31 21:03:17,416 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-01-31 21:03:17,416 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-01-31 21:03:17,416 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-01-31 21:03:17,417 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-01-31 21:03:17,417 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-01-31 21:03:17,417 - kings_builder - INFO - Registered routes:
2026-01-31 21:03:17,417 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-01-31 21:03:17,417 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-01-31 21:03:17,417 - kings_builder - INFO -   {'GET', 'HEAD'} /openapi.json
2026-01-31 21:03:17,417 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-01-31 21:03:17,417 - kings_builder - INFO -   {'GET', 'HEAD'} /docs
2026-01-31 21:03:17,417 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-01-31 21:03:17,417 - kings_builder - INFO -   {'GET', 'HEAD'} /docs/oauth2-redirect
2026-01-31 21:03:17,418 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-01-31 21:03:17,418 - kings_builder - INFO -   {'GET', 'HEAD'} /redoc
2026-01-31 21:03:17,418 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-01-31 21:03:17,418 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-01-31 21:03:17,418 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-01-31 21:03:17,418 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-01-31 21:03:17,418 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-01-31 21:03:17,418 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-01-31 21:03:17,418 - kings_builder - INFO -   {'POST'} /api/v1/payments/
kend...
2026-01-31 21:03:17,418 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-01-31 21:03:17,418 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-01-31 21:03:17,419 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-01-31 21:03:17,419 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-01-31 21:03:17,419 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-01-31 21:03:17,419 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-01-31 21:03:17,419 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-01-31 21:03:17,419 - kings_builder - INFO -   {'POST'} /api/v1/installments/

2026-01-31 21:03:17,419 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
lment_id}
2026-01-31 21:03:17,419 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-01-31 21:03:17,420 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-01-31 21:03:17,420 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-01-31 21:03:17,420 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-01-31 21:03:17,420 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-01-31 21:03:17,422 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-01-31 21:03:17,422 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-01-31 21:03:17,422 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-01-31 21:03:17,422 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-01-31 21:03:17,422 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-01-31 21:03:17,423 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-01-31 21:03:17,423 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-01-31 21:03:17,423 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-01-31 21:03:17,425 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-31 21:03:17,427 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-01-31 21:03:17,428 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-01-31 21:03:17,428 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-01-31 21:03:17,428 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-01-31 21:03:17,428 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-01-31 21:03:17,428 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-01-31 21:03:17,429 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-01-31 21:03:17,430 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-01-31 21:03:17,430 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-01-31 21:03:17,430 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-01-31 21:03:17,430 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-01-31 21:03:17,430 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-01-31 21:03:17,431 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-01-31 21:03:17,431 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-01-31 21:03:17,431 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-01-31 21:03:17,432 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-01-31 21:03:17,432 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-01-31 21:03:17,432 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-01-31 21:03:17,432 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-01-31 21:03:17,432 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-01-31 21:03:17,432 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-01-31 21:03:17,433 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-01-31 21:03:17,433 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-01-31 21:03:17,433 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-01-31 21:03:17,434 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-01-31 21:03:17,434 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-01-31 21:03:17,434 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-01-31 21:03:17,434 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-01-31 21:03:17,434 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-01-31 21:03:17,434 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-01-31 21:03:17,435 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-01-31 21:03:17,435 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-01-31 21:03:17,435 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-01-31 21:03:17,435 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-01-31 21:03:17,435 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-01-31 21:03:17,436 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-01-31 21:03:17,436 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-01-31 21:03:17,436 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-01-31 21:03:17,436 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-01-31 21:03:17,436 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-01-31 21:03:17,436 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-01-31 21:03:17,437 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-01-31 21:03:17,437 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-01-31 21:03:17,438 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-01-31 21:03:17,439 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-01-31 21:03:17,440 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-01-31 21:03:17,440 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-01-31 21:03:17,441 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-01-31 21:03:17,441 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-01-31 21:03:17,441 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-01-31 21:03:17,441 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-01-31 21:03:17,441 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-01-31 21:03:17,442 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-01-31 21:03:17,442 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-01-31 21:03:17,442 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-01-31 21:03:17,444 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-31 21:03:17,509 - kings_builder - INFO - Checking for master admin user...
2026-01-31 21:03:17,516 - kings_builder - INFO - Checking for master admin user...
2026-01-31 21:03:17,547 - kings_builder - INFO - Checking for master admin user...
2026-01-31 21:03:50,686 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000']
2026-01-31 21:03:50,686 - kings_builder - INFO - Registering authentication routes...
2026-01-31 21:03:50,693 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-01-31 21:03:50,830 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000']
2026-01-31 21:03:50,830 - kings_builder - INFO - Registering authentication routes...
2026-01-31 21:03:50,838 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000']
2026-01-31 21:03:50,838 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-01-31 21:03:50,838 - kings_builder - INFO - Registering authentication routes...
2026-01-31 21:03:50,845 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-01-31 21:03:50,968 - kings_builder - INFO - Registered routes:
2026-01-31 21:03:50,970 - kings_builder - INFO -   {'GET', 'HEAD'} /openapi.json
2026-01-31 21:03:50,970 - kings_builder - INFO -   {'GET', 'HEAD'} /docs
2026-01-31 21:03:50,970 - kings_builder - INFO -   {'GET', 'HEAD'} /docs/oauth2-redirect
2026-01-31 21:03:50,970 - kings_builder - INFO -   {'GET', 'HEAD'} /redoc
2026-01-31 21:03:50,971 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-01-31 21:03:50,971 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-01-31 21:03:50,971 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-01-31 21:03:50,971 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-01-31 21:03:50,971 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-01-31 21:03:50,972 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-01-31 21:03:50,972 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-01-31 21:03:50,972 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-01-31 21:03:50,972 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-01-31 21:03:50,972 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-01-31 21:03:50,972 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-01-31 21:03:50,973 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-01-31 21:03:50,973 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-01-31 21:03:50,973 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-01-31 21:03:50,973 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-01-31 21:03:50,973 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-01-31 21:03:50,973 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-01-31 21:03:50,974 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-01-31 21:03:50,974 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-01-31 21:03:50,974 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-01-31 21:03:50,975 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-01-31 21:03:50,975 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-01-31 21:03:50,975 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-01-31 21:03:50,975 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-01-31 21:03:50,975 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-01-31 21:03:50,975 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-01-31 21:03:50,976 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-01-31 21:03:50,976 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-01-31 21:03:50,976 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-01-31 21:03:50,976 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-01-31 21:03:50,976 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-01-31 21:03:50,976 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-01-31 21:03:50,977 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-01-31 21:03:50,977 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-01-31 21:03:50,977 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-01-31 21:03:50,977 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-01-31 21:03:50,977 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-01-31 21:03:50,977 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-01-31 21:03:50,978 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-01-31 21:03:50,978 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-01-31 21:03:50,978 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-01-31 21:03:50,978 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-01-31 21:03:50,978 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-01-31 21:03:50,978 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-01-31 21:03:50,979 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-01-31 21:03:50,979 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-01-31 21:03:50,979 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-01-31 21:03:50,979 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-01-31 21:03:50,979 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-01-31 21:03:50,979 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-01-31 21:03:50,980 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-01-31 21:03:50,980 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-01-31 21:03:50,980 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-01-31 21:03:50,980 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-01-31 21:03:50,980 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-01-31 21:03:50,981 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-01-31 21:03:50,981 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-01-31 21:03:50,981 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-01-31 21:03:50,981 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-01-31 21:03:50,982 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-01-31 21:03:50,982 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-01-31 21:03:50,982 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-01-31 21:03:50,982 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-01-31 21:03:50,986 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-31 21:03:51,062 - kings_builder - INFO - Registered routes:
2026-01-31 21:03:51,062 - kings_builder - INFO -   {'GET', 'HEAD'} /openapi.json
2026-01-31 21:03:51,062 - kings_builder - INFO -   {'GET', 'HEAD'} /docs
2026-01-31 21:03:51,062 - kings_builder - INFO -   {'GET', 'HEAD'} /docs/oauth2-redirect
2026-01-31 21:03:51,063 - kings_builder - INFO -   {'GET', 'HEAD'} /redoc
2026-01-31 21:03:51,063 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-01-31 21:03:51,063 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-01-31 21:03:51,063 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-01-31 21:03:51,066 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-01-31 21:03:51,070 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-01-31 21:03:51,071 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-01-31 21:03:51,071 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-01-31 21:03:51,072 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-01-31 21:03:51,072 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-01-31 21:03:51,072 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-01-31 21:03:51,072 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-01-31 21:03:51,072 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-01-31 21:03:51,073 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-01-31 21:03:51,073 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-01-31 21:03:51,073 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-01-31 21:03:51,073 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-01-31 21:03:51,073 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-01-31 21:03:51,073 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-01-31 21:03:51,074 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-01-31 21:03:51,074 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-01-31 21:03:51,074 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-01-31 21:03:51,074 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-01-31 21:03:51,075 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-01-31 21:03:51,075 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-01-31 21:03:51,075 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-01-31 21:03:51,075 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-01-31 21:03:51,075 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-01-31 21:03:51,076 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-01-31 21:03:51,076 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-01-31 21:03:51,076 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-01-31 21:03:51,076 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-01-31 21:03:51,076 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-01-31 21:03:51,076 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-01-31 21:03:51,076 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-01-31 21:03:51,077 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-01-31 21:03:51,077 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-01-31 21:03:51,077 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-01-31 21:03:51,077 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-01-31 21:03:51,077 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-01-31 21:03:51,077 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-01-31 21:03:51,077 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-01-31 21:03:51,077 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-01-31 21:03:51,078 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-01-31 21:03:51,078 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-01-31 21:03:51,078 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-01-31 21:03:51,078 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-01-31 21:03:51,078 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-01-31 21:03:51,078 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-01-31 21:03:51,078 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-01-31 21:03:51,079 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-01-31 21:03:51,080 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-01-31 21:03:51,080 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-01-31 21:03:51,082 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-01-31 21:03:51,083 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-01-31 21:03:51,084 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-01-31 21:03:51,084 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-01-31 21:03:51,085 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-01-31 21:03:51,085 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-01-31 21:03:51,085 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-01-31 21:03:51,086 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-01-31 21:03:51,086 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-01-31 21:03:51,086 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-01-31 21:03:51,086 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-01-31 21:03:51,088 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-31 21:03:51,099 - kings_builder - INFO - Checking for master admin user...
2026-01-31 21:03:51,111 - kings_builder - ERROR - Error during application startup: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 21:03:51,111 - kings_builder - WARNING - Continuing startup despite database initialization error
2026-01-31 21:03:51,113 - kings_builder - INFO - Registered routes:
2026-01-31 21:03:51,115 - kings_builder - INFO -   {'HEAD', 'GET'} /openapi.json
2026-01-31 21:03:51,115 - kings_builder - INFO -   {'HEAD', 'GET'} /docs
2026-01-31 21:03:51,115 - kings_builder - INFO -   {'HEAD', 'GET'} /docs/oauth2-redirect
2026-01-31 21:03:51,115 - kings_builder - INFO -   {'HEAD', 'GET'} /redoc
2026-01-31 21:03:51,118 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-01-31 21:03:51,119 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-01-31 21:03:51,119 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-01-31 21:03:51,119 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-01-31 21:03:51,119 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-01-31 21:03:51,119 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-01-31 21:03:51,120 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-01-31 21:03:51,120 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-01-31 21:03:51,120 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-01-31 21:03:51,120 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-01-31 21:03:51,120 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-01-31 21:03:51,121 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-01-31 21:03:51,121 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-01-31 21:03:51,121 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-01-31 21:03:51,121 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-01-31 21:03:51,121 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-01-31 21:03:51,121 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-01-31 21:03:51,122 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-01-31 21:03:51,122 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-01-31 21:03:51,122 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-01-31 21:03:51,122 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-01-31 21:03:51,122 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-01-31 21:03:51,122 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-01-31 21:03:51,123 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-01-31 21:03:51,123 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-01-31 21:03:51,123 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-01-31 21:03:51,123 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-01-31 21:03:51,123 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-01-31 21:03:51,123 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-01-31 21:03:51,123 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-01-31 21:03:51,124 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-01-31 21:03:51,124 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-01-31 21:03:51,124 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-01-31 21:03:51,124 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-01-31 21:03:51,125 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-01-31 21:03:51,125 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-01-31 21:03:51,125 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-01-31 21:03:51,125 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-01-31 21:03:51,125 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-01-31 21:03:51,125 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-01-31 21:03:51,125 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-01-31 21:03:51,126 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-01-31 21:03:51,126 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-01-31 21:03:51,126 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-01-31 21:03:51,126 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-01-31 21:03:51,126 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-01-31 21:03:51,126 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-01-31 21:03:51,126 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-01-31 21:03:51,127 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-01-31 21:03:51,127 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-01-31 21:03:51,127 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-01-31 21:03:51,127 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-01-31 21:03:51,127 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-01-31 21:03:51,127 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-01-31 21:03:51,128 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-01-31 21:03:51,128 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-01-31 21:03:51,128 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-01-31 21:03:51,128 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-01-31 21:03:51,128 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-01-31 21:03:51,128 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-01-31 21:03:51,129 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-01-31 21:03:51,130 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-01-31 21:03:51,130 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-01-31 21:03:51,134 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-31 21:03:51,184 - kings_builder - INFO - Checking for master admin user...
2026-01-31 21:03:51,194 - kings_builder - ERROR - Error during application startup: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 21:03:51,195 - kings_builder - WARNING - Continuing startup despite database initialization error
2026-01-31 21:03:51,230 - kings_builder - INFO - Checking for master admin user...
2026-01-31 21:03:51,240 - kings_builder - ERROR - Error during application startup: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 21:03:51,240 - kings_builder - WARNING - Continuing startup despite database initialization error
2026-01-31 21:06:54,184 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000', 'http://localhost:3005', 'http://127.0.0.1:3000', 'http://127.0.0.1:3005', '*']
2026-01-31 21:06:54,184 - kings_builder - INFO - Registering authentication routes...
2026-01-31 21:06:54,193 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-01-31 21:06:54,408 - kings_builder - INFO - Registered routes:
2026-01-31 21:06:54,409 - kings_builder - INFO -   {'HEAD', 'GET'} /openapi.json
2026-01-31 21:06:54,409 - kings_builder - INFO -   {'HEAD', 'GET'} /docs
2026-01-31 21:06:54,409 - kings_builder - INFO -   {'HEAD', 'GET'} /docs/oauth2-redirect
2026-01-31 21:06:54,411 - kings_builder - INFO -   {'HEAD', 'GET'} /redoc
2026-01-31 21:06:54,412 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-01-31 21:06:54,413 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-01-31 21:06:54,414 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-01-31 21:06:54,414 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-01-31 21:06:54,416 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-01-31 21:06:54,416 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-01-31 21:06:54,417 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-01-31 21:06:54,417 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-01-31 21:06:54,417 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-01-31 21:06:54,417 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-01-31 21:06:54,417 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-01-31 21:06:54,417 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-01-31 21:06:54,417 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-01-31 21:06:54,417 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-01-31 21:06:54,417 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-01-31 21:06:54,418 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-01-31 21:06:54,418 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-01-31 21:06:54,418 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-01-31 21:06:54,418 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-01-31 21:06:54,418 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-01-31 21:06:54,419 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-01-31 21:06:54,419 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-01-31 21:06:54,419 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-01-31 21:06:54,419 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-01-31 21:06:54,419 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-01-31 21:06:54,419 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-01-31 21:06:54,419 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-01-31 21:06:54,420 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-01-31 21:06:54,420 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-01-31 21:06:54,420 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-01-31 21:06:54,420 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-01-31 21:06:54,420 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-01-31 21:06:54,420 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-01-31 21:06:54,420 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-01-31 21:06:54,420 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-01-31 21:06:54,421 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-01-31 21:06:54,421 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-01-31 21:06:54,421 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-01-31 21:06:54,421 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-01-31 21:06:54,421 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-01-31 21:06:54,421 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-01-31 21:06:54,421 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-01-31 21:06:54,421 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-01-31 21:06:54,421 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-01-31 21:06:54,422 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-01-31 21:06:54,422 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-01-31 21:06:54,422 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-01-31 21:06:54,422 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-01-31 21:06:54,422 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-01-31 21:06:54,422 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-01-31 21:06:54,422 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-01-31 21:06:54,422 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-01-31 21:06:54,422 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-01-31 21:06:54,422 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-01-31 21:06:54,423 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-01-31 21:06:54,423 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-01-31 21:06:54,423 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-01-31 21:06:54,423 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-01-31 21:06:54,423 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-01-31 21:06:54,423 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-01-31 21:06:54,423 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-01-31 21:06:54,423 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-01-31 21:06:54,423 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-01-31 21:06:54,425 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-31 21:06:54,501 - kings_builder - INFO - Checking for master admin user...
2026-01-31 21:06:54,508 - kings_builder - ERROR - Error during application startup: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 21:06:54,508 - kings_builder - WARNING - Continuing startup despite database initialization error
2026-01-31 21:06:54,510 - kings_builder - INFO - Shutting down Kings Builder backend...
2026-01-31 21:08:20,135 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000', 'http://localhost:3005', 'http://127.0.0.1:3000', 'http://127.0.0.1:3005', '*']
2026-01-31 21:08:20,136 - kings_builder - INFO - Registering authentication routes...
2026-01-31 21:08:20,140 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-01-31 21:08:20,316 - kings_builder - INFO - Registered routes:
2026-01-31 21:08:20,316 - kings_builder - INFO -   {'HEAD', 'GET'} /openapi.json
2026-01-31 21:08:20,317 - kings_builder - INFO -   {'HEAD', 'GET'} /docs
2026-01-31 21:08:20,317 - kings_builder - INFO -   {'HEAD', 'GET'} /docs/oauth2-redirect
2026-01-31 21:08:20,317 - kings_builder - INFO -   {'HEAD', 'GET'} /redoc
2026-01-31 21:08:20,318 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-01-31 21:08:20,318 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-01-31 21:08:20,318 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-01-31 21:08:20,318 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-01-31 21:08:20,318 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-01-31 21:08:20,318 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-01-31 21:08:20,319 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-01-31 21:08:20,319 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-01-31 21:08:20,319 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-01-31 21:08:20,319 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-01-31 21:08:20,319 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-01-31 21:08:20,319 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-01-31 21:08:20,319 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-01-31 21:08:20,320 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-01-31 21:08:20,320 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-01-31 21:08:20,320 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-01-31 21:08:20,320 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-01-31 21:08:20,320 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-01-31 21:08:20,320 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-01-31 21:08:20,320 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-01-31 21:08:20,321 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-01-31 21:08:20,321 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-01-31 21:08:20,321 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-01-31 21:08:20,321 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-01-31 21:08:20,321 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-01-31 21:08:20,321 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-01-31 21:08:20,321 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-01-31 21:08:20,322 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-01-31 21:08:20,322 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-01-31 21:08:20,322 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-01-31 21:08:20,322 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-01-31 21:08:20,322 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-01-31 21:08:20,322 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-01-31 21:08:20,322 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-01-31 21:08:20,322 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-01-31 21:08:20,323 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-01-31 21:08:20,323 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-01-31 21:08:20,323 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-01-31 21:08:20,323 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-01-31 21:08:20,323 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-01-31 21:08:20,323 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-01-31 21:08:20,323 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-01-31 21:08:20,324 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-01-31 21:08:20,324 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-01-31 21:08:20,324 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-01-31 21:08:20,324 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-01-31 21:08:20,324 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-01-31 21:08:20,324 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-01-31 21:08:20,324 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-01-31 21:08:20,324 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-01-31 21:08:20,325 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-01-31 21:08:20,325 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-01-31 21:08:20,325 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-01-31 21:08:20,325 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-01-31 21:08:20,325 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-01-31 21:08:20,325 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-01-31 21:08:20,325 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-01-31 21:08:20,325 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-01-31 21:08:20,325 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-01-31 21:08:20,325 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-01-31 21:08:20,326 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-01-31 21:08:20,327 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-01-31 21:08:20,331 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-01-31 21:08:20,332 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-31 21:08:20,419 - kings_builder - INFO - Checking for master admin user...
2026-01-31 21:08:20,426 - kings_builder - ERROR - Error during application startup: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 21:08:20,427 - kings_builder - WARNING - Continuing startup despite database initialization error
2026-01-31 21:08:20,429 - kings_builder - INFO - Shutting down Kings Builder backend...
2026-01-31 21:09:57,720 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000', 'http://localhost:3005', 'http://127.0.0.1:3000', 'http://127.0.0.1:3005', '*']
2026-01-31 21:09:57,721 - kings_builder - INFO - Registering authentication routes...
2026-01-31 21:09:57,734 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-01-31 21:09:57,930 - kings_builder - INFO - Registered routes:
2026-01-31 21:09:57,930 - kings_builder - INFO -   {'HEAD', 'GET'} /openapi.json
2026-01-31 21:09:57,930 - kings_builder - INFO -   {'HEAD', 'GET'} /docs
2026-01-31 21:09:57,931 - kings_builder - INFO -   {'HEAD', 'GET'} /docs/oauth2-redirect
2026-01-31 21:09:57,931 - kings_builder - INFO -   {'HEAD', 'GET'} /redoc
2026-01-31 21:09:57,931 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-01-31 21:09:57,931 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-01-31 21:09:57,931 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-01-31 21:09:57,931 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-01-31 21:09:57,931 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-01-31 21:09:57,931 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-01-31 21:09:57,932 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-01-31 21:09:57,936 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-01-31 21:09:57,936 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-01-31 21:09:57,936 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-01-31 21:09:57,937 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-01-31 21:09:57,937 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-01-31 21:09:57,937 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-01-31 21:09:57,937 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-01-31 21:09:57,937 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-01-31 21:09:57,937 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-01-31 21:09:57,938 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-01-31 21:09:57,938 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-01-31 21:09:57,938 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-01-31 21:09:57,938 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-01-31 21:09:57,938 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-01-31 21:09:57,939 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-01-31 21:09:57,939 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-01-31 21:09:57,939 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-01-31 21:09:57,940 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-01-31 21:09:57,940 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-01-31 21:09:57,940 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-01-31 21:09:57,941 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-01-31 21:09:57,941 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-01-31 21:09:57,942 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-01-31 21:09:57,942 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-01-31 21:09:57,942 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-01-31 21:09:57,943 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-01-31 21:09:57,943 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-01-31 21:09:57,943 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-01-31 21:09:57,943 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-01-31 21:09:57,943 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-01-31 21:09:57,943 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-01-31 21:09:57,944 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-01-31 21:09:57,944 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-01-31 21:09:57,944 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-01-31 21:09:57,944 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-01-31 21:09:57,944 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-01-31 21:09:57,944 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-01-31 21:09:57,945 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-01-31 21:09:57,945 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-01-31 21:09:57,945 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-01-31 21:09:57,945 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-01-31 21:09:57,945 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-01-31 21:09:57,945 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-01-31 21:09:57,945 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-01-31 21:09:57,945 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-01-31 21:09:57,945 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-01-31 21:09:57,945 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-01-31 21:09:57,946 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-01-31 21:09:57,946 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-01-31 21:09:57,946 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-01-31 21:09:57,946 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-01-31 21:09:57,946 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-01-31 21:09:57,946 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-01-31 21:09:57,946 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-01-31 21:09:57,946 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-01-31 21:09:57,946 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-01-31 21:09:57,948 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-31 21:09:58,031 - kings_builder - INFO - Checking for master admin user...
2026-01-31 21:09:58,041 - kings_builder - ERROR - Error during application startup: Could not determine join condition between parent/child tables on relationship User.builder - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 21:09:58,041 - kings_builder - WARNING - Continuing startup despite database initialization error
2026-01-31 21:13:25,541 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:51840 USER_AGENT: curl/8.17.0
2026-01-31 21:13:25,624 - kings_builder - ERROR - HTTP Exception: 500 - Internal server error occurred during authentication
2026-01-31 21:13:25,625 - kings_builder - INFO - RESPONSE: 500 for POST /api/v1/auth/login DURATION: 0.084s
2026-01-31 21:14:28,546 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000', 'http://localhost:3005', 'http://127.0.0.1:3000', 'http://127.0.0.1:3005', '*']
2026-01-31 21:14:28,546 - kings_builder - INFO - Registering authentication routes...
2026-01-31 21:14:28,557 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-01-31 21:14:28,708 - kings_builder - INFO - Registered routes:
2026-01-31 21:14:28,708 - kings_builder - INFO -   {'HEAD', 'GET'} /openapi.json
2026-01-31 21:14:28,708 - kings_builder - INFO -   {'HEAD', 'GET'} /docs
2026-01-31 21:14:28,708 - kings_builder - INFO -   {'HEAD', 'GET'} /docs/oauth2-redirect
2026-01-31 21:14:28,709 - kings_builder - INFO -   {'HEAD', 'GET'} /redoc
2026-01-31 21:14:28,709 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-01-31 21:14:28,709 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-01-31 21:14:28,709 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-01-31 21:14:28,709 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-01-31 21:14:28,709 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-01-31 21:14:28,709 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-01-31 21:14:28,709 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-01-31 21:14:28,709 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-01-31 21:14:28,710 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-01-31 21:14:28,710 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-01-31 21:14:28,710 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-01-31 21:14:28,710 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-01-31 21:14:28,710 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-01-31 21:14:28,710 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-01-31 21:14:28,710 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-01-31 21:14:28,710 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-01-31 21:14:28,710 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-01-31 21:14:28,711 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-01-31 21:14:28,711 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-01-31 21:14:28,711 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-01-31 21:14:28,711 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-01-31 21:14:28,711 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-01-31 21:14:28,711 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-01-31 21:14:28,711 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-01-31 21:14:28,712 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-01-31 21:14:28,712 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-01-31 21:14:28,712 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-01-31 21:14:28,713 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-01-31 21:14:28,713 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-01-31 21:14:28,713 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-01-31 21:14:28,714 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-01-31 21:14:28,714 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-01-31 21:14:28,714 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-01-31 21:14:28,714 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-01-31 21:14:28,715 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-01-31 21:14:28,715 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-01-31 21:14:28,715 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-01-31 21:14:28,715 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-01-31 21:14:28,715 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-01-31 21:14:28,716 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-01-31 21:14:28,716 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-01-31 21:14:28,716 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-01-31 21:14:28,717 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-01-31 21:14:28,717 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-01-31 21:14:28,719 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-01-31 21:14:28,720 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-01-31 21:14:28,720 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-01-31 21:14:28,720 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-01-31 21:14:28,720 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-01-31 21:14:28,720 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-01-31 21:14:28,720 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-01-31 21:14:28,721 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-01-31 21:14:28,721 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-01-31 21:14:28,721 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-01-31 21:14:28,721 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-01-31 21:14:28,721 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-01-31 21:14:28,721 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-01-31 21:14:28,722 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-01-31 21:14:28,722 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-01-31 21:14:28,722 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-01-31 21:14:28,722 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-01-31 21:14:28,722 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-01-31 21:14:28,722 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-01-31 21:14:28,724 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-31 21:14:28,795 - kings_builder - INFO - Checking for master admin user...
2026-01-31 21:14:28,811 - kings_builder - ERROR - Error during application startup: Column expression expected for argument 'remote_side'; got <class 'models.user.User'>.
2026-01-31 21:14:28,812 - kings_builder - WARNING - Continuing startup despite database initialization error
2026-01-31 21:15:13,968 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000', 'http://localhost:3005', 'http://127.0.0.1:3000', 'http://127.0.0.1:3005', '*']
2026-01-31 21:15:13,969 - kings_builder - INFO - Registering authentication routes...
2026-01-31 21:15:13,972 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-01-31 21:15:14,174 - kings_builder - INFO - Registered routes:
2026-01-31 21:15:14,175 - kings_builder - INFO -   {'HEAD', 'GET'} /openapi.json
2026-01-31 21:15:14,175 - kings_builder - INFO -   {'HEAD', 'GET'} /docs
2026-01-31 21:15:14,176 - kings_builder - INFO -   {'HEAD', 'GET'} /docs/oauth2-redirect
2026-01-31 21:15:14,176 - kings_builder - INFO -   {'HEAD', 'GET'} /redoc
2026-01-31 21:15:14,178 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-01-31 21:15:14,178 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-01-31 21:15:14,179 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-01-31 21:15:14,179 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-01-31 21:15:14,179 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-01-31 21:15:14,180 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-01-31 21:15:14,180 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-01-31 21:15:14,180 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-01-31 21:15:14,180 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-01-31 21:15:14,180 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-01-31 21:15:14,180 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-01-31 21:15:14,181 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-01-31 21:15:14,181 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-01-31 21:15:14,181 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-01-31 21:15:14,181 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-01-31 21:15:14,181 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-01-31 21:15:14,181 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-01-31 21:15:14,181 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-01-31 21:15:14,182 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-01-31 21:15:14,182 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-01-31 21:15:14,182 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-01-31 21:15:14,182 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-01-31 21:15:14,182 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-01-31 21:15:14,183 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-01-31 21:15:14,183 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-01-31 21:15:14,183 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-01-31 21:15:14,183 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-01-31 21:15:14,183 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-01-31 21:15:14,183 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-01-31 21:15:14,184 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-01-31 21:15:14,184 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-01-31 21:15:14,184 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-01-31 21:15:14,184 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-01-31 21:15:14,184 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-01-31 21:15:14,184 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-01-31 21:15:14,185 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-01-31 21:15:14,185 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-01-31 21:15:14,185 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-01-31 21:15:14,185 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-01-31 21:15:14,185 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-01-31 21:15:14,185 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-01-31 21:15:14,185 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-01-31 21:15:14,186 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-01-31 21:15:14,186 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-01-31 21:15:14,186 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-01-31 21:15:14,186 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-01-31 21:15:14,186 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-01-31 21:15:14,186 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-01-31 21:15:14,186 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-01-31 21:15:14,187 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-01-31 21:15:14,187 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-01-31 21:15:14,187 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-01-31 21:15:14,187 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-01-31 21:15:14,187 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-01-31 21:15:14,188 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-01-31 21:15:14,188 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-01-31 21:15:14,188 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-01-31 21:15:14,188 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-01-31 21:15:14,188 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-01-31 21:15:14,188 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-01-31 21:15:14,188 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-01-31 21:15:14,189 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-01-31 21:15:14,189 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-01-31 21:15:14,191 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-31 21:15:14,340 - kings_builder - INFO - Checking for master admin user...
2026-01-31 21:15:14,384 - kings_builder - ERROR - Error during application startup: Could not determine join condition between parent/child tables on relationship Builder.users - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 21:15:14,384 - kings_builder - WARNING - Continuing startup despite database initialization error
2026-01-31 21:15:48,000 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000', 'http://localhost:3005', 'http://127.0.0.1:3000', 'http://127.0.0.1:3005', '*']
2026-01-31 21:15:48,001 - kings_builder - INFO - Registering authentication routes...
2026-01-31 21:15:48,010 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-01-31 21:15:48,168 - kings_builder - INFO - Registered routes:
2026-01-31 21:15:48,169 - kings_builder - INFO -   {'HEAD', 'GET'} /openapi.json
2026-01-31 21:15:48,169 - kings_builder - INFO -   {'HEAD', 'GET'} /docs
2026-01-31 21:15:48,169 - kings_builder - INFO -   {'HEAD', 'GET'} /docs/oauth2-redirect
2026-01-31 21:15:48,169 - kings_builder - INFO -   {'HEAD', 'GET'} /redoc
2026-01-31 21:15:48,173 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-01-31 21:15:48,174 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-01-31 21:15:48,174 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-01-31 21:15:48,174 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-01-31 21:15:48,174 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-01-31 21:15:48,174 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-01-31 21:15:48,174 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-01-31 21:15:48,175 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-01-31 21:15:48,175 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-01-31 21:15:48,175 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-01-31 21:15:48,175 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-01-31 21:15:48,175 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-01-31 21:15:48,176 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-01-31 21:15:48,176 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-01-31 21:15:48,176 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-01-31 21:15:48,176 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-01-31 21:15:48,176 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-01-31 21:15:48,177 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-01-31 21:15:48,177 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-01-31 21:15:48,177 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-01-31 21:15:48,177 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-01-31 21:15:48,177 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-01-31 21:15:48,177 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-01-31 21:15:48,178 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-01-31 21:15:48,178 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-01-31 21:15:48,178 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-01-31 21:15:48,178 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-01-31 21:15:48,178 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-01-31 21:15:48,178 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-01-31 21:15:48,179 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-01-31 21:15:48,179 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-01-31 21:15:48,179 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-01-31 21:15:48,179 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-01-31 21:15:48,179 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-01-31 21:15:48,180 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-01-31 21:15:48,180 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-01-31 21:15:48,180 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-01-31 21:15:48,180 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-01-31 21:15:48,180 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-01-31 21:15:48,180 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-01-31 21:15:48,181 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-01-31 21:15:48,181 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-01-31 21:15:48,181 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-01-31 21:15:48,181 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-01-31 21:15:48,181 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-01-31 21:15:48,182 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-01-31 21:15:48,182 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-01-31 21:15:48,183 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-01-31 21:15:48,183 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-01-31 21:15:48,184 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-01-31 21:15:48,184 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-01-31 21:15:48,184 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-01-31 21:15:48,184 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-01-31 21:15:48,185 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-01-31 21:15:48,185 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-01-31 21:15:48,186 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-01-31 21:15:48,186 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-01-31 21:15:48,186 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-01-31 21:15:48,186 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-01-31 21:15:48,186 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-01-31 21:15:48,187 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-01-31 21:15:48,187 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-01-31 21:15:48,187 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-01-31 21:15:48,191 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-31 21:15:48,264 - kings_builder - INFO - Checking for master admin user...
2026-01-31 21:15:48,365 - kings_builder - ERROR - Error during application startup: Could not determine join condition between parent/child tables on relationship Investor.users - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.
2026-01-31 21:15:48,365 - kings_builder - WARNING - Continuing startup despite database initialization error
2026-01-31 21:17:45,666 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000', 'http://localhost:3005', 'http://127.0.0.1:3000', 'http://127.0.0.1:3005', '*']
2026-01-31 21:17:45,667 - kings_builder - INFO - Registering authentication routes...
2026-01-31 21:17:45,670 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-01-31 21:17:45,857 - kings_builder - INFO - Registered routes:
2026-01-31 21:17:45,857 - kings_builder - INFO -   {'GET', 'HEAD'} /openapi.json
2026-01-31 21:17:45,857 - kings_builder - INFO -   {'GET', 'HEAD'} /docs
2026-01-31 21:17:45,857 - kings_builder - INFO -   {'GET', 'HEAD'} /docs/oauth2-redirect
2026-01-31 21:17:45,857 - kings_builder - INFO -   {'GET', 'HEAD'} /redoc
2026-01-31 21:17:45,857 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-01-31 21:17:45,857 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-01-31 21:17:45,858 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-01-31 21:17:45,858 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-01-31 21:17:45,858 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-01-31 21:17:45,858 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-01-31 21:17:45,858 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-01-31 21:17:45,858 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-01-31 21:17:45,858 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-01-31 21:17:45,858 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-01-31 21:17:45,858 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-01-31 21:17:45,858 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-01-31 21:17:45,859 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-01-31 21:17:45,859 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-01-31 21:17:45,859 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-01-31 21:17:45,859 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-01-31 21:17:45,859 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-01-31 21:17:45,859 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-01-31 21:17:45,859 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-01-31 21:17:45,860 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-01-31 21:17:45,860 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-01-31 21:17:45,860 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-01-31 21:17:45,860 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-01-31 21:17:45,860 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-01-31 21:17:45,860 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-01-31 21:17:45,860 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-01-31 21:17:45,860 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-01-31 21:17:45,861 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-01-31 21:17:45,861 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-01-31 21:17:45,862 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-01-31 21:17:45,863 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-01-31 21:17:45,864 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-01-31 21:17:45,864 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-01-31 21:17:45,865 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-01-31 21:17:45,865 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-01-31 21:17:45,865 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-01-31 21:17:45,865 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-01-31 21:17:45,865 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-01-31 21:17:45,866 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-01-31 21:17:45,866 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-01-31 21:17:45,866 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-01-31 21:17:45,866 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-01-31 21:17:45,867 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-01-31 21:17:45,867 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-01-31 21:17:45,867 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-01-31 21:17:45,867 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-01-31 21:17:45,867 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-01-31 21:17:45,867 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-01-31 21:17:45,868 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-01-31 21:17:45,868 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-01-31 21:17:45,868 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-01-31 21:17:45,868 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-01-31 21:17:45,868 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-01-31 21:17:45,869 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-01-31 21:17:45,869 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-01-31 21:17:45,869 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-01-31 21:17:45,869 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-01-31 21:17:45,869 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-01-31 21:17:45,869 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-01-31 21:17:45,870 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-01-31 21:17:45,870 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-01-31 21:17:45,870 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-01-31 21:17:45,870 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-01-31 21:17:45,874 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-31 21:17:45,979 - kings_builder - INFO - Checking for master admin user...
2026-01-31 21:17:46,181 - kings_builder - ERROR - Error during application startup: 'master_admin' is not among the defined enum values. Enum name: userrole. Possible values: MASTER_ADMI.., SUPER_ADMIN, ADMIN, ..., INVESTOR
2026-01-31 21:17:46,182 - kings_builder - WARNING - Continuing startup despite database initialization error
2026-01-31 21:18:05,793 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:52126 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 21:18:06,024 - kings_builder - ERROR - HTTP Exception: 500 - Internal server error occurred during authentication
2026-01-31 21:18:06,026 - kings_builder - INFO - RESPONSE: 500 for POST /api/v1/auth/login DURATION: 0.232s
2026-01-31 21:18:09,824 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:52135 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 21:18:09,843 - kings_builder - ERROR - HTTP Exception: 500 - Internal server error occurred during authentication
2026-01-31 21:18:09,843 - kings_builder - INFO - RESPONSE: 500 for POST /api/v1/auth/login DURATION: 0.019s
2026-01-31 21:18:49,427 - kings_builder - INFO - REQUEST: POST /api/v1/auth/register FROM: 127.0.0.1:52161 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 21:18:49,428 - kings_builder - ERROR - HTTP Exception: 404 - Not Found
2026-01-31 21:18:49,429 - kings_builder - INFO - RESPONSE: 404 for POST /api/v1/auth/register DURATION: 0.002s
2026-01-31 21:19:09,196 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:52173 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 21:19:09,230 - kings_builder - ERROR - HTTP Exception: 500 - Internal server error occurred during authentication
2026-01-31 21:19:09,231 - kings_builder - INFO - RESPONSE: 500 for POST /api/v1/auth/login DURATION: 0.035s
2026-01-31 21:19:54,609 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:52205 USER_AGENT: curl/8.17.0
2026-01-31 21:19:54,628 - kings_builder - ERROR - HTTP Exception: 500 - Internal server error occurred during authentication
2026-01-31 21:19:54,629 - kings_builder - INFO - RESPONSE: 500 for POST /api/v1/auth/login DURATION: 0.020s
2026-01-31 21:21:03,284 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000', 'http://localhost:3005', 'http://127.0.0.1:3000', 'http://127.0.0.1:3005', '*']
2026-01-31 21:21:03,284 - kings_builder - INFO - Registering authentication routes...
2026-01-31 21:21:03,291 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-01-31 21:21:03,463 - kings_builder - INFO - Registered routes:
2026-01-31 21:21:03,463 - kings_builder - INFO -   {'GET', 'HEAD'} /openapi.json
2026-01-31 21:21:03,463 - kings_builder - INFO -   {'GET', 'HEAD'} /docs
2026-01-31 21:21:03,463 - kings_builder - INFO -   {'GET', 'HEAD'} /docs/oauth2-redirect
2026-01-31 21:21:03,464 - kings_builder - INFO -   {'GET', 'HEAD'} /redoc
2026-01-31 21:21:03,464 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-01-31 21:21:03,464 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-01-31 21:21:03,464 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-01-31 21:21:03,464 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-01-31 21:21:03,464 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-01-31 21:21:03,464 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-01-31 21:21:03,464 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-01-31 21:21:03,464 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-01-31 21:21:03,465 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-01-31 21:21:03,465 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-01-31 21:21:03,465 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-01-31 21:21:03,465 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-01-31 21:21:03,465 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-01-31 21:21:03,465 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-01-31 21:21:03,465 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-01-31 21:21:03,465 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-01-31 21:21:03,465 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-01-31 21:21:03,465 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-01-31 21:21:03,466 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-01-31 21:21:03,466 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-01-31 21:21:03,466 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-01-31 21:21:03,466 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-01-31 21:21:03,466 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-01-31 21:21:03,466 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-01-31 21:21:03,467 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-01-31 21:21:03,467 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-01-31 21:21:03,467 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-01-31 21:21:03,467 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-01-31 21:21:03,467 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-01-31 21:21:03,467 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-01-31 21:21:03,468 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-01-31 21:21:03,468 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-01-31 21:21:03,468 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-01-31 21:21:03,468 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-01-31 21:21:03,469 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-01-31 21:21:03,469 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-01-31 21:21:03,469 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-01-31 21:21:03,469 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-01-31 21:21:03,469 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-01-31 21:21:03,470 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-01-31 21:21:03,470 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-01-31 21:21:03,470 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-01-31 21:21:03,470 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-01-31 21:21:03,470 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-01-31 21:21:03,471 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-01-31 21:21:03,471 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-01-31 21:21:03,471 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-01-31 21:21:03,471 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-01-31 21:21:03,471 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-01-31 21:21:03,472 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-01-31 21:21:03,472 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-01-31 21:21:03,472 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-01-31 21:21:03,472 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-01-31 21:21:03,472 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-01-31 21:21:03,473 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-01-31 21:21:03,473 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-01-31 21:21:03,473 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-01-31 21:21:03,473 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-01-31 21:21:03,473 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-01-31 21:21:03,473 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-01-31 21:21:03,474 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-01-31 21:21:03,474 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-01-31 21:21:03,474 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-01-31 21:21:03,477 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-31 21:21:03,567 - kings_builder - INFO - Checking for master admin user...
2026-01-31 21:21:04,047 - kings_builder - ERROR - Error during application startup: 'master_admin' is not among the defined enum values. Enum name: userrole. Possible values: MASTER_ADMI.., SUPER_ADMIN, ADMIN, ..., INVESTOR
2026-01-31 21:21:04,048 - kings_builder - WARNING - Continuing startup despite database initialization error
2026-01-31 21:22:06,551 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000', 'http://localhost:3005', 'http://127.0.0.1:3000', 'http://127.0.0.1:3005', '*']
2026-01-31 21:22:06,551 - kings_builder - INFO - Registering authentication routes...
2026-01-31 21:22:06,556 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-01-31 21:22:06,997 - kings_builder - INFO - Registered routes:
2026-01-31 21:22:06,997 - kings_builder - INFO -   {'GET', 'HEAD'} /openapi.json
2026-01-31 21:22:06,998 - kings_builder - INFO -   {'GET', 'HEAD'} /docs
2026-01-31 21:22:06,998 - kings_builder - INFO -   {'GET', 'HEAD'} /docs/oauth2-redirect
2026-01-31 21:22:06,998 - kings_builder - INFO -   {'GET', 'HEAD'} /redoc
2026-01-31 21:22:06,998 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-01-31 21:22:06,998 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-01-31 21:22:06,999 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-01-31 21:22:06,999 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-01-31 21:22:06,999 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-01-31 21:22:06,999 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-01-31 21:22:06,999 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-01-31 21:22:07,000 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-01-31 21:22:07,000 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-01-31 21:22:07,000 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-01-31 21:22:07,000 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-01-31 21:22:07,000 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-01-31 21:22:07,001 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-01-31 21:22:07,001 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-01-31 21:22:07,001 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-01-31 21:22:07,001 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-01-31 21:22:07,002 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-01-31 21:22:07,002 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-01-31 21:22:07,002 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-01-31 21:22:07,003 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-01-31 21:22:07,003 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-01-31 21:22:07,003 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-01-31 21:22:07,004 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-01-31 21:22:07,004 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-01-31 21:22:07,004 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-01-31 21:22:07,004 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-01-31 21:22:07,004 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-01-31 21:22:07,005 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-01-31 21:22:07,005 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-01-31 21:22:07,005 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-01-31 21:22:07,005 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-01-31 21:22:07,005 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-01-31 21:22:07,006 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-01-31 21:22:07,006 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-01-31 21:22:07,006 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-01-31 21:22:07,006 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-01-31 21:22:07,006 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-01-31 21:22:07,007 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-01-31 21:22:07,008 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-01-31 21:22:07,008 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-01-31 21:22:07,008 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-01-31 21:22:07,009 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-01-31 21:22:07,009 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-01-31 21:22:07,009 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-01-31 21:22:07,009 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-01-31 21:22:07,010 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-01-31 21:22:07,011 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-01-31 21:22:07,017 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-01-31 21:22:07,017 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-01-31 21:22:07,018 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-01-31 21:22:07,018 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-01-31 21:22:07,018 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-01-31 21:22:07,018 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-01-31 21:22:07,019 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-01-31 21:22:07,019 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-01-31 21:22:07,019 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-01-31 21:22:07,019 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-01-31 21:22:07,020 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-01-31 21:22:07,020 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-01-31 21:22:07,020 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-01-31 21:22:07,020 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-01-31 21:22:07,020 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-01-31 21:22:07,021 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-01-31 21:22:07,023 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-31 21:22:07,269 - kings_builder - INFO - Checking for master admin user...
2026-01-31 21:22:07,552 - kings_builder - ERROR - Error during application startup: 'master_admin' is not among the defined enum values. Enum name: userrole. Possible values: MASTER_ADMI.., SUPER_ADMIN, ADMIN, ..., INVESTOR
2026-01-31 21:22:07,552 - kings_builder - WARNING - Continuing startup despite database initialization error
2026-01-31 21:26:30,205 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000', 'http://localhost:3005', 'http://127.0.0.1:3000', 'http://127.0.0.1:3005', '*']
2026-01-31 21:26:30,206 - kings_builder - INFO - Registering authentication routes...
2026-01-31 21:26:30,214 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-01-31 21:26:30,418 - kings_builder - INFO - Registered routes:
2026-01-31 21:26:30,418 - kings_builder - INFO -   {'HEAD', 'GET'} /openapi.json
2026-01-31 21:26:30,418 - kings_builder - INFO -   {'HEAD', 'GET'} /docs
2026-01-31 21:26:30,418 - kings_builder - INFO -   {'HEAD', 'GET'} /docs/oauth2-redirect
2026-01-31 21:26:30,418 - kings_builder - INFO -   {'HEAD', 'GET'} /redoc
2026-01-31 21:26:30,419 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-01-31 21:26:30,419 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-01-31 21:26:30,419 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-01-31 21:26:30,419 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-01-31 21:26:30,419 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-01-31 21:26:30,419 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-01-31 21:26:30,419 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-01-31 21:26:30,419 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-01-31 21:26:30,420 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-01-31 21:26:30,420 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-01-31 21:26:30,420 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-01-31 21:26:30,420 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-01-31 21:26:30,420 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-01-31 21:26:30,420 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-01-31 21:26:30,421 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-01-31 21:26:30,421 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-01-31 21:26:30,421 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-01-31 21:26:30,421 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-01-31 21:26:30,422 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-01-31 21:26:30,422 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-01-31 21:26:30,422 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-01-31 21:26:30,422 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-01-31 21:26:30,424 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-01-31 21:26:30,424 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-01-31 21:26:30,424 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-01-31 21:26:30,424 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-01-31 21:26:30,425 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-01-31 21:26:30,425 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-01-31 21:26:30,425 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-01-31 21:26:30,426 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-01-31 21:26:30,426 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-01-31 21:26:30,426 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-01-31 21:26:30,426 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-01-31 21:26:30,426 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-01-31 21:26:30,426 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-01-31 21:26:30,426 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-01-31 21:26:30,426 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-01-31 21:26:30,426 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-01-31 21:26:30,426 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-01-31 21:26:30,427 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-01-31 21:26:30,427 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-01-31 21:26:30,427 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-01-31 21:26:30,427 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-01-31 21:26:30,427 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-01-31 21:26:30,427 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-01-31 21:26:30,427 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-01-31 21:26:30,427 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-01-31 21:26:30,427 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-01-31 21:26:30,428 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-01-31 21:26:30,428 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-01-31 21:26:30,428 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-01-31 21:26:30,428 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-01-31 21:26:30,428 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-01-31 21:26:30,428 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-01-31 21:26:30,429 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-01-31 21:26:30,429 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-01-31 21:26:30,429 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-01-31 21:26:30,429 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-01-31 21:26:30,429 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-01-31 21:26:30,429 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-01-31 21:26:30,429 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-01-31 21:26:30,429 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-01-31 21:26:30,429 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-01-31 21:26:30,431 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-31 21:26:30,693 - kings_builder - INFO - Checking for master admin user...
2026-01-31 21:26:31,014 - kings_builder - INFO - Creating master admin user...
2026-01-31 21:26:31,701 - kings_builder - INFO - Master admin 'scitforte' created successfully
2026-01-31 21:26:31,703 - kings_builder - INFO - Database tables created and super admin initialized
2026-01-31 21:27:25,257 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:52442 USER_AGENT: curl/8.17.0
2026-01-31 21:27:25,783 - kings_builder - INFO - RESPONSE: 200 for POST /api/v1/auth/login DURATION: 0.526s
2026-01-31 21:29:19,915 - kings_builder - INFO - REQUEST: GET /health FROM: 127.0.0.1:52481 USER_AGENT: curl/8.17.0
2026-01-31 21:29:19,916 - kings_builder - INFO - RESPONSE: 200 for GET /health DURATION: 0.001s
2026-01-31 21:29:30,621 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:52494 USER_AGENT: curl/8.17.0
2026-01-31 21:29:31,121 - kings_builder - INFO - RESPONSE: 200 for POST /api/v1/auth/login DURATION: 0.501s
2026-01-31 21:32:27,839 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000', 'http://localhost:3005', 'http://127.0.0.1:3000', 'http://127.0.0.1:3005', '*']
2026-01-31 21:32:27,839 - kings_builder - INFO - Registering authentication routes...
2026-01-31 21:32:27,844 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-01-31 21:32:27,996 - kings_builder - INFO - Registered routes:
2026-01-31 21:32:27,996 - kings_builder - INFO -   {'HEAD', 'GET'} /openapi.json
2026-01-31 21:32:27,997 - kings_builder - INFO -   {'HEAD', 'GET'} /docs
2026-01-31 21:32:27,997 - kings_builder - INFO -   {'HEAD', 'GET'} /docs/oauth2-redirect
2026-01-31 21:32:27,997 - kings_builder - INFO -   {'HEAD', 'GET'} /redoc
2026-01-31 21:32:27,997 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-01-31 21:32:27,998 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-01-31 21:32:27,998 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-01-31 21:32:27,999 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-01-31 21:32:27,999 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-01-31 21:32:27,999 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-01-31 21:32:27,999 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-01-31 21:32:27,999 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-01-31 21:32:28,000 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-01-31 21:32:28,000 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-01-31 21:32:28,000 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-01-31 21:32:28,000 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-01-31 21:32:28,000 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-01-31 21:32:28,000 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-01-31 21:32:28,001 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-01-31 21:32:28,001 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-01-31 21:32:28,001 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-01-31 21:32:28,001 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-01-31 21:32:28,002 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-01-31 21:32:28,002 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-01-31 21:32:28,002 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-01-31 21:32:28,002 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-01-31 21:32:28,002 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-01-31 21:32:28,003 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-01-31 21:32:28,003 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-01-31 21:32:28,003 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-01-31 21:32:28,004 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-01-31 21:32:28,004 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-01-31 21:32:28,004 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-01-31 21:32:28,004 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-01-31 21:32:28,004 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-01-31 21:32:28,004 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-01-31 21:32:28,005 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-01-31 21:32:28,005 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-01-31 21:32:28,005 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-01-31 21:32:28,005 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-01-31 21:32:28,005 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-01-31 21:32:28,005 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-01-31 21:32:28,006 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-01-31 21:32:28,006 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-01-31 21:32:28,006 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-01-31 21:32:28,006 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-01-31 21:32:28,006 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-01-31 21:32:28,006 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-01-31 21:32:28,007 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-01-31 21:32:28,007 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-01-31 21:32:28,007 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-01-31 21:32:28,007 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-01-31 21:32:28,007 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-01-31 21:32:28,008 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-01-31 21:32:28,008 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-01-31 21:32:28,008 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-01-31 21:32:28,008 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-01-31 21:32:28,008 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-01-31 21:32:28,008 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-01-31 21:32:28,009 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-01-31 21:32:28,009 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-01-31 21:32:28,009 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-01-31 21:32:28,009 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-01-31 21:32:28,009 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-01-31 21:32:28,010 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-01-31 21:32:28,010 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-01-31 21:32:28,010 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-01-31 21:32:28,012 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-31 21:32:28,107 - kings_builder - INFO - Checking for master admin user...
2026-01-31 21:32:28,280 - kings_builder - INFO - Master admin 'scitforte' already exists
2026-01-31 21:32:28,282 - kings_builder - INFO - Database tables created and super admin initialized
2026-01-31 21:32:42,651 - kings_builder - INFO - REQUEST: GET /api/v1/auth/login FROM: 127.0.0.1:52613 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 21:32:42,652 - kings_builder - ERROR - HTTP Exception: 405 - Method Not Allowed
2026-01-31 21:32:42,654 - kings_builder - INFO - RESPONSE: 405 for GET /api/v1/auth/login DURATION: 0.003s
2026-01-31 21:32:55,310 - kings_builder - INFO - REQUEST: GET /docs FROM: 127.0.0.1:52614 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 21:32:55,312 - kings_builder - INFO - RESPONSE: 200 for GET /docs DURATION: 0.002s
2026-01-31 21:32:55,586 - kings_builder - INFO - REQUEST: GET /openapi.json FROM: 127.0.0.1:52614 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 21:32:55,789 - kings_builder - INFO - RESPONSE: 200 for GET /openapi.json DURATION: 0.203s
2026-01-31 21:33:04,300 - kings_builder - INFO - REQUEST: GET /api/v1/auth/login FROM: 127.0.0.1:52621 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 21:33:04,301 - kings_builder - ERROR - HTTP Exception: 405 - Method Not Allowed
2026-01-31 21:33:04,302 - kings_builder - INFO - RESPONSE: 405 for GET /api/v1/auth/login DURATION: 0.002s
2026-01-31 21:35:55,320 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:52649 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 21:35:55,753 - kings_builder - INFO - RESPONSE: 200 for POST /api/v1/auth/login DURATION: 0.433s
2026-01-31 21:41:56,936 - kings_builder - INFO - REQUEST: GET /api/v1/auth/login FROM: 127.0.0.1:52748 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 21:41:56,938 - kings_builder - ERROR - HTTP Exception: 405 - Method Not Allowed
2026-01-31 21:41:56,939 - kings_builder - INFO - RESPONSE: 405 for GET /api/v1/auth/login DURATION: 0.003s
2026-01-31 21:50:38,517 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:52876 USER_AGENT: curl/8.17.0
2026-01-31 21:50:38,954 - kings_builder - INFO - RESPONSE: 200 for POST /api/v1/auth/login DURATION: 0.437s
2026-01-31 21:51:06,659 - kings_builder - INFO - REQUEST: GET / FROM: 127.0.0.1:52893 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 21:51:06,662 - kings_builder - INFO - RESPONSE: 307 for GET / DURATION: 0.002s
2026-01-31 21:51:06,675 - kings_builder - INFO - REQUEST: GET /docs FROM: 127.0.0.1:52893 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 21:51:06,677 - kings_builder - INFO - RESPONSE: 200 for GET /docs DURATION: 0.002s
2026-01-31 21:51:06,860 - kings_builder - INFO - REQUEST: GET /openapi.json FROM: 127.0.0.1:52893 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 21:51:06,865 - kings_builder - INFO - RESPONSE: 200 for GET /openapi.json DURATION: 0.005s
2026-01-31 21:51:14,695 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:52898 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 21:51:15,195 - kings_builder - INFO - RESPONSE: 200 for POST /api/v1/auth/login DURATION: 0.500s
2026-01-31 21:51:15,769 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:52898 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 21:51:16,063 - kings_builder - INFO - RESPONSE: 200 for POST /api/v1/auth/login DURATION: 0.294s
2026-01-31 21:51:17,026 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:52898 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 21:51:17,449 - kings_builder - INFO - RESPONSE: 200 for POST /api/v1/auth/login DURATION: 0.422s
2026-01-31 21:51:40,431 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:52917 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 21:51:40,783 - kings_builder - INFO - RESPONSE: 200 for POST /api/v1/auth/login DURATION: 0.353s
2026-01-31 21:51:42,260 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:52917 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 21:51:42,556 - kings_builder - INFO - RESPONSE: 200 for POST /api/v1/auth/login DURATION: 0.296s
2026-01-31 21:53:00,696 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:52936 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 21:53:01,184 - kings_builder - INFO - RESPONSE: 200 for POST /api/v1/auth/login DURATION: 0.488s
2026-01-31 21:53:06,216 - kings_builder - INFO - REQUEST: GET /health FROM: 127.0.0.1:52941 USER_AGENT: curl/8.17.0
2026-01-31 21:53:06,217 - kings_builder - INFO - RESPONSE: 200 for GET /health DURATION: 0.001s
2026-01-31 21:53:43,892 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:52954 USER_AGENT: curl/8.17.0
2026-01-31 21:53:44,402 - kings_builder - INFO - RESPONSE: 200 for POST /api/v1/auth/login DURATION: 0.510s
2026-01-31 21:55:05,477 - kings_builder - INFO - REQUEST: GET / FROM: 127.0.0.1:53001 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 21:55:05,480 - kings_builder - INFO - RESPONSE: 307 for GET / DURATION: 0.003s
2026-01-31 21:55:05,492 - kings_builder - INFO - REQUEST: GET /docs FROM: 127.0.0.1:53001 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 21:55:05,494 - kings_builder - INFO - RESPONSE: 200 for GET /docs DURATION: 0.001s
2026-01-31 21:55:05,663 - kings_builder - INFO - REQUEST: GET /openapi.json FROM: 127.0.0.1:53001 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 21:55:05,665 - kings_builder - INFO - RESPONSE: 200 for GET /openapi.json DURATION: 0.002s
2026-01-31 21:56:59,185 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:53015 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 21:56:59,543 - kings_builder - INFO - RESPONSE: 200 for POST /api/v1/auth/login DURATION: 0.358s
2026-01-31 21:57:16,647 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:53016 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 21:57:16,948 - kings_builder - INFO - RESPONSE: 200 for POST /api/v1/auth/login DURATION: 0.301s
2026-01-31 21:57:19,924 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:53016 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 21:57:20,224 - kings_builder - INFO - RESPONSE: 200 for POST /api/v1/auth/login DURATION: 0.300s
2026-01-31 21:57:20,824 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:53016 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 21:57:21,126 - kings_builder - INFO - RESPONSE: 200 for POST /api/v1/auth/login DURATION: 0.302s
2026-01-31 21:57:23,328 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:53016 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 21:57:23,629 - kings_builder - INFO - RESPONSE: 200 for POST /api/v1/auth/login DURATION: 0.301s
2026-01-31 22:50:22,151 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000']
2026-01-31 22:50:22,152 - kings_builder - INFO - Registering authentication routes...
2026-01-31 22:50:22,156 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-01-31 22:50:22,337 - kings_builder - INFO - Registered routes:
2026-01-31 22:50:22,337 - kings_builder - INFO -   {'HEAD', 'GET'} /openapi.json
2026-01-31 22:50:22,338 - kings_builder - INFO -   {'HEAD', 'GET'} /docs
2026-01-31 22:50:22,338 - kings_builder - INFO -   {'HEAD', 'GET'} /docs/oauth2-redirect
2026-01-31 22:50:22,338 - kings_builder - INFO -   {'HEAD', 'GET'} /redoc
2026-01-31 22:50:22,338 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-01-31 22:50:22,338 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-01-31 22:50:22,338 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-01-31 22:50:22,338 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-01-31 22:50:22,338 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-01-31 22:50:22,339 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-01-31 22:50:22,339 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-01-31 22:50:22,339 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-01-31 22:50:22,339 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-01-31 22:50:22,339 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-01-31 22:50:22,339 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-01-31 22:50:22,339 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-01-31 22:50:22,339 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-01-31 22:50:22,339 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-01-31 22:50:22,339 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-01-31 22:50:22,340 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-01-31 22:50:22,340 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-01-31 22:50:22,340 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-01-31 22:50:22,340 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-01-31 22:50:22,340 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-01-31 22:50:22,340 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-01-31 22:50:22,340 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-01-31 22:50:22,340 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-01-31 22:50:22,340 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-01-31 22:50:22,340 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-01-31 22:50:22,340 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-01-31 22:50:22,341 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-01-31 22:50:22,341 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-01-31 22:50:22,341 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-01-31 22:50:22,341 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-01-31 22:50:22,341 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-01-31 22:50:22,341 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-01-31 22:50:22,341 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-01-31 22:50:22,341 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-01-31 22:50:22,341 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-01-31 22:50:22,342 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-01-31 22:50:22,342 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-01-31 22:50:22,342 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-01-31 22:50:22,342 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-01-31 22:50:22,342 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-01-31 22:50:22,342 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-01-31 22:50:22,342 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-01-31 22:50:22,342 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-01-31 22:50:22,342 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-01-31 22:50:22,342 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-01-31 22:50:22,343 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-01-31 22:50:22,343 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-01-31 22:50:22,343 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-01-31 22:50:22,343 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-01-31 22:50:22,344 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-01-31 22:50:22,348 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-01-31 22:50:22,348 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-01-31 22:50:22,348 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-01-31 22:50:22,349 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-01-31 22:50:22,349 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-01-31 22:50:22,349 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-01-31 22:50:22,349 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-01-31 22:50:22,349 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-01-31 22:50:22,349 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-01-31 22:50:22,350 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-01-31 22:50:22,350 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-01-31 22:50:22,350 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-01-31 22:50:22,350 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-01-31 22:50:22,352 - kings_builder - INFO - Initializing Kings Builder backend...
2026-01-31 22:50:32,660 - kings_builder - INFO - Checking for master admin user...
2026-01-31 22:50:36,566 - kings_builder - INFO - Creating master admin user...
2026-01-31 22:50:38,342 - kings_builder - INFO - Master admin 'scitforte' created successfully
2026-01-31 22:50:38,559 - kings_builder - INFO - Database tables created and super admin initialized
2026-01-31 22:53:57,212 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:53471 USER_AGENT: curl/8.17.0
2026-01-31 22:54:03,638 - kings_builder - INFO - RESPONSE: 200 for POST /api/v1/auth/login DURATION: 6.426s
2026-01-31 23:02:24,967 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:53562 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 23:02:29,825 - kings_builder - INFO - RESPONSE: 200 for POST /api/v1/auth/login DURATION: 4.859s
2026-01-31 23:02:45,468 - kings_builder - INFO - REQUEST: GET /api/v1/auth/login FROM: 127.0.0.1:53563 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 23:02:45,470 - kings_builder - ERROR - HTTP Exception: 405 - Method Not Allowed
2026-01-31 23:02:45,472 - kings_builder - INFO - RESPONSE: 405 for GET /api/v1/auth/login DURATION: 0.003s
2026-01-31 23:03:06,941 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:53568 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 23:03:11,482 - kings_builder - INFO - RESPONSE: 200 for POST /api/v1/auth/login DURATION: 4.541s
2026-01-31 23:05:17,658 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:53616 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 23:05:21,364 - kings_builder - INFO - RESPONSE: 200 for POST /api/v1/auth/login DURATION: 3.707s
2026-01-31 23:06:06,162 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:53618 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 23:06:10,210 - kings_builder - INFO - RESPONSE: 200 for POST /api/v1/auth/login DURATION: 4.049s
2026-01-31 23:06:29,710 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:53644 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 23:06:34,299 - kings_builder - INFO - RESPONSE: 200 for POST /api/v1/auth/login DURATION: 4.589s
2026-01-31 23:07:02,874 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:53646 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 23:07:06,500 - kings_builder - INFO - RESPONSE: 200 for POST /api/v1/auth/login DURATION: 3.626s
2026-01-31 23:13:50,042 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:53770 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 23:13:55,378 - kings_builder - ERROR - HTTP Exception: 401 - Incorrect username or password
2026-01-31 23:13:55,379 - kings_builder - INFO - RESPONSE: 401 for POST /api/v1/auth/login DURATION: 5.336s
2026-01-31 23:14:14,767 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:53796 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 23:14:19,601 - kings_builder - ERROR - HTTP Exception: 401 - Incorrect username or password
2026-01-31 23:14:19,602 - kings_builder - INFO - RESPONSE: 401 for POST /api/v1/auth/login DURATION: 4.835s
2026-01-31 23:14:31,680 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:53811 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 23:14:35,733 - kings_builder - INFO - RESPONSE: 200 for POST /api/v1/auth/login DURATION: 4.053s
2026-01-31 23:19:40,911 - kings_builder - INFO - REQUEST: GET /docs FROM: 127.0.0.1:53878 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 23:19:40,913 - kings_builder - INFO - RESPONSE: 200 for GET /docs DURATION: 0.002s
2026-01-31 23:19:41,661 - kings_builder - INFO - REQUEST: GET /openapi.json FROM: 127.0.0.1:53878 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 23:19:42,057 - kings_builder - INFO - RESPONSE: 200 for GET /openapi.json DURATION: 0.396s
2026-01-31 23:20:23,624 - kings_builder - INFO - REQUEST: GET /api/v1/auth/login FROM: 127.0.0.1:53893 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-01-31 23:20:23,626 - kings_builder - ERROR - HTTP Exception: 405 - Method Not Allowed
2026-01-31 23:20:23,627 - kings_builder - INFO - RESPONSE: 405 for GET /api/v1/auth/login DURATION: 0.002s
2026-01-31 23:46:35,560 - kings_builder - INFO - REQUEST: GET /debug/routes FROM: 127.0.0.1:54230 USER_AGENT: curl/8.17.0
2026-01-31 23:46:35,574 - kings_builder - INFO - RESPONSE: 200 for GET /debug/routes DURATION: 0.014s
2026-01-31 23:47:16,428 - kings_builder - INFO - REQUEST: GET /api/v1/projects/ FROM: 127.0.0.1:54244 USER_AGENT: curl/8.17.0
2026-01-31 23:47:16,451 - kings_builder - ERROR - HTTP Exception: 403 - Not authenticated
2026-01-31 23:47:16,451 - kings_builder - INFO - RESPONSE: 403 for GET /api/v1/projects/ DURATION: 0.023s
2026-02-01 01:06:33,190 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:55177 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-02-01 01:06:37,944 - kings_builder - INFO - RESPONSE: 200 for POST /api/v1/auth/login DURATION: 4.757s
2026-02-02 00:14:26,393 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000']
2026-02-02 00:14:26,397 - kings_builder - INFO - Registering authentication routes...
2026-02-02 00:14:26,404 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-02-02 00:14:26,588 - kings_builder - INFO - Registered routes:
2026-02-02 00:14:26,589 - kings_builder - INFO -   {'HEAD', 'GET'} /openapi.json
2026-02-02 00:14:26,589 - kings_builder - INFO -   {'HEAD', 'GET'} /docs
2026-02-02 00:14:26,589 - kings_builder - INFO -   {'HEAD', 'GET'} /docs/oauth2-redirect
2026-02-02 00:14:26,589 - kings_builder - INFO -   {'HEAD', 'GET'} /redoc
2026-02-02 00:14:26,589 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-02-02 00:14:26,589 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-02-02 00:14:26,589 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-02-02 00:14:26,589 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-02-02 00:14:26,590 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-02-02 00:14:26,590 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-02-02 00:14:26,590 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-02-02 00:14:26,590 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-02-02 00:14:26,590 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-02-02 00:14:26,590 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-02-02 00:14:26,590 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-02-02 00:14:26,590 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-02-02 00:14:26,590 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-02-02 00:14:26,590 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-02-02 00:14:26,590 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-02-02 00:14:26,590 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-02-02 00:14:26,591 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-02-02 00:14:26,591 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-02-02 00:14:26,591 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-02-02 00:14:26,591 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-02-02 00:14:26,591 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-02-02 00:14:26,591 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-02-02 00:14:26,591 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-02-02 00:14:26,592 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-02-02 00:14:26,592 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-02-02 00:14:26,593 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-02-02 00:14:26,593 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-02-02 00:14:26,593 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-02-02 00:14:26,593 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-02-02 00:14:26,593 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-02-02 00:14:26,593 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-02-02 00:14:26,594 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-02-02 00:14:26,594 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-02-02 00:14:26,594 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-02-02 00:14:26,594 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-02-02 00:14:26,594 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-02-02 00:14:26,594 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-02-02 00:14:26,594 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-02-02 00:14:26,595 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-02-02 00:14:26,595 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-02-02 00:14:26,595 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-02-02 00:14:26,595 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-02-02 00:14:26,595 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-02-02 00:14:26,595 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-02-02 00:14:26,596 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-02-02 00:14:26,596 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-02-02 00:14:26,596 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-02-02 00:14:26,596 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-02-02 00:14:26,596 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-02-02 00:14:26,596 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-02-02 00:14:26,597 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-02-02 00:14:26,597 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-02-02 00:14:26,597 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-02-02 00:14:26,597 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-02-02 00:14:26,597 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-02-02 00:14:26,597 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-02-02 00:14:26,597 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-02-02 00:14:26,598 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-02-02 00:14:26,598 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-02-02 00:14:26,598 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-02-02 00:14:26,598 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-02-02 00:14:26,598 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-02-02 00:14:26,598 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-02-02 00:14:26,606 - kings_builder - INFO - Initializing Kings Builder backend...
2026-02-02 00:14:34,027 - kings_builder - INFO - Checking for master admin user...
2026-02-02 00:14:37,490 - kings_builder - INFO - Master admin 'scitforte' already exists
2026-02-02 00:14:37,896 - kings_builder - INFO - Database tables created and super admin initialized
2026-02-02 00:14:37,897 - kings_builder - INFO - Shutting down Kings Builder backend...
2026-02-02 00:15:58,660 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000']
2026-02-02 00:15:58,660 - kings_builder - INFO - Registering authentication routes...
2026-02-02 00:15:58,671 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-02-02 00:15:58,806 - kings_builder - INFO - Registered routes:
2026-02-02 00:15:58,806 - kings_builder - INFO -   {'GET', 'HEAD'} /openapi.json
2026-02-02 00:15:58,806 - kings_builder - INFO -   {'GET', 'HEAD'} /docs
2026-02-02 00:15:58,806 - kings_builder - INFO -   {'GET', 'HEAD'} /docs/oauth2-redirect
2026-02-02 00:15:58,806 - kings_builder - INFO -   {'GET', 'HEAD'} /redoc
2026-02-02 00:15:58,807 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-02-02 00:15:58,807 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-02-02 00:15:58,807 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-02-02 00:15:58,807 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-02-02 00:15:58,807 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-02-02 00:15:58,807 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-02-02 00:15:58,807 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-02-02 00:15:58,807 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-02-02 00:15:58,807 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-02-02 00:15:58,807 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-02-02 00:15:58,807 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-02-02 00:15:58,808 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-02-02 00:15:58,808 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-02-02 00:15:58,808 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-02-02 00:15:58,808 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-02-02 00:15:58,808 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-02-02 00:15:58,808 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-02-02 00:15:58,808 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-02-02 00:15:58,808 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-02-02 00:15:58,808 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-02-02 00:15:58,808 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-02-02 00:15:58,808 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-02-02 00:15:58,808 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-02-02 00:15:58,809 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-02-02 00:15:58,809 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-02-02 00:15:58,809 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-02-02 00:15:58,809 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-02-02 00:15:58,809 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-02-02 00:15:58,810 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-02-02 00:15:58,810 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-02-02 00:15:58,810 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-02-02 00:15:58,810 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-02-02 00:15:58,810 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-02-02 00:15:58,810 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-02-02 00:15:58,810 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-02-02 00:15:58,811 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-02-02 00:15:58,811 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-02-02 00:15:58,811 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-02-02 00:15:58,811 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-02-02 00:15:58,811 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-02-02 00:15:58,811 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-02-02 00:15:58,811 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-02-02 00:15:58,812 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-02-02 00:15:58,814 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-02-02 00:15:58,814 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-02-02 00:15:58,815 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-02-02 00:15:58,815 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-02-02 00:15:58,815 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-02-02 00:15:58,815 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-02-02 00:15:58,815 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-02-02 00:15:58,815 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-02-02 00:15:58,816 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-02-02 00:15:58,816 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-02-02 00:15:58,816 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-02-02 00:15:58,816 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-02-02 00:15:58,816 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-02-02 00:15:58,816 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-02-02 00:15:58,816 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-02-02 00:15:58,816 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-02-02 00:15:58,817 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-02-02 00:15:58,817 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-02-02 00:15:58,817 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-02-02 00:15:58,817 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-02-02 15:05:19,697 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000']
2026-02-02 15:05:19,697 - kings_builder - INFO - Registering authentication routes...
2026-02-02 15:05:19,701 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-02-02 15:05:19,879 - kings_builder - INFO - Registered routes:
2026-02-02 15:05:19,879 - kings_builder - INFO -   {'HEAD', 'GET'} /openapi.json
2026-02-02 15:05:19,879 - kings_builder - INFO -   {'HEAD', 'GET'} /docs
2026-02-02 15:05:19,880 - kings_builder - INFO -   {'HEAD', 'GET'} /docs/oauth2-redirect
2026-02-02 15:05:19,881 - kings_builder - INFO -   {'HEAD', 'GET'} /redoc
2026-02-02 15:05:19,881 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-02-02 15:05:19,883 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-02-02 15:05:19,885 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-02-02 15:05:19,887 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-02-02 15:05:19,888 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-02-02 15:05:19,888 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-02-02 15:05:19,889 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-02-02 15:05:19,890 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-02-02 15:05:19,890 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-02-02 15:05:19,891 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-02-02 15:05:19,891 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-02-02 15:05:19,891 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-02-02 15:05:19,897 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-02-02 15:05:19,897 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-02-02 15:05:19,897 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-02-02 15:05:19,898 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-02-02 15:05:19,898 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-02-02 15:05:19,898 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-02-02 15:05:19,898 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-02-02 15:05:19,898 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-02-02 15:05:19,899 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-02-02 15:05:19,899 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-02-02 15:05:19,899 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-02-02 15:05:19,900 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-02-02 15:05:19,900 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-02-02 15:05:19,900 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-02-02 15:05:19,900 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-02-02 15:05:19,901 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-02-02 15:05:19,901 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-02-02 15:05:19,901 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-02-02 15:05:19,901 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-02-02 15:05:19,901 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-02-02 15:05:19,902 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-02-02 15:05:19,902 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-02-02 15:05:19,902 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-02-02 15:05:19,902 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-02-02 15:05:19,902 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-02-02 15:05:19,902 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-02-02 15:05:19,903 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-02-02 15:05:19,903 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-02-02 15:05:19,903 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-02-02 15:05:19,903 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-02-02 15:05:19,903 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-02-02 15:05:19,904 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-02-02 15:05:19,904 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-02-02 15:05:19,904 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-02-02 15:05:19,904 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-02-02 15:05:19,904 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-02-02 15:05:19,904 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-02-02 15:05:19,905 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-02-02 15:05:19,905 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-02-02 15:05:19,905 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-02-02 15:05:19,905 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-02-02 15:05:19,905 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-02-02 15:05:19,905 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-02-02 15:05:19,905 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-02-02 15:05:19,905 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-02-02 15:05:19,906 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-02-02 15:05:19,906 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-02-02 15:05:19,906 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-02-02 15:05:19,906 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-02-02 15:05:19,906 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-02-02 15:05:19,906 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-02-02 15:05:19,922 - kings_builder - INFO - Initializing Kings Builder backend...
2026-02-02 15:05:29,583 - kings_builder - INFO - Checking for master admin user...
2026-02-02 15:05:33,328 - kings_builder - INFO - Master admin 'scitforte' already exists
2026-02-02 15:05:33,762 - kings_builder - INFO - Database tables created and super admin initialized
2026-02-02 15:05:38,360 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000']
2026-02-02 15:05:38,360 - kings_builder - INFO - Registering authentication routes...
2026-02-02 15:05:38,368 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-02-02 15:05:38,474 - kings_builder - INFO - Registered routes:
2026-02-02 15:05:38,475 - kings_builder - INFO -   {'GET', 'HEAD'} /openapi.json
2026-02-02 15:05:38,475 - kings_builder - INFO -   {'GET', 'HEAD'} /docs
2026-02-02 15:05:38,475 - kings_builder - INFO -   {'GET', 'HEAD'} /docs/oauth2-redirect
2026-02-02 15:05:38,475 - kings_builder - INFO -   {'GET', 'HEAD'} /redoc
2026-02-02 15:05:38,475 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-02-02 15:05:38,475 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-02-02 15:05:38,476 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-02-02 15:05:38,476 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-02-02 15:05:38,476 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-02-02 15:05:38,476 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-02-02 15:05:38,476 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-02-02 15:05:38,476 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-02-02 15:05:38,476 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-02-02 15:05:38,477 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-02-02 15:05:38,477 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-02-02 15:05:38,477 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-02-02 15:05:38,477 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-02-02 15:05:38,477 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-02-02 15:05:38,477 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-02-02 15:05:38,477 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-02-02 15:05:38,478 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-02-02 15:05:38,478 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-02-02 15:05:38,478 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-02-02 15:05:38,478 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-02-02 15:05:38,478 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-02-02 15:05:38,478 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-02-02 15:05:38,478 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-02-02 15:05:38,479 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-02-02 15:05:38,479 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-02-02 15:05:38,479 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-02-02 15:05:38,479 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-02-02 15:05:38,479 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-02-02 15:05:38,479 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-02-02 15:05:38,480 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-02-02 15:05:38,480 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-02-02 15:05:38,480 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-02-02 15:05:38,480 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-02-02 15:05:38,480 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-02-02 15:05:38,480 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-02-02 15:05:38,480 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-02-02 15:05:38,480 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-02-02 15:05:38,481 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-02-02 15:05:38,481 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-02-02 15:05:38,481 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-02-02 15:05:38,481 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-02-02 15:05:38,481 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-02-02 15:05:38,481 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-02-02 15:05:38,481 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-02-02 15:05:38,482 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-02-02 15:05:38,482 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-02-02 15:05:38,482 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-02-02 15:05:38,482 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-02-02 15:05:38,482 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-02-02 15:05:38,482 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-02-02 15:05:38,482 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-02-02 15:05:38,483 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-02-02 15:05:38,483 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-02-02 15:05:38,483 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-02-02 15:05:38,483 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-02-02 15:05:38,483 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-02-02 15:05:38,483 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-02-02 15:05:38,483 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-02-02 15:05:38,484 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-02-02 15:05:38,484 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-02-02 15:05:38,484 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-02-02 15:05:38,484 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-02-02 15:05:38,484 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-02-02 15:05:38,947 - kings_builder - INFO - REQUEST: GET / FROM: 127.0.0.1:56170 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-02-02 15:05:38,948 - kings_builder - INFO - RESPONSE: 307 for GET / DURATION: 0.002s
2026-02-02 15:05:39,022 - kings_builder - INFO - REQUEST: GET /docs FROM: 127.0.0.1:56170 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-02-02 15:05:39,023 - kings_builder - INFO - RESPONSE: 200 for GET /docs DURATION: 0.001s
2026-02-02 15:05:40,770 - kings_builder - INFO - REQUEST: GET /openapi.json FROM: 127.0.0.1:56170 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-02-02 15:05:41,319 - kings_builder - INFO - RESPONSE: 200 for GET /openapi.json DURATION: 0.549s
2026-02-02 15:06:05,975 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000']
2026-02-02 15:06:05,976 - kings_builder - INFO - Registering authentication routes...
2026-02-02 15:06:05,979 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-02-02 15:06:06,087 - kings_builder - INFO - Registered routes:
2026-02-02 15:06:06,087 - kings_builder - INFO -   {'HEAD', 'GET'} /openapi.json
2026-02-02 15:06:06,087 - kings_builder - INFO -   {'HEAD', 'GET'} /docs
2026-02-02 15:06:06,087 - kings_builder - INFO -   {'HEAD', 'GET'} /docs/oauth2-redirect
2026-02-02 15:06:06,087 - kings_builder - INFO -   {'HEAD', 'GET'} /redoc
2026-02-02 15:06:06,087 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-02-02 15:06:06,088 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-02-02 15:06:06,088 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-02-02 15:06:06,088 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-02-02 15:06:06,088 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-02-02 15:06:06,088 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-02-02 15:06:06,088 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-02-02 15:06:06,088 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-02-02 15:06:06,088 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-02-02 15:06:06,088 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-02-02 15:06:06,088 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-02-02 15:06:06,088 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-02-02 15:06:06,088 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-02-02 15:06:06,089 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-02-02 15:06:06,089 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-02-02 15:06:06,090 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-02-02 15:06:06,090 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-02-02 15:06:06,090 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-02-02 15:06:06,090 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-02-02 15:06:06,090 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-02-02 15:06:06,090 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-02-02 15:06:06,091 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-02-02 15:06:06,091 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-02-02 15:06:06,091 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-02-02 15:06:06,091 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-02-02 15:06:06,091 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-02-02 15:06:06,093 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-02-02 15:06:06,093 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-02-02 15:06:06,093 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-02-02 15:06:06,093 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-02-02 15:06:06,093 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-02-02 15:06:06,094 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-02-02 15:06:06,094 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-02-02 15:06:06,094 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-02-02 15:06:06,094 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-02-02 15:06:06,094 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-02-02 15:06:06,094 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-02-02 15:06:06,094 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-02-02 15:06:06,095 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-02-02 15:06:06,095 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-02-02 15:06:06,095 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-02-02 15:06:06,095 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-02-02 15:06:06,095 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-02-02 15:06:06,095 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-02-02 15:06:06,095 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-02-02 15:06:06,095 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-02-02 15:06:06,095 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-02-02 15:06:06,095 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-02-02 15:06:06,097 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-02-02 15:06:06,097 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-02-02 15:06:06,097 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-02-02 15:06:06,098 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-02-02 15:06:06,098 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-02-02 15:06:06,098 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-02-02 15:06:06,098 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-02-02 15:06:06,098 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-02-02 15:06:06,098 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-02-02 15:06:06,098 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-02-02 15:06:06,098 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-02-02 15:06:06,098 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-02-02 15:06:06,098 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-02-02 15:06:06,099 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-02-02 15:06:06,099 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-02-02 15:06:06,169 - kings_builder - INFO - Initializing Kings Builder backend...
2026-02-02 15:06:07,012 - kings_builder - INFO - REQUEST: GET / FROM: 127.0.0.1:56200 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-02-02 15:06:07,013 - kings_builder - INFO - RESPONSE: 307 for GET / DURATION: 0.001s
2026-02-02 15:06:07,020 - kings_builder - INFO - REQUEST: GET /docs FROM: 127.0.0.1:56200 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-02-02 15:06:07,021 - kings_builder - INFO - RESPONSE: 200 for GET /docs DURATION: 0.001s
2026-02-02 15:06:07,267 - kings_builder - INFO - REQUEST: GET /openapi.json FROM: 127.0.0.1:56200 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-02-02 15:06:07,270 - kings_builder - INFO - RESPONSE: 200 for GET /openapi.json DURATION: 0.003s
2026-02-02 15:06:13,983 - kings_builder - INFO - Checking for master admin user...
2026-02-02 15:06:17,648 - kings_builder - INFO - Master admin 'scitforte' already exists
2026-02-02 15:06:18,078 - kings_builder - INFO - Database tables created and super admin initialized
2026-02-02 15:06:18,079 - kings_builder - INFO - Shutting down Kings Builder backend...
2026-02-02 15:08:22,255 - kings_builder - INFO - REQUEST: GET / FROM: 127.0.0.1:56244 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-02-02 15:08:22,256 - kings_builder - INFO - RESPONSE: 307 for GET / DURATION: 0.001s
2026-02-02 15:08:22,284 - kings_builder - INFO - REQUEST: GET /docs FROM: 127.0.0.1:56244 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-02-02 15:08:22,289 - kings_builder - INFO - RESPONSE: 200 for GET /docs DURATION: 0.005s
2026-02-02 15:08:22,525 - kings_builder - INFO - REQUEST: GET /openapi.json FROM: 127.0.0.1:56244 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-02-02 15:08:22,535 - kings_builder - INFO - RESPONSE: 200 for GET /openapi.json DURATION: 0.010s
2026-02-02 15:09:08,966 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:56254 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-02-02 15:09:14,931 - kings_builder - INFO - RESPONSE: 200 for POST /api/v1/auth/login DURATION: 5.965s
2026-02-02 15:09:21,811 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:56261 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-02-02 15:09:25,527 - kings_builder - INFO - RESPONSE: 200 for POST /api/v1/auth/login DURATION: 3.716s
2026-02-02 15:09:27,205 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:56261 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-02-02 15:09:30,925 - kings_builder - INFO - RESPONSE: 200 for POST /api/v1/auth/login DURATION: 3.720s
2026-02-02 15:09:43,120 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:56279 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-02-02 15:09:45,620 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:56283 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-02-02 15:09:46,748 - kings_builder - INFO - RESPONSE: 200 for POST /api/v1/auth/login DURATION: 3.628s
2026-02-02 15:09:47,995 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:56279 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-02-02 15:09:49,565 - kings_builder - INFO - RESPONSE: 200 for POST /api/v1/auth/login DURATION: 3.945s
2026-02-02 15:09:51,986 - kings_builder - INFO - RESPONSE: 200 for POST /api/v1/auth/login DURATION: 3.991s
2026-02-02 15:13:10,767 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:56356 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-02-02 15:13:14,741 - kings_builder - INFO - RESPONSE: 200 for POST /api/v1/auth/login DURATION: 3.975s
2026-02-02 15:13:20,474 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:56364 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-02-02 15:13:24,236 - kings_builder - INFO - RESPONSE: 200 for POST /api/v1/auth/login DURATION: 3.762s
2026-02-02 15:13:46,390 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:56391 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-02-02 15:13:50,117 - kings_builder - INFO - RESPONSE: 200 for POST /api/v1/auth/login DURATION: 3.727s
2026-02-02 15:28:04,709 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:56763 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-02-02 15:28:09,097 - kings_builder - INFO - RESPONSE: 200 for POST /api/v1/auth/login DURATION: 4.387s
2026-02-02 16:02:11,912 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:57305 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-02-02 16:02:17,505 - kings_builder - ERROR - HTTP Exception: 401 - Incorrect username or password
2026-02-02 16:02:17,509 - kings_builder - INFO - RESPONSE: 401 for POST /api/v1/auth/login DURATION: 5.603s
2026-02-02 16:02:27,969 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:57306 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-02-02 16:02:31,662 - kings_builder - INFO - RESPONSE: 200 for POST /api/v1/auth/login DURATION: 3.693s
2026-02-02 16:21:53,283 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:57609 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-02-02 16:21:57,976 - kings_builder - INFO - RESPONSE: 200 for POST /api/v1/auth/login DURATION: 4.693s
2026-02-02 16:22:49,463 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:57611 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-02-02 16:22:53,272 - kings_builder - INFO - RESPONSE: 200 for POST /api/v1/auth/login DURATION: 3.809s
2026-02-02 16:56:48,057 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:58090 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-02-02 16:56:53,228 - kings_builder - INFO - RESPONSE: 200 for POST /api/v1/auth/login DURATION: 5.172s
2026-02-02 16:57:59,232 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:58118 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-02-02 16:58:03,489 - kings_builder - INFO - RESPONSE: 200 for POST /api/v1/auth/login DURATION: 4.257s
2026-02-02 17:30:44,053 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:58554 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-02-02 17:30:48,934 - kings_builder - INFO - RESPONSE: 200 for POST /api/v1/auth/login DURATION: 4.884s
2026-02-02 19:07:48,829 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:59529 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-02-02 19:07:56,330 - kings_builder - INFO - RESPONSE: 200 for POST /api/v1/auth/login DURATION: 7.508s
2026-02-02 19:33:16,856 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:59836 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-02-02 19:33:26,929 - kings_builder - INFO - RESPONSE: 200 for POST /api/v1/auth/login DURATION: 10.076s
2026-02-02 20:41:12,642 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:60919 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-02-02 20:41:17,898 - kings_builder - INFO - RESPONSE: 200 for POST /api/v1/auth/login DURATION: 5.262s
2026-02-02 20:55:34,456 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:61334 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-02-02 20:55:45,013 - kings_builder - INFO - RESPONSE: 200 for POST /api/v1/auth/login DURATION: 10.563s
2026-02-02 21:09:00,539 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:61614 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-02-02 21:09:07,950 - kings_builder - INFO - RESPONSE: 200 for POST /api/v1/auth/login DURATION: 7.413s
2026-02-02 23:13:31,735 - kings_builder - INFO - REQUEST: POST /api/v1/auth/register FROM: 127.0.0.1:55247 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-02-02 23:13:31,775 - kings_builder - ERROR - HTTP Exception: 404 - Not Found
2026-02-02 23:13:31,780 - kings_builder - INFO - RESPONSE: 404 for POST /api/v1/auth/register DURATION: 0.053s
2026-02-02 23:22:00,511 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:55414 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-02-02 23:22:05,649 - kings_builder - INFO - RESPONSE: 200 for POST /api/v1/auth/login DURATION: 5.138s
2026-02-03 00:17:23,577 - kings_builder - INFO - REQUEST: GET /docs FROM: 127.0.0.1:61823 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-02-03 00:17:23,619 - kings_builder - INFO - RESPONSE: 200 for GET /docs DURATION: 0.048s
2026-02-03 00:17:23,794 - kings_builder - INFO - REQUEST: GET /openapi.json FROM: 127.0.0.1:61823 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-02-03 00:17:23,831 - kings_builder - INFO - RESPONSE: 200 for GET /openapi.json DURATION: 0.037s
2026-02-03 00:19:15,067 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:61872 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-02-03 00:19:19,731 - kings_builder - INFO - RESPONSE: 200 for POST /api/v1/auth/login DURATION: 4.664s
2026-02-03 17:17:04,997 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000']
2026-02-03 17:17:04,997 - kings_builder - INFO - Registering authentication routes...
2026-02-03 17:17:05,005 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-02-03 17:17:05,489 - kings_builder - INFO - Registered routes:
2026-02-03 17:17:05,490 - kings_builder - INFO -   {'GET', 'HEAD'} /openapi.json
2026-02-03 17:17:05,490 - kings_builder - INFO -   {'GET', 'HEAD'} /docs
2026-02-03 17:17:05,490 - kings_builder - INFO -   {'GET', 'HEAD'} /docs/oauth2-redirect
2026-02-03 17:17:05,490 - kings_builder - INFO -   {'GET', 'HEAD'} /redoc
2026-02-03 17:17:05,490 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-02-03 17:17:05,491 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-02-03 17:17:05,491 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-02-03 17:17:05,491 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-02-03 17:17:05,491 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-02-03 17:17:05,492 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-02-03 17:17:05,492 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-02-03 17:17:05,492 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-02-03 17:17:05,492 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-02-03 17:17:05,493 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-02-03 17:17:05,493 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-02-03 17:17:05,493 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-02-03 17:17:05,493 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-02-03 17:17:05,494 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-02-03 17:17:05,494 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-02-03 17:17:05,494 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-02-03 17:17:05,494 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-02-03 17:17:05,494 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-02-03 17:17:05,495 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-02-03 17:17:05,496 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-02-03 17:17:05,496 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-02-03 17:17:05,497 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-02-03 17:17:05,497 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-02-03 17:17:05,497 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-02-03 17:17:05,498 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-02-03 17:17:05,500 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-02-03 17:17:05,500 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-02-03 17:17:05,501 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-02-03 17:17:05,501 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-02-03 17:17:05,501 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-02-03 17:17:05,501 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-02-03 17:17:05,501 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-02-03 17:17:05,502 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-02-03 17:17:05,502 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-02-03 17:17:05,502 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-02-03 17:17:05,502 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-02-03 17:17:05,502 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-02-03 17:17:05,503 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-02-03 17:17:05,503 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-02-03 17:17:05,503 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-02-03 17:17:05,503 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-02-03 17:17:05,503 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-02-03 17:17:05,503 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-02-03 17:17:05,503 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-02-03 17:17:05,504 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-02-03 17:17:05,506 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-02-03 17:17:05,509 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-02-03 17:17:05,509 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-02-03 17:17:05,510 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-02-03 17:17:05,510 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-02-03 17:17:05,510 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-02-03 17:17:05,510 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-02-03 17:17:05,510 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-02-03 17:17:05,511 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-02-03 17:17:05,511 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-02-03 17:17:05,516 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-02-03 17:17:05,516 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-02-03 17:17:05,517 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-02-03 17:17:05,517 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-02-03 17:17:05,517 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-02-03 17:17:05,517 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-02-03 17:17:05,518 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-02-03 17:17:05,518 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-02-03 17:17:05,536 - kings_builder - INFO - Initializing Kings Builder backend...
2026-02-03 17:17:11,701 - kings_builder - ERROR - Error during application startup: 'charmap' codec can't encode character '\u274c' in position 0: character maps to <undefined>
2026-02-03 17:17:11,701 - kings_builder - WARNING - Continuing startup despite database initialization error
2026-02-03 17:18:05,288 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000']
2026-02-03 17:18:05,289 - kings_builder - INFO - Registering authentication routes...
2026-02-03 17:18:05,295 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-02-03 17:18:05,530 - kings_builder - INFO - Registered routes:
2026-02-03 17:18:05,530 - kings_builder - INFO -   {'GET', 'HEAD'} /openapi.json
2026-02-03 17:18:05,531 - kings_builder - INFO -   {'GET', 'HEAD'} /docs
2026-02-03 17:18:05,531 - kings_builder - INFO -   {'GET', 'HEAD'} /docs/oauth2-redirect
2026-02-03 17:18:05,531 - kings_builder - INFO -   {'GET', 'HEAD'} /redoc
2026-02-03 17:18:05,532 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-02-03 17:18:05,532 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-02-03 17:18:05,532 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-02-03 17:18:05,532 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-02-03 17:18:05,532 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-02-03 17:18:05,535 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-02-03 17:18:05,536 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-02-03 17:18:05,536 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-02-03 17:18:05,536 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-02-03 17:18:05,537 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-02-03 17:18:05,537 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-02-03 17:18:05,537 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-02-03 17:18:05,537 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-02-03 17:18:05,538 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-02-03 17:18:05,538 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-02-03 17:18:05,538 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-02-03 17:18:05,539 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-02-03 17:18:05,540 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-02-03 17:18:05,540 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-02-03 17:18:05,540 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-02-03 17:18:05,541 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-02-03 17:18:05,541 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-02-03 17:18:05,541 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-02-03 17:18:05,541 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-02-03 17:18:05,541 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-02-03 17:18:05,541 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-02-03 17:18:05,541 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-02-03 17:18:05,541 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-02-03 17:18:05,541 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-02-03 17:18:05,542 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-02-03 17:18:05,542 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-02-03 17:18:05,542 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-02-03 17:18:05,542 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-02-03 17:18:05,542 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-02-03 17:18:05,542 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-02-03 17:18:05,542 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-02-03 17:18:05,542 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-02-03 17:18:05,542 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-02-03 17:18:05,543 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-02-03 17:18:05,543 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-02-03 17:18:05,543 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-02-03 17:18:05,543 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-02-03 17:18:05,543 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-02-03 17:18:05,543 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-02-03 17:18:05,543 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-02-03 17:18:05,543 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-02-03 17:18:05,543 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-02-03 17:18:05,544 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-02-03 17:18:05,544 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-02-03 17:18:05,544 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-02-03 17:18:05,544 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-02-03 17:18:05,544 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-02-03 17:18:05,544 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-02-03 17:18:05,545 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-02-03 17:18:05,545 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-02-03 17:18:05,545 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-02-03 17:18:05,546 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-02-03 17:18:05,546 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-02-03 17:18:05,546 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-02-03 17:18:05,546 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-02-03 17:18:05,546 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-02-03 17:18:05,547 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-02-03 17:18:05,547 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-02-03 17:18:05,549 - kings_builder - INFO - Initializing Kings Builder backend...
2026-02-03 17:18:17,185 - kings_builder - INFO - Checking for master admin user...
2026-02-03 17:18:20,915 - kings_builder - INFO - Master admin 'scitforte' already exists
2026-02-03 17:18:21,327 - kings_builder - INFO - Database tables created and super admin initialized
2026-02-03 17:20:21,677 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000']
2026-02-03 17:20:21,677 - kings_builder - INFO - Registering authentication routes...
2026-02-03 17:20:21,682 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-02-03 17:20:21,833 - kings_builder - INFO - Registered routes:
2026-02-03 17:20:21,833 - kings_builder - INFO -   {'GET', 'HEAD'} /openapi.json
2026-02-03 17:20:21,834 - kings_builder - INFO -   {'GET', 'HEAD'} /docs
2026-02-03 17:20:21,834 - kings_builder - INFO -   {'GET', 'HEAD'} /docs/oauth2-redirect
2026-02-03 17:20:21,834 - kings_builder - INFO -   {'GET', 'HEAD'} /redoc
2026-02-03 17:20:21,834 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-02-03 17:20:21,834 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-02-03 17:20:21,834 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-02-03 17:20:21,834 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-02-03 17:20:21,835 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-02-03 17:20:21,835 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-02-03 17:20:21,835 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-02-03 17:20:21,835 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-02-03 17:20:21,835 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-02-03 17:20:21,835 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-02-03 17:20:21,835 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-02-03 17:20:21,835 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-02-03 17:20:21,836 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-02-03 17:20:21,836 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-02-03 17:20:21,836 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-02-03 17:20:21,836 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-02-03 17:20:21,836 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-02-03 17:20:21,836 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-02-03 17:20:21,836 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-02-03 17:20:21,837 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-02-03 17:20:21,837 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-02-03 17:20:21,837 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-02-03 17:20:21,837 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-02-03 17:20:21,837 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-02-03 17:20:21,837 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-02-03 17:20:21,838 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-02-03 17:20:21,838 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-02-03 17:20:21,839 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-02-03 17:20:21,839 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-02-03 17:20:21,840 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-02-03 17:20:21,840 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-02-03 17:20:21,841 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-02-03 17:20:21,843 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-02-03 17:20:21,843 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-02-03 17:20:21,843 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-02-03 17:20:21,843 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-02-03 17:20:21,843 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-02-03 17:20:21,844 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-02-03 17:20:21,844 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-02-03 17:20:21,844 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-02-03 17:20:21,844 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-02-03 17:20:21,845 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-02-03 17:20:21,845 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-02-03 17:20:21,845 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-02-03 17:20:21,845 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-02-03 17:20:21,845 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-02-03 17:20:21,845 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-02-03 17:20:21,846 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-02-03 17:20:21,846 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-02-03 17:20:21,846 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-02-03 17:20:21,846 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-02-03 17:20:21,846 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-02-03 17:20:21,847 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-02-03 17:20:21,847 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-02-03 17:20:21,847 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-02-03 17:20:21,847 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-02-03 17:20:21,848 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-02-03 17:20:21,848 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-02-03 17:20:21,848 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-02-03 17:20:21,848 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-02-03 17:20:21,848 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-02-03 17:20:21,848 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-02-03 17:20:21,848 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-02-03 17:20:21,857 - kings_builder - INFO - Initializing Kings Builder backend...
2026-02-03 17:20:33,727 - kings_builder - INFO - Checking for master admin user...
2026-02-03 17:20:37,380 - kings_builder - INFO - Master admin 'scitforte' already exists
2026-02-03 17:20:37,796 - kings_builder - INFO - Database tables created and super admin initialized
2026-02-03 17:22:29,463 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:62640 USER_AGENT: python-requests/2.31.0
2026-02-03 17:22:36,848 - kings_builder - ERROR - HTTP Exception: 401 - Incorrect username or password
2026-02-03 17:22:36,849 - kings_builder - INFO - RESPONSE: 401 for POST /api/v1/auth/login DURATION: 7.386s
2026-02-03 17:23:32,800 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:62660 USER_AGENT: python-requests/2.31.0
2026-02-03 17:23:37,889 - kings_builder - INFO - RESPONSE: 200 for POST /api/v1/auth/login DURATION: 5.089s
2026-02-03 17:23:40,324 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:62663 USER_AGENT: python-requests/2.31.0
2026-02-03 17:23:44,809 - kings_builder - ERROR - HTTP Exception: 401 - Incorrect username or password
2026-02-03 17:23:44,809 - kings_builder - INFO - RESPONSE: 401 for POST /api/v1/auth/login DURATION: 4.485s
2026-02-03 17:31:19,663 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000']
2026-02-03 17:31:19,664 - kings_builder - INFO - Registering authentication routes...
2026-02-03 17:31:19,679 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-02-03 17:31:20,127 - kings_builder - INFO - Registered routes:
2026-02-03 17:31:20,128 - kings_builder - INFO -   {'HEAD', 'GET'} /openapi.json
2026-02-03 17:31:20,128 - kings_builder - INFO -   {'HEAD', 'GET'} /docs
2026-02-03 17:31:20,128 - kings_builder - INFO -   {'HEAD', 'GET'} /docs/oauth2-redirect
2026-02-03 17:31:20,128 - kings_builder - INFO -   {'HEAD', 'GET'} /redoc
2026-02-03 17:31:20,129 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-02-03 17:31:20,130 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-02-03 17:31:20,137 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-02-03 17:31:20,138 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-02-03 17:31:20,139 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-02-03 17:31:20,140 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-02-03 17:31:20,142 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-02-03 17:31:20,142 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-02-03 17:31:20,143 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-02-03 17:31:20,143 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-02-03 17:31:20,144 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-02-03 17:31:20,144 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-02-03 17:31:20,144 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-02-03 17:31:20,145 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-02-03 17:31:20,147 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-02-03 17:31:20,147 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-02-03 17:31:20,147 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-02-03 17:31:20,148 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-02-03 17:31:20,148 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-02-03 17:31:20,148 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-02-03 17:31:20,148 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-02-03 17:31:20,148 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-02-03 17:31:20,149 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-02-03 17:31:20,149 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-02-03 17:31:20,149 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-02-03 17:31:20,149 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-02-03 17:31:20,149 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-02-03 17:31:20,150 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-02-03 17:31:20,150 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-02-03 17:31:20,150 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-02-03 17:31:20,150 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-02-03 17:31:20,150 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-02-03 17:31:20,150 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-02-03 17:31:20,151 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-02-03 17:31:20,151 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-02-03 17:31:20,151 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-02-03 17:31:20,151 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-02-03 17:31:20,151 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-02-03 17:31:20,152 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-02-03 17:31:20,152 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-02-03 17:31:20,152 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-02-03 17:31:20,152 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-02-03 17:31:20,153 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-02-03 17:31:20,153 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-02-03 17:31:20,153 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-02-03 17:31:20,154 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-02-03 17:31:20,154 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-02-03 17:31:20,155 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-02-03 17:31:20,155 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-02-03 17:31:20,155 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-02-03 17:31:20,155 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-02-03 17:31:20,156 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-02-03 17:31:20,156 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-02-03 17:31:20,157 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-02-03 17:31:20,158 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-02-03 17:31:20,159 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-02-03 17:31:20,160 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-02-03 17:31:20,161 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-02-03 17:31:20,161 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-02-03 17:31:20,162 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-02-03 17:31:20,163 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-02-03 17:31:20,163 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-02-03 17:31:20,163 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-02-03 17:31:20,169 - kings_builder - INFO - Initializing Kings Builder backend...
2026-02-03 17:31:25,016 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:62837 USER_AGENT: python-requests/2.31.0
2026-02-03 17:31:30,831 - kings_builder - INFO - RESPONSE: 200 for POST /api/v1/auth/login DURATION: 5.822s
2026-02-03 17:31:33,194 - kings_builder - INFO - REQUEST: POST /api/v1/users/ FROM: 127.0.0.1:62846 USER_AGENT: python-requests/2.31.0
2026-02-03 17:31:34,648 - kings_builder - INFO - Checking for master admin user...
2026-02-03 17:31:39,837 - kings_builder - INFO - Master admin 'scitforte' already exists
2026-02-03 17:31:40,280 - kings_builder - INFO - Database tables created and super admin initialized
2026-02-03 17:31:44,192 - kings_builder - INFO - RESPONSE: 200 for POST /api/v1/users/ DURATION: 10.999s
2026-02-03 17:52:06,049 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000']
2026-02-03 17:52:06,049 - kings_builder - INFO - Registering authentication routes...
2026-02-03 17:52:06,055 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-02-03 17:52:06,252 - kings_builder - INFO - Registered routes:
2026-02-03 17:52:06,252 - kings_builder - INFO -   {'GET', 'HEAD'} /openapi.json
2026-02-03 17:52:06,252 - kings_builder - INFO -   {'GET', 'HEAD'} /docs
2026-02-03 17:52:06,253 - kings_builder - INFO -   {'GET', 'HEAD'} /docs/oauth2-redirect
2026-02-03 17:52:06,253 - kings_builder - INFO -   {'GET', 'HEAD'} /redoc
2026-02-03 17:52:06,253 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-02-03 17:52:06,253 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-02-03 17:52:06,253 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-02-03 17:52:06,253 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-02-03 17:52:06,253 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-02-03 17:52:06,254 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-02-03 17:52:06,254 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-02-03 17:52:06,254 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-02-03 17:52:06,254 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-02-03 17:52:06,254 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-02-03 17:52:06,254 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-02-03 17:52:06,254 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-02-03 17:52:06,254 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-02-03 17:52:06,254 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-02-03 17:52:06,255 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-02-03 17:52:06,255 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-02-03 17:52:06,255 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-02-03 17:52:06,255 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-02-03 17:52:06,255 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-02-03 17:52:06,255 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-02-03 17:52:06,255 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-02-03 17:52:06,255 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-02-03 17:52:06,255 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-02-03 17:52:06,256 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-02-03 17:52:06,256 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-02-03 17:52:06,256 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-02-03 17:52:06,256 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-02-03 17:52:06,256 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-02-03 17:52:06,257 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-02-03 17:52:06,257 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-02-03 17:52:06,258 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-02-03 17:52:06,258 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-02-03 17:52:06,258 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-02-03 17:52:06,258 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-02-03 17:52:06,258 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-02-03 17:52:06,259 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-02-03 17:52:06,261 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-02-03 17:52:06,261 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-02-03 17:52:06,262 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-02-03 17:52:06,262 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-02-03 17:52:06,262 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-02-03 17:52:06,263 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-02-03 17:52:06,263 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-02-03 17:52:06,263 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-02-03 17:52:06,263 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-02-03 17:52:06,263 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-02-03 17:52:06,264 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-02-03 17:52:06,264 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-02-03 17:52:06,264 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-02-03 17:52:06,264 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-02-03 17:52:06,264 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-02-03 17:52:06,265 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-02-03 17:52:06,265 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-02-03 17:52:06,265 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-02-03 17:52:06,265 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-02-03 17:52:06,265 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-02-03 17:52:06,266 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-02-03 17:52:06,266 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-02-03 17:52:06,266 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-02-03 17:52:06,266 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-02-03 17:52:06,267 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-02-03 17:52:06,267 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-02-03 17:52:06,267 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-02-03 17:52:06,284 - kings_builder - INFO - Initializing Kings Builder backend...
2026-02-03 17:52:17,853 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:63152 USER_AGENT: curl/8.17.0
2026-02-03 17:52:20,668 - kings_builder - INFO - Checking for master admin user...
2026-02-03 17:52:22,349 - kings_builder - INFO - RESPONSE: 200 for POST /api/v1/auth/login DURATION: 4.501s
2026-02-03 17:52:24,361 - kings_builder - INFO - Master admin 'scitforte' already exists
2026-02-03 17:52:24,769 - kings_builder - INFO - Database tables created and super admin initialized
2026-02-03 17:53:56,929 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000']
2026-02-03 17:53:56,931 - kings_builder - INFO - Registering authentication routes...
2026-02-03 17:53:56,939 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-02-03 17:53:57,295 - kings_builder - INFO - Registered routes:
2026-02-03 17:53:57,295 - kings_builder - INFO -   {'HEAD', 'GET'} /openapi.json
2026-02-03 17:53:57,296 - kings_builder - INFO -   {'HEAD', 'GET'} /docs
2026-02-03 17:53:57,296 - kings_builder - INFO -   {'HEAD', 'GET'} /docs/oauth2-redirect
2026-02-03 17:53:57,296 - kings_builder - INFO -   {'HEAD', 'GET'} /redoc
2026-02-03 17:53:57,298 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-02-03 17:53:57,300 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-02-03 17:53:57,301 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-02-03 17:53:57,304 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-02-03 17:53:57,309 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-02-03 17:53:57,317 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-02-03 17:53:57,327 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-02-03 17:53:57,333 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-02-03 17:53:57,337 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-02-03 17:53:57,353 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-02-03 17:53:57,360 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-02-03 17:53:57,363 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-02-03 17:53:57,365 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-02-03 17:53:57,374 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-02-03 17:53:57,384 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-02-03 17:53:57,395 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-02-03 17:53:57,399 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-02-03 17:53:57,413 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-02-03 17:53:57,416 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-02-03 17:53:57,426 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-02-03 17:53:57,477 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-02-03 17:53:57,516 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-02-03 17:53:57,545 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-02-03 17:53:57,549 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-02-03 17:53:57,553 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-02-03 17:53:57,569 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-02-03 17:53:57,595 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-02-03 17:53:57,598 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-02-03 17:53:57,600 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-02-03 17:53:57,601 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-02-03 17:53:57,602 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-02-03 17:53:57,603 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-02-03 17:53:57,628 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-02-03 17:53:57,628 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-02-03 17:53:57,630 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-02-03 17:53:57,631 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-02-03 17:53:57,632 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-02-03 17:53:57,633 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-02-03 17:53:57,634 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-02-03 17:53:57,635 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-02-03 17:53:57,637 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-02-03 17:53:57,645 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-02-03 17:53:57,646 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-02-03 17:53:57,647 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-02-03 17:53:57,649 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-02-03 17:53:57,650 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-02-03 17:53:57,657 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-02-03 17:53:57,661 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-02-03 17:53:57,662 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-02-03 17:53:57,664 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-02-03 17:53:57,665 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-02-03 17:53:57,666 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-02-03 17:53:57,667 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-02-03 17:53:57,681 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-02-03 17:53:57,684 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-02-03 17:53:57,686 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-02-03 17:53:57,692 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-02-03 17:53:57,695 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-02-03 17:53:57,697 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-02-03 17:53:57,698 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-02-03 17:53:57,699 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-02-03 17:53:57,699 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-02-03 17:53:57,700 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-02-03 17:53:57,719 - kings_builder - INFO - Initializing Kings Builder backend...
2026-02-03 17:53:59,216 - kings_builder - INFO - REQUEST: GET / FROM: 127.0.0.1:63190 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-02-03 17:53:59,233 - kings_builder - INFO - RESPONSE: 307 for GET / DURATION: 0.019s
2026-02-03 17:54:00,503 - kings_builder - INFO - REQUEST: GET /docs FROM: 127.0.0.1:63190 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-02-03 17:54:00,569 - kings_builder - INFO - RESPONSE: 200 for GET /docs DURATION: 0.067s
2026-02-03 17:54:01,831 - kings_builder - INFO - REQUEST: GET /openapi.json FROM: 127.0.0.1:63190 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-02-03 17:54:01,896 - kings_builder - INFO - RESPONSE: 200 for GET /openapi.json DURATION: 0.065s
2026-02-03 17:54:11,172 - kings_builder - INFO - Checking for master admin user...
2026-02-03 17:54:15,060 - kings_builder - INFO - Master admin 'scitforte' already exists
2026-02-03 17:54:15,488 - kings_builder - INFO - Database tables created and super admin initialized
2026-02-03 17:57:04,952 - kings_builder - INFO - CORS Origins configured: ['http://localhost:3000']
2026-02-03 17:57:04,953 - kings_builder - INFO - Registering authentication routes...
2026-02-03 17:57:04,958 - kings_builder - INFO - Auth router registered at /api/v1/auth
2026-02-03 17:57:05,182 - kings_builder - INFO - Registered routes:
2026-02-03 17:57:05,183 - kings_builder - INFO -   {'HEAD', 'GET'} /openapi.json
2026-02-03 17:57:05,183 - kings_builder - INFO -   {'HEAD', 'GET'} /docs
2026-02-03 17:57:05,183 - kings_builder - INFO -   {'HEAD', 'GET'} /docs/oauth2-redirect
2026-02-03 17:57:05,183 - kings_builder - INFO -   {'HEAD', 'GET'} /redoc
2026-02-03 17:57:05,184 - kings_builder - INFO -   {'POST'} /api/v1/auth/login
2026-02-03 17:57:05,184 - kings_builder - INFO -   {'POST'} /api/v1/auth/refresh
2026-02-03 17:57:05,184 - kings_builder - INFO -   {'POST'} /api/v1/dev-auth/dev-login
2026-02-03 17:57:05,184 - kings_builder - INFO -   {'GET'} /api/v1/users/
2026-02-03 17:57:05,185 - kings_builder - INFO -   {'GET'} /api/v1/users/{user_id}
2026-02-03 17:57:05,185 - kings_builder - INFO -   {'POST'} /api/v1/users/
2026-02-03 17:57:05,185 - kings_builder - INFO -   {'PUT'} /api/v1/users/{user_id}
2026-02-03 17:57:05,185 - kings_builder - INFO -   {'DELETE'} /api/v1/users/{user_id}
2026-02-03 17:57:05,185 - kings_builder - INFO -   {'GET'} /api/v1/builders/
2026-02-03 17:57:05,185 - kings_builder - INFO -   {'GET'} /api/v1/builders/{builder_id}
2026-02-03 17:57:05,185 - kings_builder - INFO -   {'POST'} /api/v1/builders/
2026-02-03 17:57:05,185 - kings_builder - INFO -   {'PUT'} /api/v1/builders/{builder_id}
2026-02-03 17:57:05,186 - kings_builder - INFO -   {'DELETE'} /api/v1/builders/{builder_id}
2026-02-03 17:57:05,186 - kings_builder - INFO -   {'GET'} /api/v1/projects/
2026-02-03 17:57:05,186 - kings_builder - INFO -   {'GET'} /api/v1/projects/{project_id}
2026-02-03 17:57:05,186 - kings_builder - INFO -   {'POST'} /api/v1/projects/
2026-02-03 17:57:05,186 - kings_builder - INFO -   {'PUT'} /api/v1/projects/{project_id}
2026-02-03 17:57:05,186 - kings_builder - INFO -   {'DELETE'} /api/v1/projects/{project_id}
2026-02-03 17:57:05,186 - kings_builder - INFO -   {'GET'} /api/v1/inventory/
2026-02-03 17:57:05,186 - kings_builder - INFO -   {'GET'} /api/v1/inventory/{inventory_id}
2026-02-03 17:57:05,186 - kings_builder - INFO -   {'POST'} /api/v1/inventory/
2026-02-03 17:57:05,187 - kings_builder - INFO -   {'PUT'} /api/v1/inventory/{inventory_id}
2026-02-03 17:57:05,187 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/lock
2026-02-03 17:57:05,187 - kings_builder - INFO -   {'PATCH'} /api/v1/inventory/{inventory_id}/hold
2026-02-03 17:57:05,187 - kings_builder - INFO -   {'DELETE'} /api/v1/inventory/{inventory_id}
2026-02-03 17:57:05,187 - kings_builder - INFO -   {'GET'} /api/v1/investors/
2026-02-03 17:57:05,187 - kings_builder - INFO -   {'GET'} /api/v1/investors/{investor_id}
2026-02-03 17:57:05,187 - kings_builder - INFO -   {'POST'} /api/v1/investors/
2026-02-03 17:57:05,187 - kings_builder - INFO -   {'PUT'} /api/v1/investors/{investor_id}
2026-02-03 17:57:05,187 - kings_builder - INFO -   {'DELETE'} /api/v1/investors/{investor_id}
2026-02-03 17:57:05,188 - kings_builder - INFO -   {'GET'} /api/v1/bookings/
2026-02-03 17:57:05,188 - kings_builder - INFO -   {'GET'} /api/v1/bookings/{booking_id}
2026-02-03 17:57:05,188 - kings_builder - INFO -   {'POST'} /api/v1/bookings/
2026-02-03 17:57:05,188 - kings_builder - INFO -   {'PUT'} /api/v1/bookings/{booking_id}
2026-02-03 17:57:05,188 - kings_builder - INFO -   {'PATCH'} /api/v1/bookings/{booking_id}/cancel
2026-02-03 17:57:05,188 - kings_builder - INFO -   {'DELETE'} /api/v1/bookings/{booking_id}
2026-02-03 17:57:05,188 - kings_builder - INFO -   {'GET'} /api/v1/customers/
2026-02-03 17:57:05,189 - kings_builder - INFO -   {'GET'} /api/v1/customers/{customer_id}
2026-02-03 17:57:05,189 - kings_builder - INFO -   {'POST'} /api/v1/customers/
2026-02-03 17:57:05,189 - kings_builder - INFO -   {'PUT'} /api/v1/customers/{customer_id}
2026-02-03 17:57:05,189 - kings_builder - INFO -   {'DELETE'} /api/v1/customers/{customer_id}
2026-02-03 17:57:05,189 - kings_builder - INFO -   {'GET'} /api/v1/payments/
2026-02-03 17:57:05,189 - kings_builder - INFO -   {'GET'} /api/v1/payments/{payment_id}
2026-02-03 17:57:05,190 - kings_builder - INFO -   {'POST'} /api/v1/payments/
2026-02-03 17:57:05,190 - kings_builder - INFO -   {'PUT'} /api/v1/payments/{payment_id}
2026-02-03 17:57:05,190 - kings_builder - INFO -   {'DELETE'} /api/v1/payments/{payment_id}
2026-02-03 17:57:05,190 - kings_builder - INFO -   {'GET'} /api/v1/installments/
2026-02-03 17:57:05,190 - kings_builder - INFO -   {'GET'} /api/v1/installments/{installment_id}
2026-02-03 17:57:05,190 - kings_builder - INFO -   {'POST'} /api/v1/installments/
2026-02-03 17:57:05,190 - kings_builder - INFO -   {'PUT'} /api/v1/installments/{installment_id}
2026-02-03 17:57:05,190 - kings_builder - INFO -   {'PATCH'} /api/v1/installments/{installment_id}/pay
2026-02-03 17:57:05,191 - kings_builder - INFO -   {'DELETE'} /api/v1/installments/{installment_id}
2026-02-03 17:57:05,191 - kings_builder - INFO -   {'GET'} /api/v1/transfers/
2026-02-03 17:57:05,191 - kings_builder - INFO -   {'GET'} /api/v1/transfers/{transfer_id}
2026-02-03 17:57:05,191 - kings_builder - INFO -   {'POST'} /api/v1/transfers/
2026-02-03 17:57:05,191 - kings_builder - INFO -   {'PUT'} /api/v1/transfers/{transfer_id}
2026-02-03 17:57:05,191 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/approve
2026-02-03 17:57:05,191 - kings_builder - INFO -   {'PATCH'} /api/v1/transfers/{transfer_id}/complete
2026-02-03 17:57:05,191 - kings_builder - INFO -   {'DELETE'} /api/v1/transfers/{transfer_id}
2026-02-03 17:57:05,192 - kings_builder - INFO -   {'GET'} /api/v1/reports/sales-summary
2026-02-03 17:57:05,192 - kings_builder - INFO -   {'GET'} /api/v1/reports/inventory-status
2026-02-03 17:57:05,192 - kings_builder - INFO -   {'GET'} /api/v1/reports/customer-ledger
2026-02-03 17:57:05,192 - kings_builder - INFO -   {'GET'} /api/v1/reports/payment-collection
2026-02-03 17:57:05,194 - kings_builder - INFO - Initializing Kings Builder backend...
2026-02-03 17:57:17,884 - kings_builder - INFO - Checking for master admin user...
2026-02-03 17:57:21,758 - kings_builder - INFO - Master admin 'scitforte' already exists
2026-02-03 17:57:22,178 - kings_builder - INFO - Database tables created and super admin initialized
2026-02-03 17:57:28,429 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:63287 USER_AGENT: node
2026-02-03 17:57:35,487 - kings_builder - INFO - RESPONSE: 200 for POST /api/v1/auth/login DURATION: 7.058s
2026-02-03 17:57:35,538 - kings_builder - INFO - REQUEST: POST /api/v1/users/ FROM: 127.0.0.1:63292 USER_AGENT: node
2026-02-03 17:57:44,337 - kings_builder - INFO - RESPONSE: 200 for POST /api/v1/users/ DURATION: 8.799s
2026-02-03 18:10:00,566 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:63470 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-02-03 18:10:07,867 - kings_builder - INFO - RESPONSE: 200 for POST /api/v1/auth/login DURATION: 7.308s
2026-02-03 18:35:59,750 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:53032 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-02-03 18:36:03,163 - kings_builder - INFO - REQUEST: POST /api/v1/auth/login FROM: 127.0.0.1:53033 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-02-03 18:36:04,861 - kings_builder - INFO - RESPONSE: 200 for POST /api/v1/auth/login DURATION: 5.114s
2026-02-03 18:36:07,344 - kings_builder - INFO - RESPONSE: 200 for POST /api/v1/auth/login DURATION: 4.181s
2026-02-03 19:42:51,337 - kings_builder - INFO - REQUEST: GET /docs FROM: 127.0.0.1:58894 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-02-03 19:42:51,453 - kings_builder - INFO - RESPONSE: 200 for GET /docs DURATION: 0.133s
2026-02-03 19:42:51,804 - kings_builder - INFO - REQUEST: GET /openapi.json FROM: 127.0.0.1:58894 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-02-03 19:42:52,973 - kings_builder - INFO - RESPONSE: 200 for GET /openapi.json DURATION: 1.169s
2026-02-03 19:45:37,486 - kings_builder - INFO - REQUEST: GET /docs FROM: 127.0.0.1:58934 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-02-03 19:45:37,491 - kings_builder - INFO - RESPONSE: 200 for GET /docs DURATION: 0.005s
2026-02-03 19:45:37,688 - kings_builder - INFO - REQUEST: GET /openapi.json FROM: 127.0.0.1:58934 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-02-03 19:45:37,696 - kings_builder - INFO - RESPONSE: 200 for GET /openapi.json DURATION: 0.007s
2026-02-03 19:50:13,789 - kings_builder - INFO - REQUEST: GET /docs FROM: 127.0.0.1:59002 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-02-03 19:50:13,818 - kings_builder - INFO - RESPONSE: 200 for GET /docs DURATION: 0.029s
2026-02-03 19:50:14,321 - kings_builder - INFO - REQUEST: GET /openapi.json FROM: 127.0.0.1:59002 USER_AGENT: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.0.0 Safari/537.36
2026-02-03 19:50:14,368 - kings_builder - INFO - RESPONSE: 200 for GET /openapi.json DURATION: 0.047s
